[0/1] Planning build
Building for debugging...
[0/4] Write swift-version-39B54973F684ADAB.txt
Build complete! (3.63s)
Test Suite 'All tests' started at 2025-09-09 22:34:21.863.
Test Suite 'KeyPathPackageTests.xctest' started at 2025-09-09 22:34:21.865.
Test Suite 'ContentViewDebounceTests' started at 2025-09-09 22:34:21.865.
Test Case '-[KeyPathTests.ContentViewDebounceTests testConfigurationSaveDebouncing]' started.
Test Case '-[KeyPathTests.ContentViewDebounceTests testConfigurationSaveDebouncing]' passed (0.003 seconds).
Test Case '-[KeyPathTests.ContentViewDebounceTests testConfigurationSaveFlow]' started.
Test Case '-[KeyPathTests.ContentViewDebounceTests testConfigurationSaveFlow]' passed (0.000 seconds).
Test Case '-[KeyPathTests.ContentViewDebounceTests testErrorHandlingPreservesUIState]' started.
Test Case '-[KeyPathTests.ContentViewDebounceTests testErrorHandlingPreservesUIState]' passed (0.003 seconds).
Test Case '-[KeyPathTests.ContentViewDebounceTests testMultipleConcurrentSaves]' started.
Test Case '-[KeyPathTests.ContentViewDebounceTests testMultipleConcurrentSaves]' passed (0.001 seconds).
Test Suite 'ContentViewDebounceTests' passed at 2025-09-09 22:34:21.873.
	 Executed 4 tests, with 0 failures (0 unexpected) in 0.007 (0.008) seconds
Test Suite 'ErrorHandlingTests' started at 2025-09-09 22:34:21.873.
Test Case '-[KeyPathTests.ErrorHandlingTests testAsyncConfigurationErrors]' started.
[2025-09-09 22:34:21.867] [ProcessLifecycleManager.swift:99 init(kanataManager:)] 🏗️ [ProcessLifecycleManager] Initialized with simplified PID-based tracking and caching
[2025-09-09 22:34:21.867] [ConfigFileWatcher.swift:38 init()] 📁 [FileWatcher] ConfigFileWatcher initialized with robust monitoring
[2025-09-09 22:34:21.867] [KanataManager.swift:318 init()] 🧪 [KanataManager] Skipping background initialization in test environment
[2025-09-09 22:34:21.867] [ProcessLifecycleManager.swift:99 init(kanataManager:)] 🏗️ [ProcessLifecycleManager] Initialized with simplified PID-based tracking and caching
[2025-09-09 22:34:21.867] [ConfigFileWatcher.swift:38 init()] 📁 [FileWatcher] ConfigFileWatcher initialized with robust monitoring
[2025-09-09 22:34:21.867] [KanataManager.swift:318 init()] 🧪 [KanataManager] Skipping background initialization in test environment
[2025-09-09 22:34:21.868] [ContentViewDebounceTests.swift:44 testConfigurationSaveDebouncing()] ✅ [Test] Configuration debouncing behavior verified
[2025-09-09 22:34:21.868] [ConfigFileWatcher.swift:197 stopWatching()] 📁 [FileWatcher] Stopping all monitoring...
[2025-09-09 22:34:21.868] [ConfigFileWatcher.swift:226 stopWatching()] ✅ [FileWatcher] All monitoring stopped and state cleared
[2025-09-09 22:34:21.868] [ConfigFileWatcher.swift:43 deinit] 📁 [FileWatcher] ConfigFileWatcher deinitialized
[2025-09-09 22:34:21.868] [ConfigFileWatcher.swift:197 stopWatching()] 📁 [FileWatcher] Stopping all monitoring...
[2025-09-09 22:34:21.868] [ConfigFileWatcher.swift:226 stopWatching()] ✅ [FileWatcher] All monitoring stopped and state cleared
[2025-09-09 22:34:21.868] [ConfigFileWatcher.swift:43 deinit] 📁 [FileWatcher] ConfigFileWatcher deinitialized
[2025-09-09 22:34:21.868] [ProcessLifecycleManager.swift:99 init(kanataManager:)] 🏗️ [ProcessLifecycleManager] Initialized with simplified PID-based tracking and caching
[2025-09-09 22:34:21.868] [ConfigFileWatcher.swift:38 init()] 📁 [FileWatcher] ConfigFileWatcher initialized with robust monitoring
[2025-09-09 22:34:21.868] [KanataManager.swift:318 init()] 🧪 [KanataManager] Skipping background initialization in test environment
[2025-09-09 22:34:21.868] [ProcessLifecycleManager.swift:99 init(kanataManager:)] 🏗️ [ProcessLifecycleManager] Initialized with simplified PID-based tracking and caching
[2025-09-09 22:34:21.868] [ConfigFileWatcher.swift:38 init()] 📁 [FileWatcher] ConfigFileWatcher initialized with robust monitoring
[2025-09-09 22:34:21.868] [KanataManager.swift:318 init()] 🧪 [KanataManager] Skipping background initialization in test environment
[2025-09-09 22:34:21.868] [ContentViewDebounceTests.swift:88 testConfigurationSaveFlow()] ✅ [Test] Configuration save flow structure verified
[2025-09-09 22:34:21.868] [ConfigFileWatcher.swift:197 stopWatching()] 📁 [FileWatcher] Stopping all monitoring...
[2025-09-09 22:34:21.868] [ConfigFileWatcher.swift:226 stopWatching()] ✅ [FileWatcher] All monitoring stopped and state cleared
[2025-09-09 22:34:21.868] [ConfigFileWatcher.swift:43 deinit] 📁 [FileWatcher] ConfigFileWatcher deinitialized
[2025-09-09 22:34:21.869] [ConfigFileWatcher.swift:197 stopWatching()] 📁 [FileWatcher] Stopping all monitoring...
[2025-09-09 22:34:21.869] [ConfigFileWatcher.swift:226 stopWatching()] ✅ [FileWatcher] All monitoring stopped and state cleared
[2025-09-09 22:34:21.869] [ConfigFileWatcher.swift:43 deinit] 📁 [FileWatcher] ConfigFileWatcher deinitialized
[2025-09-09 22:34:21.869] [ProcessLifecycleManager.swift:99 init(kanataManager:)] 🏗️ [ProcessLifecycleManager] Initialized with simplified PID-based tracking and caching
[2025-09-09 22:34:21.869] [ConfigFileWatcher.swift:38 init()] 📁 [FileWatcher] ConfigFileWatcher initialized with robust monitoring
[2025-09-09 22:34:21.869] [KanataManager.swift:318 init()] 🧪 [KanataManager] Skipping background initialization in test environment
[2025-09-09 22:34:21.869] [ProcessLifecycleManager.swift:99 init(kanataManager:)] 🏗️ [ProcessLifecycleManager] Initialized with simplified PID-based tracking and caching
[2025-09-09 22:34:21.869] [ConfigFileWatcher.swift:38 init()] 📁 [FileWatcher] ConfigFileWatcher initialized with robust monitoring
[2025-09-09 22:34:21.869] [KanataManager.swift:318 init()] 🧪 [KanataManager] Skipping background initialization in test environment
[2025-09-09 22:34:21.872] [ContentViewDebounceTests.swift:59 testErrorHandlingPreservesUIState()] ✅ [Test] Error handling structure verified
[2025-09-09 22:34:21.872] [ConfigFileWatcher.swift:197 stopWatching()] 📁 [FileWatcher] Stopping all monitoring...
[2025-09-09 22:34:21.872] [ConfigFileWatcher.swift:226 stopWatching()] ✅ [FileWatcher] All monitoring stopped and state cleared
[2025-09-09 22:34:21.872] [ConfigFileWatcher.swift:43 deinit] 📁 [FileWatcher] ConfigFileWatcher deinitialized
[2025-09-09 22:34:21.872] [ConfigFileWatcher.swift:197 stopWatching()] 📁 [FileWatcher] Stopping all monitoring...
[2025-09-09 22:34:21.872] [ConfigFileWatcher.swift:226 stopWatching()] ✅ [FileWatcher] All monitoring stopped and state cleared
[2025-09-09 22:34:21.872] [ConfigFileWatcher.swift:43 deinit] 📁 [FileWatcher] ConfigFileWatcher deinitialized
[2025-09-09 22:34:21.872] [ProcessLifecycleManager.swift:99 init(kanataManager:)] 🏗️ [ProcessLifecycleManager] Initialized with simplified PID-based tracking and caching
[2025-09-09 22:34:21.872] [ConfigFileWatcher.swift:38 init()] 📁 [FileWatcher] ConfigFileWatcher initialized with robust monitoring
[2025-09-09 22:34:21.872] [KanataManager.swift:318 init()] 🧪 [KanataManager] Skipping background initialization in test environment
[2025-09-09 22:34:21.872] [ProcessLifecycleManager.swift:99 init(kanataManager:)] 🏗️ [ProcessLifecycleManager] Initialized with simplified PID-based tracking and caching
[2025-09-09 22:34:21.872] [ConfigFileWatcher.swift:38 init()] 📁 [FileWatcher] ConfigFileWatcher initialized with robust monitoring
[2025-09-09 22:34:21.872] [KanataManager.swift:318 init()] 🧪 [KanataManager] Skipping background initialization in test environment
[2025-09-09 22:34:21.872] [ContentViewDebounceTests.swift:101 testMultipleConcurrentSaves()] 🧪 [Test] Starting concurrent save task 1
[2025-09-09 22:34:21.872] [ContentViewDebounceTests.swift:109 testMultipleConcurrentSaves()] 🧪 [Test] Completed concurrent save task 1
[2025-09-09 22:34:21.872] [ContentViewDebounceTests.swift:101 testMultipleConcurrentSaves()] 🧪 [Test] Starting concurrent save task 2
[2025-09-09 22:34:21.872] [ContentViewDebounceTests.swift:109 testMultipleConcurrentSaves()] 🧪 [Test] Completed concurrent save task 2
[2025-09-09 22:34:21.872] [ContentViewDebounceTests.swift:101 testMultipleConcurrentSaves()] 🧪 [Test] Starting concurrent save task 3
[2025-09-09 22:34:21.872] [ContentViewDebounceTests.swift:109 testMultipleConcurrentSaves()] 🧪 [Test] Completed concurrent save task 3
[2025-09-09 22:34:21.872] [ContentViewDebounceTests.swift:118 testMultipleConcurrentSaves()] ✅ [Test] Concurrent saves handled successfully
[2025-09-09 22:34:21.872] [ConfigFileWatcher.swift:197 stopWatching()] 📁 [FileWatcher] Stopping all monitoring...
[2025-09-09 22:34:21.872] [ConfigFileWatcher.swift:226 stopWatching()] ✅ [FileWatcher] All monitoring stopped and state cleared
[2025-09-09 22:34:21.872] [ConfigFileWatcher.swift:43 deinit] 📁 [FileWatcher] ConfigFileWatcher deinitialized
[2025-09-09 22:34:21.872] [ConfigFileWatcher.swift:197 stopWatching()] 📁 [FileWatcher] Stopping all monitoring...
[2025-09-09 22:34:21.873] [ConfigFileWatcher.swift:226 stopWatching()] ✅ [FileWatcher] All monitoring stopped and state cleared
[2025-09-09 22:34:21.873] [ConfigFileWatcher.swift:43 deinit] 📁 [FileWatcher] ConfigFileWatcher deinitialized
[2025-09-09 22:34:21.873] [ProcessLifecycleManager.swift:99 init(kanataManager:)] 🏗️ [ProcessLifecycleManager] Initialized with simplified PID-based tracking and caching
[2025-09-09 22:34:21.873] [ConfigFileWatcher.swift:38 init()] 📁 [FileWatcher] ConfigFileWatcher initialized with robust monitoring
[2025-09-09 22:34:21.873] [KanataManager.swift:318 init()] 🧪 [KanataManager] Skipping background initialization in test environment
[2025-09-09 22:34:21.873] [ConfigFileWatcher.swift:52 suppressEvents(for:reason:)] 🔇 [FileWatcher] Suppressing events for 1.0s - Internal saveConfiguration
[2025-09-09 22:34:21.873] [KanataManager.swift:2917 loadExistingMappings()] 📂 [Validation] ========== STARTUP CONFIG VALIDATION BEGIN ==========
[2025-09-09 22:34:21.873] [KanataManager.swift:2928 loadExistingMappings()] 📖 [Validation] Reading config file from: /Users/malpern/.config/keypath/keypath.kbd
[2025-09-09 22:34:21.873] [KanataManager.swift:2930 loadExistingMappings()] 📖 [Validation] Config file size: 224 characters
[2025-09-09 22:34:21.873] [KanataManager.swift:2933 loadExistingMappings()] 🔍 [Validation] Starting validation of existing configuration...
[2025-09-09 22:34:21.873] [KanataManager.swift:3368 validateGeneratedConfig(_:)] 🔍 [Validation] ========== CONFIG VALIDATION START ==========
[2025-09-09 22:34:21.873] [KanataManager.swift:3369 validateGeneratedConfig(_:)] 🔍 [Validation] Config size: 224 characters
[2025-09-09 22:34:21.874] [KanataManager.swift:3373 validateGeneratedConfig(_:)] 📡 [Validation] UDP port configured: 37001
[2025-09-09 22:34:21.874] [KanataManager.swift:3377 validateGeneratedConfig(_:)] 📡 [Validation] Checking UDP server availability on port 37001...
[2025-09-09 22:34:21.874] [KanataUDPClient.swift:203 checkServerStatus(authToken:)] 🌐 [UDP] Checking server status for 127.0.0.1:37001
[2025-09-09 22:34:21.874] [KanataUDPClient.swift:487 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Starting request 92D37A3F-ABAB-423B-BD94-60565694651E to 127.0.0.1:37001
[2025-09-09 22:34:21.874] [KanataUDPClient.swift:511 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Sending message to 127.0.0.1:37001 (30 bytes) [requestId: 92D37A3F-ABAB-423B-BD94-60565694651E]
[2025-09-09 22:34:21.874] [KanataUDPClient.swift:514 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Message content: {"RequestCurrentLayerName":{}} [requestId: 92D37A3F-ABAB-423B-BD94-60565694651E]
[2025-09-09 22:34:21.875] [KanataUDPClient.swift:429 getOrCreateConnection()] 📡 [UDP] Created new connection to 127.0.0.1:37001
[2025-09-09 22:34:21.875] [KanataUDPClient.swift:420 getOrCreateConnection()] 📡 [UDP] Connection state: preparing
[2025-09-09 22:34:21.875] [KanataUDPClient.swift:420 getOrCreateConnection()] 📡 [UDP] Connection state: ready
[2025-09-09 22:34:21.925] [KanataUDPClient.swift:546 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Local endpoint: 127.0.0.1:60044 [requestId: 92D37A3F-ABAB-423B-BD94-60565694651E]
[2025-09-09 22:34:21.925] [KanataUDPClient.swift:553 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Arming receive handler BEFORE send to prevent race condition [requestId: 92D37A3F-ABAB-423B-BD94-60565694651E]
[2025-09-09 22:34:21.925] [KanataUDPClient.swift:592 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Sending message after receive handler is armed [requestId: 92D37A3F-ABAB-423B-BD94-60565694651E]
[2025-09-09 22:34:21.925] [KanataUDPClient.swift:607 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] ✅ Message sent from local endpoint: 127.0.0.1:60044 [requestId: 92D37A3F-ABAB-423B-BD94-60565694651E]
[2025-09-09 22:34:21.925] [KanataUDPClient.swift:611 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] ✅ Message sent - receive handler already armed [requestId: 92D37A3F-ABAB-423B-BD94-60565694651E]
[2025-09-09 22:34:21.926] [KanataUDPClient.swift:573 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] ✅ Received response: 15 bytes [requestId: 92D37A3F-ABAB-423B-BD94-60565694651E]
[2025-09-09 22:34:21.926] [KanataUDPClient.swift:575 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Response context: Network.NWConnection.ContentContext [requestId: 92D37A3F-ABAB-423B-BD94-60565694651E]
[2025-09-09 22:34:21.926] [KanataUDPClient.swift:212 checkServerStatus(authToken:)] 🌐 [UDP] Server response: "AuthRequired"

[2025-09-09 22:34:21.926] [KanataUDPClient.swift:216 checkServerStatus(authToken:)] ✅ [UDP] Server is responding (auth required)
[2025-09-09 22:34:21.927] [KanataUDPClient.swift:120 authenticate(token:clientName:)] 🔐 [UDP] Attempting authentication
[2025-09-09 22:34:21.927] [KanataUDPClient.swift:487 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Starting request A62C3032-F4D3-4B92-88C0-608161536882 to 127.0.0.1:37001
[2025-09-09 22:34:21.927] [KanataUDPClient.swift:511 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Sending message to 127.0.0.1:37001 (96 bytes) [requestId: A62C3032-F4D3-4B92-88C0-608161536882]
[2025-09-09 22:34:21.927] [KanataUDPClient.swift:514 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Message content: {"Authenticate":{"client_name":"KeyPath","token":"***"}} [requestId: A62C3032-F4D3-4B92-88C0-608161536882]
[2025-09-09 22:34:21.927] [KanataUDPClient.swift:546 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Local endpoint: 127.0.0.1:60044 [requestId: A62C3032-F4D3-4B92-88C0-608161536882]
[2025-09-09 22:34:21.927] [KanataUDPClient.swift:553 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Arming receive handler BEFORE send to prevent race condition [requestId: A62C3032-F4D3-4B92-88C0-608161536882]
[2025-09-09 22:34:21.927] [KanataUDPClient.swift:592 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Sending message after receive handler is armed [requestId: A62C3032-F4D3-4B92-88C0-608161536882]
[2025-09-09 22:34:21.927] [KanataUDPClient.swift:607 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] ✅ Message sent from local endpoint: 127.0.0.1:60044 [requestId: A62C3032-F4D3-4B92-88C0-608161536882]
[2025-09-09 22:34:21.927] [KanataUDPClient.swift:611 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] ✅ Message sent - receive handler already armed [requestId: A62C3032-F4D3-4B92-88C0-608161536882]
[2025-09-09 22:34:21.927] [KanataUDPClient.swift:573 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] ✅ Received response: 90 bytes [requestId: A62C3032-F4D3-4B92-88C0-608161536882]
[2025-09-09 22:34:21.927] [KanataUDPClient.swift:575 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Response context: Network.NWConnection.ContentContext [requestId: A62C3032-F4D3-4B92-88C0-608161536882]
[2025-09-09 22:34:21.927] [KanataUDPClient.swift:140 authenticate(token:clientName:)] ✅ [UDP] Authentication successful
[2025-09-09 22:34:21.927] [KanataUDPClient.swift:141 authenticate(token:clientName:)] 🔐 [UDP] Session established (expires in 1800s)
[2025-09-09 22:34:21.928] [KanataManager.swift:3379 validateGeneratedConfig(_:)] 📡 [Validation] UDP server is AVAILABLE, using UDP validation
[2025-09-09 22:34:21.928] [KanataUDPClient.swift:487 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Starting request CCB1EBDA-DEBB-4CDF-9E34-3FFED9646E7A to 127.0.0.1:37001
[2025-09-09 22:34:21.928] [KanataUDPClient.swift:511 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Sending message to 127.0.0.1:37001 (312 bytes) [requestId: CCB1EBDA-DEBB-4CDF-9E34-3FFED9646E7A]
[2025-09-09 22:34:21.928] [KanataUDPClient.swift:514 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Message content: {"ValidateConfig":{"session_id":"***","config_content":";; Generated by KeyPath\n;; 1 key mapping(s) configured\n;;\n;; SAFETY FEATURES:\n;; - process-unmapped-keys no: Only process explicitly mapped keys\n\n(defcfg\n  process-unmapped-keys no\n)\n\n(defsrc\n  caps\n)\n\n(deflayer base\n  esc\n)"}} [requestId: CCB1EBDA-DEBB-4CDF-9E34-3FFED9646E7A]
[2025-09-09 22:34:21.928] [KanataUDPClient.swift:546 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Local endpoint: 127.0.0.1:60044 [requestId: CCB1EBDA-DEBB-4CDF-9E34-3FFED9646E7A]
[2025-09-09 22:34:21.928] [KanataUDPClient.swift:553 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Arming receive handler BEFORE send to prevent race condition [requestId: CCB1EBDA-DEBB-4CDF-9E34-3FFED9646E7A]
[2025-09-09 22:34:21.928] [KanataUDPClient.swift:592 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Sending message after receive handler is armed [requestId: CCB1EBDA-DEBB-4CDF-9E34-3FFED9646E7A]
[2025-09-09 22:34:21.928] [KanataUDPClient.swift:607 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] ✅ Message sent from local endpoint: 127.0.0.1:60044 [requestId: CCB1EBDA-DEBB-4CDF-9E34-3FFED9646E7A]
[2025-09-09 22:34:21.928] [KanataUDPClient.swift:611 sendUDPMessaTest Case '-[KeyPathTests.ErrorHandlingTests testAsyncConfigurationErrors]' passed (0.131 seconds).
Test Case '-[KeyPathTests.ErrorHandlingTests testAsyncResetConfigurationErrors]' started.
Test Case '-[KeyPathTests.ErrorHandlingTests testAsyncResetConfigurationErrors]' passed (0.001 seconds).
Test Case '-[KeyPathTests.ErrorHandlingTests testCommandKeyMappingErrorHandling]' started.
Test Case '-[KeyPathTests.ErrorHandlingTests testCommandKeyMappingErrorHandling]' passed (0.000 seconds).
Test Case '-[KeyPathTests.ErrorHandlingTests testConcurrentConfigurationOperations]' started.
ge(_:requiresAuth:)] 📡 [UDP] ✅ Message sent - receive handler already armed [requestId: CCB1EBDA-DEBB-4CDF-9E34-3FFED9646E7A]
[2025-09-09 22:34:21.928] [KanataUDPClient.swift:573 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] ✅ Received response: 313 bytes [requestId: CCB1EBDA-DEBB-4CDF-9E34-3FFED9646E7A]
[2025-09-09 22:34:21.928] [KanataUDPClient.swift:575 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Response context: Network.NWConnection.ContentContext [requestId: CCB1EBDA-DEBB-4CDF-9E34-3FFED9646E7A]
[2025-09-09 22:34:21.928] [KanataUDPClient.swift:307 validateConfig(_:)] ❌ [UDP] Config validation error: invalidResponse
[2025-09-09 22:34:21.928] [KanataManager.swift:3383 validateGeneratedConfig(_:)] ⏱️ [Validation] UDP validation completed in 0.001 seconds
[2025-09-09 22:34:21.928] [KanataManager.swift:3399 validateGeneratedConfig(_:)] ⚠️ [Validation] UDP validation network error: Invalid or malformed response from server
[2025-09-09 22:34:21.928] [KanataManager.swift:3400 validateGeneratedConfig(_:)] ⚠️ [Validation] Falling back to CLI validation...
[2025-09-09 22:34:21.928] [KanataUDPClient.swift:65 deinit] 📡 [UDP] Client deallocated, connection cleaned up
[2025-09-09 22:34:21.928] [KanataManager.swift:3417 validateGeneratedConfig(_:)] 🖥️ [Validation] Starting CLI validation...
[2025-09-09 22:34:21.928] [KanataManager.swift:3441 validateConfigWithCLI(_:)] 🖥️ [Validation-CLI] Starting CLI validation process...
[2025-09-09 22:34:21.928] [KanataManager.swift:3445 validateConfigWithCLI(_:)] 📝 [Validation-CLI] Creating temp config file: /Users/malpern/.config/keypath/temp_validation.kbd
[2025-09-09 22:34:21.929] [KanataManager.swift:3452 validateConfigWithCLI(_:)] 📝 [Validation-CLI] Temp config written successfully (224 characters)
[2025-09-09 22:34:21.929] [KanataManager.swift:3456 validateConfigWithCLI(_:)] 🔧 [Validation-CLI] Using kanata binary: /Library/KeyPath/bin/kanata
[2025-09-09 22:34:21.929] [PreferencesService.swift:255 buildUDPArguments(port:sessionTimeout:defaultTimeout:)] 🔐 [UDP Launch] Auth token ensured; using environment variable
[2025-09-09 22:34:21.929] [KanataManager.swift:3819 buildKanataArguments(configPath:checkOnly:)] 📡 [KanataArgs] UDP server enabled on port 37001
[2025-09-09 22:34:21.929] [KanataManager.swift:3832 buildKanataArguments(configPath:checkOnly:)] 🔧 [KanataArgs] Built arguments: --cfg /Users/malpern/.config/keypath/temp_validation.kbd --udp-port 37001 --check
[2025-09-09 22:34:21.929] [KanataManager.swift:3462 validateConfigWithCLI(_:)] 🔧 [Validation-CLI] Command: /Library/KeyPath/bin/kanata --cfg /Users/malpern/.config/keypath/temp_validation.kbd --udp-port 37001 --check
[2025-09-09 22:34:21.997] [KanataManager.swift:3472 validateConfigWithCLI(_:)] ⏱️ [Validation-CLI] CLI validation completed in 0.068 seconds
[2025-09-09 22:34:21.997] [KanataManager.swift:3477 validateConfigWithCLI(_:)] 📋 [Validation-CLI] Exit code: 0
[2025-09-09 22:34:21.997] [KanataManager.swift:3479 validateConfigWithCLI(_:)] 📋 [Validation-CLI] Output: 22:34:21.9440 [0m[34m[INFO] [0mkanata v1.9.0 starting
22:34:21.9440 [0m[34m[INFO] [0mvalidating config only and exiting
22:34:21.9443 [0m[34m[INFO] [0mprocess unmapped keys: false
22:34:21.9447 [0m[34m[INFO] [0mconfig file is valid
...
[2025-09-09 22:34:22.002] [KanataManager.swift:3484 validateConfigWithCLI(_:)] 🗑️ [Validation-CLI] Temp file cleaned up
[2025-09-09 22:34:22.002] [KanataManager.swift:3487 validateConfigWithCLI(_:)] ✅ [Validation-CLI] CLI validation PASSED
[2025-09-09 22:34:22.002] [KanataManager.swift:3419 validateGeneratedConfig(_:)] 🔍 [Validation] ========== CONFIG VALIDATION END ==========
[2025-09-09 22:34:22.002] [KanataManager.swift:2937 loadExistingMappings()] ⏱️ [Validation] Validation completed in 0.128 seconds
[2025-09-09 22:34:22.002] [KanataManager.swift:2941 loadExistingMappings()] ✅ [Validation] Config validation PASSED
[2025-09-09 22:34:22.002] [KanataManager.swift:3152 parseKanataConfig(_:)] 🔍 [Parse] Found 1 src keys, 1 layer keys, deduplicated to 1 unique mappings
[2025-09-09 22:34:22.002] [KanataManager.swift:2943 loadExistingMappings()] ✅ [Validation] Successfully loaded 1 existing mappings:
[2025-09-09 22:34:22.002] [KanataManager.swift:2945 loadExistingMappings()]    1. caps → esc
[2025-09-09 22:34:22.002] [KanataManager.swift:2962 loadExistingMappings()] 📂 [Validation] ========== STARTUP CONFIG VALIDATION END ==========
[2025-09-09 22:34:22.002] [KanataManager.swift:523 backupCurrentConfig()] 💾 [Backup] Current config backed up successfully
[2025-09-09 22:34:22.003] [ConfigurationService.swift:240 saveConfiguration(keyMappings:)] ✅ [ConfigService] Configuration saved with 2 mappings
[2025-09-09 22:34:22.003] [KanataManager.swift:1765 saveConfiguration(input:output:)] 💾 [Config] Config saved with 2 mappings via ConfigurationService
[2025-09-09 22:34:22.003] [KanataManager+Configuration.swift:93 triggerUDPReload()] 🧪 [UDP Reload] Skipping UDP reload in test environment
[2025-09-09 22:34:22.003] [KanataManager.swift:1786 saveConfiguration(input:output:)] ❌ [Config] UDP reload FAILED: Test environment - UDP disabled
[2025-09-09 22:34:22.003] [KanataManager.swift:1787 saveConfiguration(input:output:)] ❌ [Config] UDP server is required for validation-on-demand - restoring backup
[2025-09-09 22:34:22.003] [KanataManager.swift:536 restoreLastGoodConfig()] 🔄 [Restore] Restored last good config successfully
[2025-09-09 22:34:22.003] [SoundManager.swift:14 playTinkSound()] 🧪 [Sound] Suppressed tink sound in test environment
[2025-09-09 22:34:22.003] [SoundManager.swift:34 playErrorSound()] 🧪 [Sound] Suppressed error beep in test environment
[2025-09-09 22:34:22.003] [ConfigFileWatcher.swift:197 stopWatching()] 📁 [FileWatcher] Stopping all monitoring...
[2025-09-09 22:34:22.003] [ConfigFileWatcher.swift:226 stopWatching()] ✅ [FileWatcher] All monitoring stopped and state cleared
[2025-09-09 22:34:22.003] [ConfigFileWatcher.swift:43 deinit] 📁 [FileWatcher] ConfigFileWatcher deinitialized
[2025-09-09 22:34:22.004] [ProcessLifecycleManager.swift:99 init(kanataManager:)] 🏗️ [ProcessLifecycleManager] Initialized with simplified PID-based tracking and caching
[2025-09-09 22:34:22.004] [ConfigFileWatcher.swift:38 init()] 📁 [FileWatcher] ConfigFileWatcher initialized with robust monitoring
[2025-09-09 22:34:22.004] [KanataManager.swift:318 init()] 🧪 [KanataManager] Skipping background initialization in test environment
[2025-09-09 22:34:22.004] [KanataManager.swift:3223 resetToDefaultConfig()] 💾 [Config] Reset to default configuration
[2025-09-09 22:34:22.004] [ConfigFileWatcher.swift:197 stopWatching()] 📁 [FileWatcher] Stopping all monitoring...
[2025-09-09 22:34:22.004] [ConfigFileWatcher.swift:226 stopWatching()] ✅ [FileWatcher] All monitoring stopped and state cleared
[2025-09-09 22:34:22.004] [ConfigFileWatcher.swift:43 deinit] 📁 [FileWatcher] ConfigFileWatcher deinitialized
[2025-09-09 22:34:22.005] [ProcessLifecycleManager.swift:99 init(kanataManager:)] 🏗️ [ProcessLifecycleManager] Initialized with simplified PID-based tracking and caching
[2025-09-09 22:34:22.005] [ConfigFileWatcher.swift:38 init()] 📁 [FileWatcher] ConfigFileWatcher initialized with robust monitoring
[2025-09-09 22:34:22.005] [KanataManager.swift:318 init()] 🧪 [KanataManager] Skipping background initialization in test environment
[2025-09-09 22:34:22.005] [ConfigFileWatcher.swift:197 stopWatching()] 📁 [FileWatcher] Stopping all monitoring...
[2025-09-09 22:34:22.005] [ConfigFileWatcher.swift:226 stopWatching()] ✅ [FileWatcher] All monitoring stopped and state cleared
[2025-09-09 22:34:22.005] [ConfigFileWatcher.swift:43 deinit] 📁 [FileWatcher] ConfigFileWatcher deinitialized
[2025-09-09 22:34:22.005] [ProcessLifecycleManager.swift:99 init(kanataManager:)] 🏗️ [ProcessLifecycleManager] Initialized with simplified PID-based tracking and caching
[2025-09-09 22:34:22.005] [ConfigFileWatcher.swift:38 init()] 📁 [FileWatcher] ConfigFileWatcher initialized with robust monitoring
[2025-09-09 22:34:22.005] [KanataManager.swift:318 init()] 🧪 [KanataManager] Skipping background initialization in test environment
[2025-09-09 22:34:22.005] [ConfigFileWatcher.swift:52 suppressEvents(for:reason:)] 🔇 [FileWatcher] Suppressing events for 1.0s - Internal saveConfiguration
[2025-09-09 22:34:22.005] [ConfigFileWatcher.swift:52 suppressEvents(for:reason:)] 🔇 [FileWatcher] Suppressing events for 1.0s - Internal saveConfiguration
[2025-09-09 22:34:22.005] [ConfigFileWatcher.swift:52 suppressEvents(for:reason:)] 🔇 [FileWatcher] Suppressing events for 1.0s - Internal saveConfiguration
[2025-09-09 22:34:22.005] [ConfigFileWatcher.swift:52 suppressEvents(for:reason:)] 🔇 [FileWatcher] Suppressing events for 1.0s - Internal saveConfiguration
[2025-09-09 22:34:22.005] [ConfigFileWatcher.swift:52 suppressEvents(for:reason:)] 🔇 [FileWatcher] Suppressing events for 1.0s - Internal saveConfiguration
[2025-09-09 22:34:22.006] [ConfigFileWatcher.swift:52 suppressEvents(for:reason:)] 🔇 [FileWatcher] Suppressing events for 1.0s - Internal saveConfiguration
[2025-09-09 22:34:22.006] [ConfigFileWatcher.swift:52 suppressEvents(for:reason:)] 🔇 [FileWatcher] Suppressing events for 1.0s - Internal saveConfiguration
[2025-09-09 22:34:22.006] [ConfigFileWatcher.swift:52 suppressEvents(for:reason:)] 🔇 [FileWatcher] Suppressing events for 1.0s - Internal saveConfiguration
[2025-09-09 22:34:22.006] [ConfigFileWatcher.swift:52 suppressEvents(for:reason:)] 🔇 [FileWatcher] Suppressing events for 1.0s - Internal saveConfiguration
[2025-09-09 22:34:22.006] [ConfigFileWatcher.swift:52 suppressEvents(for:reason:)] 🔇 [FileWatcher] Suppressing events for 1.0s - Internal saveConfiguration
[2025-09-09 22:34:22.006] [KanataManager.swift:2917 loadExistingMappings()] 📂 [Validation] ========== STARTUP CONFIG VALIDATION BEGIN ==========
[2025-09-09 22:34:22.006] [KanataManager.swift:2928 loadExistingMappings()] 📖 [Validation] Reading config file from: /Users/malpern/.config/keypath/keypath.kbd
[2025-09-09 22:34:22.006] [KanataManager.swift:2930 loadExistingMappings()] 📖 [Validation] Config file size: 224 characters
[2025-09-09 22:34:22.006] [KanataManager.swift:2933 loadExistingMappings()] 🔍 [Validation] Starting validation of existing configuration...
[2025-09-09 22:34:22.006] [KanataManager.swift:3368 validateGeneratedConfig(_:)] 🔍 [Validation] ========== CONFIG VALIDATION START ==========
[2025-09-09 22:34:22.006] [KanataManager.swift:3369 validateGeneratedConfig(_:)] 🔍 [Validation] Config size: 224 characters
[2025-09-09 22:34:22.006] [KanataManager.swift:3373 validateGeneratedConfig(_:)] 📡 [Validation] UDP port configured: 37001
[2025-09-09 22:34:22.006] [KanataManager.swift:3377 validateGeneratedConfig(_:)] 📡 [Validation] Checking UDP server availability on port 37001...
[2025-09-09 22:34:22.006] [KanataManager.swift:2917 loadExistingMappings()] 📂 [Validation] ========== STARTUP CONFIG VALIDATION BEGIN ==========
[2025-09-09 22:34:22.006] [KanataUDPClient.swift:203 checkServerStatus(authToken:)] 🌐 [UDP] Checking server status for 127.0.0.1:37001
[2025-09-09 22:34:22.006] [KanataManager.swift:2928 loadExistingMappings()] 📖 [Validation] Reading config file from: /Users/malpern/.config/keypath/keypath.kbd
[2025-09-09 22:34:22.006] [KanataManager.swift:2930 loadExistingMappings()] 📖 [Validation] Config file size: 224 characters
[2025-09-09 22:34:22.006] [KanataManager.swift:2933 loadExistingMappings()] 🔍 [Validation] Starting validation of existing configuration...
[2025-09-09 22:34:22.006] [KanataUDPClient.swift:487 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Starting request 62E55673-C1F3-419A-8D7A-6B330AF1F8E8 to 127.0.0.1:37001
[2025-09-09 22:34:22.006] [KanataManager.swift:3368 validateGeneratedConfig(_:)] 🔍 [Validation] ========== CONFIG VALIDATION START ==========
[2025-09-09 22:34:22.006] [KanataUDPClient.swift:511 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Sending message to 127.0.0.1:37001 (30 bytes) [requestId: 62E55673-C1F3-419A-8D7A-6B330AF1F8E8]
[2025-09-09 22:34:22.006] [KanataManager.swift:3369 validateGeneratedConfig(_:)] 🔍 [Validation] Config size: 224 characters
[2025-09-09 22:34:22.006] [KanataUDPClient.swift:514 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Message content: {"RequestCurrentLayerName":{}} [requestId: 62E55673-C1F3-419A-8D7A-6B330AF1F8E8]
[2025-09-09 22:34:22.006] [KanataManager.swift:3373 validateGeneratedConfig(_:)] 📡 [Validation] UDP port configured: 37001
[2025-09-09 22:34:22.006] [KanataManager.swift:3377 validateGeneratedConfig(_:)] 📡 [Validation] Checking UDP server availability on port 37001...
[2025-09-09 22:34:22.006] [KanataManager.swift:2917 loadExistingMappings()] 📂 [Validation] ========== STARTUP CONFIG VALIDATION BEGIN ==========
[2025-09-09 22:34:22.006] [KanataUDPClient.swift:203 checkServerStatus(authToken:)] 🌐 [UDP] Checking server status for 127.0.0.1:37001
[2025-09-09 22:34:22.006] [KanataManager.swift:2928 loadExistingMappings()] 📖 [Validation] Reading config file from: /Users/malpern/.config/keypath/keypath.kbd
[2025-09-09 22:34:22.006] [KanataUDPClient.swift:487 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Starting request FC0825E2-B5CF-4651-8A89-82044F68FF35 to 127.0.0.1:37001
[2025-09-09 22:34:22.006] [KanataUDPClient.swift:429 getOrCreateConnection()] 📡 [UDP] Created new connection to 127.0.0.1:37001
[2025-09-09 22:34:22.006] [KanataUDPClient.swift:511 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Sending message to 127.0.0.1:37001 (30 bytes) [requestId: FC0825E2-B5CF-4651-8A89-82044F68FF35]
[2025-09-09 22:34:22.006] [KanataManager.swift:2930 loadExistingMappings()] 📖 [Validation] Config file size: 224 characters
[2025-09-09 22:34:22.006] [KanataManager.swift:2933 loadExistingMappings()] 🔍 [Validation] Starting validation of existing configuration...
[2025-09-09 22:34:22.006] [KanataManager.swift:3368 validateGeneratedConfig(_:)] 🔍 [Validation] ========== CONFIG VALIDATION START ==========
[2025-09-09 22:34:22.006] [KanataUDPClient.swift:514 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Message content: {"RequestCurrentLayerName":{}} [requestId: FC0825E2-B5CF-4651-8A89-82044F68FF35]
[2025-09-09 22:34:22.006] [KanataManager.swift:3369 validateGeneratedConfig(_:)] 🔍 [Validation] Config size: 224 characters
[2025-09-09 22:34:22.006] [KanataUDPClient.swift:429 getOrCreateConnection()] 📡 [UDP] Created new connection to 127.0.0.1:37001
[2025-09-09 22:34:22.006] [KanataManager.swift:3373 validateGeneratedConfig(_:)] 📡 [Validation] UDP port configured: 37001
[2025-09-09 22:34:22.006] [KanataManager.swift:3377 validateGeneratedConfig(_:)] 📡 [Validation] Checking UDP server availability on port 37001...
[2025-09-09 22:34:22.006] [KanataUDPClient.swift:203 checkServerStatus(authToken:)] 🌐 [UDP] Checking server status for 127.0.0.1:37001
[2025-09-09 22:34:22.006] [KanataManager.swift:2917 loadExistingMappings()] 📂 [Validation] ========== STARTUP CONFIG VALIDATION BEGIN ==========
[2025-09-09 22:34:22.006] [KanataUDPClient.swift:487 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Starting request 771CF257-BA7A-49EE-9831-B5516E051BC2 to 127.0.0.1:37001
[2025-09-09 22:34:22.006] [KanataManager.swift:2928 loadExistingMappings()] 📖 [Validation] Reading config file from: /Users/malpern/.config/keypath/keypath.kbd
[2025-09-09 22:34:22.006] [KanataUDPClient.swift:511 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Sending message to 127.0.0.1:37001 (30 bytes) [requestId: 771CF257-BA7A-49EE-9831-B5516E051BC2]
[2025-09-09 22:34:22.006] [KanataManager.swift:2930 loadExistingMappings()] 📖 [Validation] Config file size: 224 characters
[2025-09-09 22:34:22.006] [KanataUDPClient.swift:514 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Message content: {"RequestCurrentLayerName":{}} [requestId: 771CF257-BA7A-49EE-9831-B5516E051BC2]
[2025-09-09 22:34:22.006] [KanataManager.swift:2933 loadExistingMappings()] 🔍 [Validation] Starting validation of existing configuration...
[2025-09-09 22:34:22.006] [KanataManager.swift:3368 validateGeneratedConfig(_:)] 🔍 [Validation] ========== CONFIG VALIDATION START ==========
[2025-09-09 22:34:22.006] [KanataManager.swift:33025-09-09 22:34:22.007] [KanataUDPClient.swift:511 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Sending message to 127.0.0.1:37001 (30 bytes) [requestId: 87684BE5-59F5-4EBA-8CBC-D58A84D69F6B]
[2025-09-09 22:34:22.007] [KanataManager.swift:3369 validateGeneratedConfig(_:)] 🔍 [Validation] Config size: 224 characters
[2025-09-09 22:34:22.007] [KanataUDPClient.swift:514 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Message content: {"RequestCurrentLayerName":{}} [requestId: 87684BE5-59F5-4EBA-8CBC-D58A84D69F6B]
[2025-09-09 22:34:22.007] [KanataUDPClient.swift:429 getOrCreateConnection()] 📡 [UDP] Created new connection to 127.0.0.1:37001
[2025-09-09 22:34:22.007] [KanataManager.swift:3373 validateGeneratedConfig(_:)] 📡 [Validation] UDP port configured: 37001
[2025-09-09 22:34:22.007] [KanataManager.swift:3377 validateGeneratedConfig(_:)] 📡 [Validation] Checking UDP server availability on port 37001...
[2025-09-09 22:34:22.007] [KanataUDPClient.swift:420 getOrCreateConnection()] 📡 [UDP] Connection state: ready
[2025-09-09 22:34:22.007] [KanataUDPClient.swift:203 checkServerStatus(authToken:)] 🌐 [UDP] Checking server status for 127.0.0.1:37001
[2025-09-09 22:34:22.007] [KanataManager.swift:2917 loadExistingMappings()] 📂 [Validation] ========== STARTUP CONFIG VALIDATION BEGIN ==========
[2025-09-09 22:34:22.007] [KanataUDPClient.swift:487 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Starting request E43D639C-49FA-4023-954C-1B815DA32C45 to 127.0.0.1:37001
[2025-09-09 22:34:22.007] [KanataManager.swift:2928 loadExistingMappings()] 📖 [Validation] Reading config file from: /Users/malpern/.config/keypath/keypath.kbd
[2025-09-09 22:34:22.007] [KanataUDPClient.swift:511 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Sending message to 127.0.0.1:37001 (30 bytes) [requestId: E43D639C-49FA-4023-954C-1B815DA32C45]
[2025-09-09 22:34:22.007] [KanataUDPClient.swift:514 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Message content: {"RequestCurrentLayerName":{}} [requestId: E43D639C-49FA-4023-954C-1B815DA32C45]
[2025-09-09 22:34:22.007] [KanataManager.swift:2930 loadExistingMappings()] 📖 [Validation] Config file size: 224 characters
[2025-09-09 22:34:22.007] [KanataUDPClient.swift:420 getOrCreateConnection()] 📡 [UDP] Connection state: preparing
[2025-09-09 22:34:22.007] [KanataManager.swift:2933 loadExistingMappings()] 🔍 [Validation] Starting validation of existing configuration...
[2025-09-09 22:34:22.007] [KanataManager.swift:3368 validateGeneratedConfig(_:)] 🔍 [Validation] ========== CONFIG VALIDATION START ==========
[2025-09-09 22:34:22.007] [KanataUDPClient.swift:429 getOrCreateConnection()] 📡 [UDP] Created new connection to 127.0.0.1:37001
[2025-09-09 22:34:22.007] [KanataManager.swift:3369 validateGeneratedConfig(_:)] 🔍 [Validation] Config size: 224 characters
[2025-09-09 22:34:22.007] [KanataManager.swift:3373 validateGeneratedConfig(_:)] 📡 [Validation] UDP port configured: 37001
[2025-09-09 22:34:22.007] [KanataUDPClient.swift:420 getOrCreateConnection()] 📡 [UDP] Connection state: ready
[2025-09-09 22:34:22.007] [KanataManager.swift:3377 validateGeneratedConfig(_:)] 📡 [Validation] Checking UDP server availability on port 37001...
[2025-09-09 22:34:22.007] [KanataUDPClient.swift:203 checkServerStatus(authToken:)] 🌐 [UDP] Checking server status for 127.0.0.1:37001
[2025-09-09 22:34:22.007] [KanataManager.swift:2917 loadExistingMappings()] 📂 [Validation] ========== STARTUP CONFIG VALIDATION BEGIN ==========
[2025-09-09 22:34:22.007] [KanataUDPClient.swift:487 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Starting request 89A1D2F9-FE7D-4114-937C-547EA3AEA9AB to 127.0.0.1:37001
[2025-09-09 22:34:22.007] [KanataManager.swift:2928 loadExistingMappings()] 📖 [Validation] Reading config file from: /Users/malpern/.config/keypath/keypath.kbd
[2025-09-09 22:34:22.007] [KanataUDPClient.swift:511 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Sending message to 127.0.0.1:37001 (30 bytes) [requestId: 89A1D2F9-FE7D-4114-937C-547EA3AEA9AB]
[2025-09-09 22:34:22.007] [KanataManager.swift:2930 loadExistingMappings()] 📖 [Validation] Config file size: 224 characters
[2025-09-09 22:34:22.007] [KanataManager.swift:2933 loadExistingMappings()] 🔍 [Validation] Starting validation of existing configuration...
[2025-09-09 22:34:22.007] [KanataManager.swift:3368 validateGeneratedConfig(_:)] 🔍 [Validation] ========== CONFIG VALIDATION START ==========
[2025-09-09 22:34:22.007] [KanataManager.swift:3369 validateGeneratedConfig(_:)] 🔍 [Validation] Config size: 224 characters
[2025-09-09 22:34:22.007] [KanataUDPClient.swift:514 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Message content: {"RequestCurrentLayerName":{}} [requestId: 89A1D2F9-FE7D-4114-937C-547EA3AEA9AB]
[2025-09-09 22:34:22.007] [KanataUDPClient.swift:429 getOrCreateConnection()] 📡 [UDP] Created new connection to 127.0.0.1:37001
[2025-09-09 22:34:22.007] [KanataManager.swift:3373 validateGeneratedConfig(_:)] 📡 [Validation] UDP port configured: 37001
[2025-09-09 22:34:22.007] [KanataManager.swift:3377 validateGeneratedConfig(_:)] 📡 [Validation] Checking UDP server availability on port 37001...
[2025-09-09 22:34:22.007] [KanataUDPClient.swift:203 checkServerStatus(authToken:)] 🌐 [UDP] Checking server status for 127.0.0.1:37001
[2025-09-09 22:34:22.007] [KanataUDPClient.swift:487 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Starting request 7E4B438E-6F8F-492A-8E1A-94B5913A9A41 to 127.0.0.1:37001
[2025-09-09 22:34:22.007] [KanataUDPClient.swift:511 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Sending message to 127.0.0.1:37001 (30 bytes) [requestId: 7E4B438E-6F8F-492A-8E1A-94B5913A9A41]
[2025-09-09 22:34:22.007] [KanataUDPClient.swift:514 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Message content: {"RequestCurrentLayerName":{}} [requestId: 7E4B438E-6F8F-492A-8E1A-94B5913A9A41]
[2025-09-09 22:34:22.007] [KanataUDPClient.swift:429 getOrCreateConnection()] 📡 [UDP] Created new connection to 127.0.0.1:37001
[2025-09-09 22:34:22.007] [KanataUDPClient.swift:420 getOrCreateConnection()] 📡 [UDP] Connection state: preparing
[2025-09-09 22:34:22.007] [KanataUDPClient.swift:420 getOrCreateConnection()] 📡 [UDP] Connection state: ready
[2025-09-09 22:34:22.007] [KanataUDPClient.swift:420 getOrCreateConnection()] 📡 [UDP] Connection state: preparing
[2025-09-09 22:34:22.008] [KanataUDPClient.swift:420 getOrCreateConnection()] 📡 [UDP] Connection state: ready
[2025-09-09 22:34:22.008] [KanataUDPClient.swift:420 getOrCreateConnection()] 📡 [UDP] Connection state: preparing
[2025-09-09 22:34:22.008] [KanataUDPClient.swift:420 getOrCreateConnection()] 📡 [UDP] Connection state: ready
[2025-09-09 22:34:22.008] [KanataUDPClient.swift:420 getOrCreateConnection()] 📡 [UDP] Connection state: preparing
[2025-09-09 22:34:22.008] [KanataUDPClient.swift:420 getOrCreateConnection()] 📡 [UDP] Connection state: ready
[2025-09-09 22:34:22.008] [KanataUDPClient.swift:420 getOrCreateConnection()] 📡 [UDP] Connection state: preparing
[2025-09-09 22:34:22.008] [KanataUDPClient.swift:420 getOrCreateConnection()] 📡 [UDP] Connection state: ready
[2025-09-09 22:34:22.061] [KanataUDPClient.swift:546 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Local endpoint: 127.0.0.1:57276 [requestId: 771CF257-BA7A-49EE-9831-B5516E051BC2]
[2025-09-09 22:34:22.061] [KanataUDPClient.swift:546 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Local endpoint: 127.0.0.1:54266 [requestId: 62E55673-C1F3-419A-8D7A-6B330AF1F8E8]
[2025-09-09 22:34:22.061] [KanataUDPClient.swift:546 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Local endpoint: 127.0.0.1:50389 [requestId: 68ECC0EF-5544-4046-AFB8-92B8A6098880]
[2025-09-09 22:34:22.061] [KanataUDPClient.swift:546 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Local endpoint: 127.0.0.1:61479 [requestId: FC0825E2-B5CF-4651-8A89-82044F68FF35]
[2025-09-09 22:34:22.061] [KanataUDPClient.swift:553 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Arming receive handler BEFORE send to prevent race condition [requestId: 771CF257-BA7A-49EE-9831-B5516E051BC2]
[2025-09-09 22:34:22.061] [KanataUDPClient.swift:546 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Local endpoint: 127.0.0.1:60620 [requestId: 87684BE5-59F5-4EBA-8CBC-D58A84D69F6B]
[2025-09-09 22:34:22.061] [KanataUDPClient.swift:546 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Local endpoint: 127.0.0.1:56908 [requestId: E43D639C-49FA-4023-954C-1B815DA32C45]
[2025-09-09 22:34:22.061] [KanataUDPClient.swift:592 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Sending message after receive handler is armed [requestId: 771CF257-BA7A-49EE-9831-B5516E051BC2]
[2025-09-09 22:34:22.061] [KanataUDPClient.swift:553 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Arming receive handler BEFORE send to prevent race condition [requestId: 68ECC0EF-5544-4046-AFB8-92B8A6098880]
[2025-09-09 22:34:22.061] [KanataUDPClient.swift:592 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Sending message after receive handler is armed [requestId: 68ECC0EF-5544-4046-AFB8-92B8A6098880]
[2025-09-09 22:34:22.061] [KanataUDPClient.swift:546 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Local endpoint: 127.0.0.1:58962 [requestId: 21A8AF6B-99ED-4CAC-86DE-7F30B19154C3]
[2025-09-09 22:34:22.061] [KanataUDPClient.swift:553 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Arming receive handler BEFORE send to prevent race condition [requestId: 21A8AF6B-99ED-4CAC-86DE-7F30B19154C3]
[2025-09-09 22:34:22.061] [KanataUDPClient.swift:546 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Local endpoint: 127.0.0.1:54071 [requestId: 7E4B438E-6F8F-492A-8E1A-94B5913A9A41]
[2025-09-09 22:34:22.061] [KanataUDPClient.swift:553 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Arming receive handler BEFORE send to prevent race condition [requestId: 7E4B438E-6F8F-492A-8E1A-94B5913A9A41]
[2025-09-09 22:34:22.061] [KanataUDPClient.swift:546 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Local endpoint: 127.0.0.1:54948 [requestId: 89A1D2F9-FE7D-4114-937C-547EA3AEA9AB]
[2025-09-09 22:34:22.061] [KanataUDPClient.swift:592 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Sending message after receive handler is armed [requestId: 7E4B438E-6F8F-492A-8E1A-94B5913A9A41]
[2025-09-09 22:34:22.061] [KanataUDPClient.swift:546 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Local endpoint: 127.0.0.1:62392 [requestId: A0531F31-4F8C-4A9A-8054-8E4FF0192511]
[2025-09-09 22:34:22.061] [KanataUDPClient.swift:592 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Sending message after receive handler is armed [requestId: 21A8AF6B-99ED-4CAC-86DE-7F30B19154C3]
[2025-09-09 22:34:22.061] [KanataUDPClient.swift:553 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Arming receive handler BEFORE send to prevent race condition [requestId: FC0825E2-B5CF-4651-8A89-82044F68FF35]
[2025-09-09 22:34:22.061] [KanataUDPClient.swift:553 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Arming receive handler BEFORE send to prevent race condition [requestId: 89A1D2F9-FE7D-4114-937C-547EA3AEA9AB]
[2025-09-09 22:34:22.061] [KanataUDPClient.swift:607 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] ✅ Message sent from local endpoint: 127.0.0.1:58962 [requestId: 21A8AF6B-99ED-4CAC-86DE-7F30B19154C3]
[2025-09-09 22:34:22.061] [KanataUDPClient.swift:553 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Arming receive handler BEFORE send to prevent race condition [requestId: 62E55673-C1F3-419A-8D7A-6B330AF1F8E8]
[2025-09-09 22:34:22.061] [KanataUDPClient.swift:611 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] ✅ Message sent - receive handler already armed [requestId: 21A8AF6B-99ED-4CAC-86DE-7F30B19154C3]
[2025-09-09 22:34:22.061] [KanataUDPClient.swift:607 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] ✅ Message sent from local endpoint: 127.0.0.1:50389 [requestId: 68ECC0EF-5544-4046-AFB8-92B8A6098880]
[2025-09-09 22:34:22.061] [KanataUDPClient.swift:607 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] ✅ Message sent from local endpoint: 127.0.0.1:54071 [requestId: 7E4B438E-6F8F-492A-8E1A-94B5913A9A41]
[2025-09-09 22:34:22.062] [KanataUDPClient.swift:611 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] ✅ Message sent - receive handler already armed [requestId: 68ECC0EF-5544-4046-AFB8-92B8A6098880]
[2025-09-09 22:34:22.062] [KanataUDPClient.swift:592 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Sending message after receive handler is armed [requestId: 62E55673-C1F3-419A-8D7A-6B330AF1F8E8]
[2025-09-09 22:34:22.061] [KanataUDPClient.swift:553 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Arming receive handler BEFORE send to prevent race condition [requestId: A0531F31-4F8C-4A9A-8054-8E4FF0192511]
[2025-09-09 22:34:22.062] [KanataUDPClient.swift:592 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Sending message after receive handler is armed [requestId: A0531F31-4F8C-4A9A-8054-8E4FF0192511]
[2025-09-09 22:34:22.061] [KanataUDPClient.swift:592 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Sending message after receive handler is armed [requestId: 89A1D2F9-FE7D-4114-937C-547EA3AEA9AB]
[2025-09-09 22:34:22.061] [KanataUDPClient.swift:592 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Sending message after receive handler is armed [requestId: FC0825E2-B5CF-4651-8A89-82044F68FF35]
[2025-09-09 22:34:22.062] [KanataUDPClient.swift:607 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] ✅ Message sent from local endpoint: 127.0.0.1:54266 [requestId: 62E55673-C1F3-419A-8D7A-6B330AF1F8E8]
[2025-09-09 22:34:22.062] [KanataUDPClient.swift:611 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] ✅ Message sent - receive handler already armed [requestId: 7E4B438E-6F8F-492A-8E1A-94B5913A9A41]
[2025-09-09 22:34:22.062] [KanataUDPClient.swift:611 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] ✅ Message sent - receive handler already armed [requestId: 62E55673-C1F3-419A-8D7A-6B330AF1F8E8]
[2025-09-09 22:34:22.061] [KanataUDPClient.swift:607 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] ✅ Message sent from local endpoint: 127.0.0.1:57276 [requestId: 771CF257-BA7A-49EE-9831-B5516E051BC2]
[2025-09-09 22:34:22.062] [KanataUDPClient.swift:607 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] ✅ Message sent from local endpoint: 127.0.0.1:62392 [requestId: A0531F31-4F8C-4A9A-8054-8E4FF0192511]
[2025-09-09 22:34:22.061] [KanataUDPClient.swift:553 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Arming receive handler BEFORE send to prevent race condition [requestId: 87684BE5-59F5-4EBA-8CBC-D58A84D69F6B]
[2025-09-09 22:34:22.062] [KanataUDPClient.swift:607 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] ✅ Message sent from local endpoint: 127.0.0.1:61479 [requestId: FC0825E2-B5CF-4651-8A89-82044F68FF35]
[2025-09-09 22:34:22.061] [KanataUDPClient.swift:553 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Arming receive handler BEFORE send to prevent race condition [requestId: E43D639C-49FA-4023-954C-1B815DA32C45]
[2025-09-09 22:34:22.062] [KanataUDPClient.swift:592 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Sending message after receive handler is armed [requestId: 87684BE5-59F5-4EBA-8CBC-D58A84D69F6B]
[2025-09-09 22:34:22.062] [KanataUDPClient.swift:607 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] ✅ Message sent from local endpoint: 127.0.0.1:54948 [requestId: 89A1D2F9-FE7D-4114-937C-547EA3AEA9AB]
[2025-09-09 22:34:22.062] [KanataUDPClient.swift:592 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Sending message after receive handler is armed [requestId: E43D639C-49FA-4023-954C-1B815DA32C45]
[2025-09-09 22:34:22.062] [KanataUDPClient.swift:611 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] ✅ Message sent - receive handler already armed [requestId: 89A1D2F9-FE7D-4114-937C-547EA3AEA9AB]
[2025-09-09 22:34:22.062] [KanataUDPClient.swift:611 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] ✅ Message sent - receive handler already armed [requestId: FC0825E2-B5CF-4651-8A89-82044F68FF35]
[2025-09-09 22:34:22.062] [KanataUDPClient.swift:611 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] ✅ Message sent - receive handler already armed [requestId: A0531F31-4F8C-4A9A-8054-8E4FF0192511]
[2025-09-09 22:34:22.062] [KanataUDPClient.swift:607 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] ✅ Message sent from local endpoint: 127.0.0.1:60620 [requestId: 87684BE5-59F5-4EBA-8CBC-D58A84D69F6B]
[2025-09-09 22:34:22.062] [KanataUDPClient.swift:611 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] ✅ Message sent - receive handler already armed [requestId: 87684BE5-59F5-4EBA-8CBC-D58A84D69F6B]
[2025-09-09 22:34:22.062] [KanataUDPClient.swift:607 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] ✅ Message sent from local endpoint: 127.0.0.1:56908 [requestId: E43D639C-49FA-4023-954C-1B815DA32C45]
[2025-09-09 22:34:22.062] [KanataUDPClient.swift:611 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] ✅ Message sent - receive handler already armed [requestId: 771CF257-BA7A-49EE-9831-B5516E051BC2]
[2025-09-09 22:34:22.062] [KanataUDPClient.swift:611 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] ✅ Message sent - receive handler already armed [requestId: E43D639C-49FA-4023-954C-1B815DA32C45]
[2025-09-09 22:34:22.062] [KanataUDPClient.swift:573 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] ✅ Received response: 15 bytes [requestId: 771CF257-BA7A-49EE-9831-B5516E051BC2]
[2025-09-09 22:34:22.062] [KanataUDPClient.swift:575 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Response context: Network.NWConnection.ContentContext [requestId: 771CF257-BA7A-49EE-9831-B5516E051BC2]
[2025-09-09 22:34:22.062] [KanataUDPClient.swift:573 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] ✅ Received response: 15 bytes [requestId: 68ECC0EF-5544-4046-AFB8-92B8A6098880]
[2025-09-09 22:34:22.062] [KanataUDPClient.swift:575 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Response context: Network.NWConnection.ContentContext [requestId: 68ECC0EF-5544-4046-AFB8-92B8A6098880]
[2025-09-09 22:34:22.062] [KanataUDPClient.swift:212 checkServerStatus(authToken:)] 🌐 [UDP] Server response: "AuthRequired"

[2025-09-09 22:34:22.062] [KanataUDPClient.swift:212 checkServerStatus(authToken:)] 🌐 [UDP] Server response: "AuthRequired"

[2025-09-09 22:34:22.062] [KanataUDPClient.swift:216 checkServerStatus(authToken:)] ✅ [UDP] Server is responding (auth required)
[2025-09-09 22:34:22.062] [KanataUDPClient.swift:216 checkServerStatus(authToken:)] ✅ [UDP] Server is responding (auth required)
[2025-09-09 22:34:22.062] [KanataUDPClient.swift:573 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] ✅ Received response: 15 bytes [requestId: 21A8AF6B-99ED-4CAC-86DE-7F30B19154C3]
[2025-09-09 22:34:22.062] [KanataUDPClient.swift:573 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] ✅ Received response: 15 bytes [requestId: 7E4B438E-6F8F-492A-8E1A-94B5913A9A41]
[2025-09-09 22:34:22.062] [KanataUDPClient.swift:575 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Response context: Network.NWConnection.ContentContext [requestId: 21A8AF6B-99ED-4CAC-86DE-7F30B19154C3]
[2025-09-09 22:34:22.062] [KanataUDPClient.swift:575 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Response context: Network.NWConnection.ContentContext [requestId: 7E4B438E-6F8F-492A-8E1A-94B5913A9A41]
[2025-09-09 22:34:22.062] [KanataUDPClient.swift:212 checkServerStatus(authToken:)] 🌐 [UDP] Server response: "AuthRequired"

[2025-09-09 22:34:22.062] [KanataUDPClient.swift:212 checkServerStatus(authToken:)] 🌐 [UDP] Server response: "AuthRequired"

[2025-09-09 22:34:22.062] [KanataUDPClient.swift:216 checkServerStatus(authToken:)] ✅ [UDP] Server is responding (auth required)
[2025-09-09 22:34:22.062] [KanataUDPClient.swift:216 checkServerStatus(authToken:)] ✅ [UDP] Server is responding (auth required)
[2025-09-09 22:34:22.062] [KanataUDPClient.swift:120 authenticate(token:clientName:)] 🔐 [UDP] Attempting authentication
[2025-09-09 22:34:22.062] [KanataUDPClient.swift:120 authenticate(token:clientName:)] 🔐 [UDP] Attempting authentication
[2025-09-09 22:34:22.062] [KanataUDPClient.swift:487 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Starting request 805ACA17-C275-4A8A-9B40-F136B85E5ED9 to 127.0.0.1:37001
[2025-09-09 22:34:22.062] [KanataUDPClient.swift:487 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Starting request 6E26F842-90AF-4127-B437-DFB50FD25A55 to 127.0.0.1:37001
[2025-09-09 22:34:22.062] [KanataUDPClient.swift:511 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Sending message to 127.0.0.1:37001 (96 bytes) [requestId: 805ACA17-C275-4A8A-9B40-F136B85E5ED9]
[2025-09-09 22:34:22.062] [KanataUDPClient.swift:511 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Sending message to 127.0.0.1:37001 (96 bytes) [requestId: 6E26F842-90AF-4127-B437-DFB50FD25A55]
[2025-09-09 22:34:22.062] [KanataUDPClient.swift:573 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] ✅ Received response: 15 bytes [requestId: 62E55673-C1F3-419A-8D7A-6B330AF1F8E8]
[2025-09-09 22:34:22.062] [KanataUDPClient.swift:514 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Message content: {"Authenticate":{"client_name":"KeyPath","token":"***"}} [requestId: 805ACA17-C275-4A8A-9B40-F136B85E5ED9]
[2025-09-09 22:34:22.062] [KanataUDPClient.swift:120 authenticate(token:clientName:)] 🔐 [UDP] Attempting authentication
[2025-09-09 22:34:22.062] [KanataUDPClient.swift:514 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Message content: {"Authenticate":{"token":"***","client_name":"KeyPath"}} [requestId: 6E26F842-90AF-4127-B437-DFB50FD25A55]
[2025-09-09 22:34:22.062] [KanataUDPClient.swift:487 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Starting request F19BB590-C591-4412-AF2E-CDED7709AD84 to 127.0.0.1:37001
[2025-09-09 22:34:22.062] [KanataUDPClient.swift:120 authenticate(token:clientName:)] 🔐 [UDP] Attempting authentication
[2025-09-09 22:34:22.062] [KanataUDPClient.swift:511 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Sending message to 127.0.0.1:37001 (96 bytes) [requestId: F19BB590-C591-4412-AF2E-CDED7709AD84]
[2025-09-09 22:34:22.062] [KanataUDPClient.swift:487 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Starting request 7B8F3C60-4795-45B3-A852-48DD0BB68D95 to 127.0.0.1:37001
[2025-09-09 22:34:22.062] [KanataUDPClient.swift:511 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Sending message to 127.0.0.1:37001 (96 bytes) [requestId: 7B8F3C60-4795-45B3-A852-48DD0BB68D95]
[2025-09-09 22:34:22.062] [KanataUDPClient.swift:573 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] ✅ Received response: 15 bytes [requestId: A0531F31-4F8C-4A9A-8054-8E4FF0192511]
[2025-09-09 22:34:22.062] [KanataUDPClient.swift:575 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Response context: Network.NWConnection.ContentContext [requestId: 62E55673-C1F3-419A-8D7A-6B330AF1F8E8]
[2025-09-09 22:34:22.062] [KanataUDPClient.swift:514 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Message content: {"Authenticate":{"token":"***","client_name":"KeyPath"}} [requestId: F19BB590-C591-4412-AF2E-CDED7709AD84]
[2025-09-09 22:34:22.062] [KanataUDPClient.swift:514 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Message content: {"Authenticate":{"token":"***","client_name":"KeyPath"}} [requestId: 7B8F3C60-4795-45B3-A852-48DD0BB68D95]
[2025-09-09 22:34:22.062] [KanataUDPClient.swift:573 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] ✅ Received response: 15 bytes [requestId: 89A1D2F9-FE7D-4114-937C-547EA3AEA9AB]
[2025-09-09 22:34:22.062] [KanataUDPClient.swift:546 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Local endpoint: 127.0.0.1:57276 [requestId: 805ACA17-C275-4A8A-9B40-F136B85E5ED9]
[2025-09-09 22:34:22.062] [KanataUDPClient.swift:546 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Local endpoint: 127.0.0.1:54071 [requestId: F19BB590-C591-4412-AF2E-CDED7709AD84]
[2025-09-09 22:34:22.062] [KanataUDPClient.swift:546 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Local endpoint: 127.0.0.1:50389 [requestId: 6E26F842-90AF-4127-B437-DFB50FD25A55]
[2025-09-09 22:34:22.062] [KanataUDPClient.swift:546 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Local endpoint: 127.0.0.1:58962 [requestId: 7B8F3C60-4795-45B3-A852-48DD0BB68D95]
[2025-09-09 22:34:22.062] [KanataUDPClient.swift:553 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Arming receive handler BEFORE send to prevent race condition [requestId: 805ACA17-C275-4A8A-9B40-F136B85E5ED9]
[2025-09-09 22:34:22.062] [KanataUDPClient.swift:575 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Response context: Network.NWConnection.ContentContext [requestId: 89A1D2F9-FE7D-4114-937C-547EA3AEA9AB]
[2025-09-09 22:34:22.062] [KanataUDPClient.swift:573 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] ✅ Received response: 15 bytes [requestId: FC0825E2-B5CF-4651-8A89-82044F68FF35]
[2025-09-09 22:34:22.062] [KanataUDPClient.swift:553 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Arming receive handler BEFORE send to prevent race condition [requestId: 6E26F842-90AF-4127-B437-DFB50FD25A55]
[2025-09-09 22:34:22.062] [KanataUDPClient.swift:553 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Arming receive handler BEFORE send to prevent race condition [requestId: F19BB590-C591-4412-AF2E-CDED7709AD84]
[2025-09-09 22:34:22.062] [KanataUDPClient.swift:212 checkServerStatus(authToken:)] 🌐 [UDP] Server response: "AuthRequired"

[2025-09-09 22:34:22.062] [KanataUDPClient.swift:592 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Sending message after receive handler is armed [requestId: 805ACA17-C275-4A8A-9B40-F136B85E5ED9]
[2025-09-09 22:34:22.062] [KanataUDPClient.swift:216 checkServerStatus(authToken:)] ✅ [UDP] Server is responding (auth required)
[2025-09-09 22:34:22.062] [KanataUDPClient.swift:575 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Response context: Network.NWConnection.ContentContext [requestId: FC0825E2-B5CF-4651-8A89-82044F68FF35]
[2025-09-09 22:34:22.062] [KanataUDPClient.swift:212 checkServerStatus(authToken:)] 🌐 [UDP] Server response: "AuthRequired"

[2025-09-09 22:34:22.062] [KanataUDPClient.swift:592 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Sending message after receive handler is armed [requestId: 6E26F842-90AF-4127-B437-DFB50FD25A55]
[2025-09-09 22:34:22.062] [KanataUDPClient.swift:216 checkServerStatus(authToken:)] ✅ [UDP] Server is responding (auth required)
[2025-09-09 22:34:22.062] [KanataUDPClient.swift:607 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] ✅ Message sent from local endpoint: 127.0.0.1:57276 [requestId: 805ACA17-C275-4A8A-9B40-F136B85E5ED9]
[2025-09-09 22:34:22.062] [KanataUDPClient.swift:611 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] ✅ Message sent - receive handler already armed [requestId: 805ACA17-C275-4A8A-9B40-F136B85E5ED9]
[2025-09-09 22:34:22.062] [KanataUDPClient.swift:553 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Arming receive handler BEFORE send to prevent race condition [requestId: 7B8F3C60-4795-45B3-A852-48DD0BB68D95]
[2025-09-09 22:34:22.062] [KanataUDPClient.swift:573 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] ✅ Received response: 15 bytes [requestId: 87684BE5-59F5-4EBA-8CBC-D58A84D69F6B]
[2025-09-09 22:34:22.062] [KanataUDPClient.swift:575 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Response context: Network.NWConnection.ContentContext [requestId: A0531F31-4F8C-4A9A-8054-8E4FF0192511]
[2025-09-09 22:34:22.062] [KanataUDPClient.swift:592 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Sending message after receive handler is armed [requestId: F19BB590-C591-4412-AF2E-CDED7709AD84]
[2025-09-09 22:34:22.062] [KanataUDPClient.swift:120 authenticate(token:clientName:)] 🔐 [UDP] Attempting authentication
[2025-09-09 22:34:22.062] [KanataUDPClient.swift:212 checkServerStatus(authToken:)] 🌐 [UDP] Server response: "AuthRequired"

[2025-09-09 22:34:22.062] [KanataUDPClient.swift:592 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Sending message after receive handler is armed [requestId: 7B8F3C60-4795-45B3-A852-48DD0BB68D95]
[2025-09-09 22:34:22.062] [KanataUDPClient.swift:575 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Response context: Network.NWConnection.ContentContext [requestId: 87684BE5-59F5-4EBA-8CBC-D58A84D69F6B]
[2025-09-09 22:34:22.062] [KanataUDPClient.swift:487 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Starting request 78AEFBA5-9DE9-4CE9-87B3-4D2EB1E67473 to 127.0.0.1:37001
[2025-09-09 22:34:22.062] [KanataUDPClient.swift:607 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] ✅ Message sent from local endpoint: 127.0.0.1:50389 [requestId: 6E26F842-90AF-4127-B437-DFB50FD25A55]
[2025-09-09 22:34:22.062] [KanataUDPClient.swift:511 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Sending message to 127.0.0.1:37001 (96 bytes) [requestId: 78AEFBA5-9DE9-4CE9-87B3-4D2EB1E67473]
[2025-09-09 22:34:22.062] [KanataUDPClient.swift:216 checkServerStatus(authToken:)] ✅ [UDP] Server is responding (auth required)
[2025-09-09 22:34:22.063] [KanataUDPClient.swift:573 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] ✅ Received response: 15 bytes [requestId: E43D639C-49FA-4023-954C-1B815DA32C45]
[2025-09-09 22:34:22.063] [KanataUDPClient.swift:575 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Response context: Network.NWConnection.ContentContext [requestId: E43D639C-49FA-4023-954C-1B815DA32C45]
[2025-09-09 22:34:22.063] [KanataUDPClient.swift:611 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] ✅ Message sent - receive handler already armed [requestId: 6E26F842-90AF-4127-B437-DFB50FD25A55]
[2025-09-09 22:34:22.062] [KanataUDPClient.swift:607 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] ✅ Message sent from local endpoint: 127.0.0.1:54071 [requestId: F19BB590-C591-4412-AF2E-CDED7709AD84]
[2025-09-09 22:34:22.063] [KanataUDPClient.swift:607 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] ✅ Message sent from local endpoint: 127.0.0.1:58962 [requestId: 7B8F3C60-4795-45B3-A852-48DD0BB68D95]
[2025-09-09 22:34:22.063] [KanataUDPClient.swift:611 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] ✅ Message sent - receive handler already armed [requestId: F19BB590-C591-4412-AF2E-CDED7709AD84]
[2025-09-09 22:34:22.062] [KanataUDPClient.swift:212 checkServerStatus(authToken:)] 🌐 [UDP] Server response: "AuthRequired"

[2025-09-09 22:34:22.062] [KanataUDPClient.swift:212 checkServerStatus(authToken:)] 🌐 [UDP] Server response: "AuthRequired"

[2025-09-09 22:34:22.063] [KanataUDPClient.swift:216 checkServerStatus(authToken:)] ✅ [UDP] Server is responding (auth required)
[2025-09-09 22:34:22.063] [KanataUDPClient.swift:212 checkServerStatus(authToken:)] 🌐 [UDP] Server response: "AuthRequired"

[2025-09-09 22:34:22.063] [KanataUDPClient.swift:216 checkServerStatus(authToken:)] ✅ [UDP] Server is responding (auth required)
[2025-09-09 22:34:22.062] [KanataUDPClient.swift:120 authenticate(token:clientName:)] 🔐 [UDP] Attempting authentication
[2025-09-09 22:34:22.063] [KanataUDPClient.swift:611 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] ✅ Message sent - receive handler already armed [requestId: 7B8F3C60-4795-45B3-A852-48DD0BB68D95]
[2025-09-09 22:34:22.063] [KanataUDPClient.swift:487 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Starting request 86712EA1-B7DF-4144-811D-D31FDD737E91 to 127.0.0.1:37001
[2025-09-09 22:34:22.063] [KanataUDPClient.swift:216 checkServerStatus(authToken:)] ✅ [UDP] Server is responding (auth required)
[2025-09-09 22:34:22.063] [KanataUDPClient.swift:514 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Message content: {"Authenticate":{"client_name":"KeyPath","token":"***"}} [requestId: 78AEFBA5-9DE9-4CE9-87B3-4D2EB1E67473]
[2025-09-09 22:34:22.063] [KanataUDPClient.swift:511 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Sending message to 127.0.0.1:37001 (96 bytes) [requestId: 86712EA1-B7DF-4144-811D-D31FDD737E91]
[2025-09-09 22:34:22.063] [KanataUDPClient.swift:120 authenticate(token:clientName:)] 🔐 [UDP] Attempting authentication
[2025-09-09 22:34:22.063] [KanataUDPClient.swift:120 authenticate(token:clientName:)] 🔐 [UDP] Attempting authentication
[2025-09-09 22:34:22.063] [KanataUDPClient.swift:487 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Starting request 125364D8-2337-4741-B532-67981C8D73F6 to 127.0.0.1:37001
[2025-09-09 22:34:22.063] [KanataUDPClient.swift:487 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Starting request 74447DA8-DB9A-4234-97D9-6AF3447083C0 to 127.0.0.1:37001
[2025-09-09 22:34:22.063] [KanataUDPClient.swift:511 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Sending message to 127.0.0.1:37001 (96 bytes) [requestId: 125364D8-2337-4741-B532-67981C8D73F6]
[2025-09-09 22:34:22.063] [KanataUDPClient.swift:511 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Sending message to 127.0.0.1:37001 (96 bytes) [requestId: 74447DA8-DB9A-4234-97D9-6AF3447083C0]
[2025-09-09 22:34:22.063] [KanataUDPClient.swift:514 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Message content: {"Authenticate":{"client_name":"KeyPath","token":"***"}} [requestId: 86712EA1-B7DF-4144-811D-D31FDD737E91]
[2025-09-09 22:34:22.063] [KanataUDPClient.swift:514 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Message content: {"Authenticate":{"client_name":"KeyPath","token":"***"}} [requestId: 125364D8-2337-4741-B532-67981C8D73F6]
[2025-09-09 22:34:22.063] [KanataUDPClient.swift:120 authenticate(token:clientName:)] 🔐 [UDP] Attempting authentication
[2025-09-09 22:34:22.063] [KanataUDPClient.swift:546 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Local endpoint: 127.0.0.1:54266 [requestId: 78AEFBA5-9DE9-4CE9-87B3-4D2EB1E67473]
[2025-09-09 22:34:22.063] [KanataUDPClient.swift:573 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] ✅ Received response: 90 bytes [requestId: 805ACA17-C275-4A8A-9B40-F136B85E5ED9]
[2025-09-09 22:34:22.063] [KanataUDPClient.swift:553 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Arming receive handler BEFORE send to prevent race condition [requestId: 78AEFBA5-9DE9-4CE9-87B3-4D2EB1E67473]
[2025-09-09 22:34:22.063] [KanataUDPClient.swift:575 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Response context: Network.NWConnection.ContentContext [requestId: 805ACA17-C275-4A8A-9B40-F136B85E5ED9]
[2025-09-09 22:34:22.063] [KanataUDPClient.swift:546 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Local endpoint: 127.0.0.1:54948 [requestId: 86712EA1-B7DF-4144-811D-D31FDD737E91]
[2025-09-09 22:34:22.063] [KanataUDPClient.swift:487 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Starting request 20A2BBE0-4C31-4CDE-96DF-1B94E4C08171 to 127.0.0.1:37001
[2025-09-09 22:34:22.063] [KanataUDPClient.swift:553 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Arming receive handler BEFORE send to prevent race condition [requestId: 86712EA1-B7DF-4144-811D-D31FDD737E91]
[2025-09-09 22:34:22.063] [KanataUDPClient.swift:511 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Sending message to 127.0.0.1:37001 (96 bytes) [requestId: 20A2BBE0-4C31-4CDE-96DF-1B94E4C08171]
[2025-09-09 22:34:22.063] [KanataUDPClient.swift:592 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Sending message after receive handler is armed [requestId: 86712EA1-B7DF-4144-811D-D31FDD737E91]
[2025-09-09 22:34:22.063] [KanataUDPClient.swift:514 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Message content: {"Authenticate":{"client_name":"KeyPath","token":"***"}} [requestId: 20A2BBE0-4C31-4CDE-96DF-1B94E4C08171]
[2025-09-09 22:34:22.063] [KanataUDPClient.swift:546 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Local endpoint: 127.0.0.1:56908 [requestId: 20A2BBE0-4C31-4CDE-96DF-1B94E4C08171]
[2025-09-09 22:34:22.063] [KanataUDPClient.swift:120 authenticate(token:clientName:)] 🔐 [UDP] Attempting authentication
[2025-09-09 22:34:22.063] [KanataUDPClient.swift:607 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] ✅ Message sent from local endpoint: 127.0.0.1:54948 [requestId: 86712EA1-B7DF-4144-811D-D31FDD737E91]
[2025-09-09 22:34:22.063] [KanataUDPClient.swift:487 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Starting request 9B38C17A-56D8-4C82-BD7A-7FF9AB0B73FC to 127.0.0.1:37001
[2025-09-09 22:34:22.063] [KanataUDPClient.swift:611 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] ✅ Message sent - receive handler already armed [requestId: 86712EA1-B7DF-4144-811D-D31FDD737E91]
[2025-09-09 22:34:22.063] [KanataUDPClient.swift:553 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Arming receive handler BEFORE send to prevent race condition [requestId: 20A2BBE0-4C31-4CDE-96DF-1B94E4C08171]
[2025-09-09 22:34:22.063] [KanataUDPClient.swift:511 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Sending message to 127.0.0.1:37001 (96 bytes) [requestId: 9B38C17A-56D8-4C82-BD7A-7FF9AB0B73FC]
[2025-09-09 22:34:22.063] [KanataUDPClient.swift:573 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] ✅ Received response: 90 bytes [requestId: 6E26F842-90AF-4127-B437-DFB50FD25A55]
[2025-09-09 22:34:22.063] [KanataUDPClient.swift:575 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Response context: Network.NWConnection.ContentContext [requestId: 6E26F842-90AF-4127-B437-DFB50FD25A55]
[2025-09-09 22:34:22.063] [KanataUDPClient.swift:546 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Local endpoint: 127.0.0.1:61479 [requestId: 125364D8-2337-4741-B532-67981C8D73F6]
[2025-09-09 22:34:22.063] [KanataUDPClient.swift:592 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Sending message after receive handler is armed [requestId: 78AEFBA5-9DE9-4CE9-87B3-4D2EB1E67473]
[2025-09-09 22:34:22.063] [KanataUDPClient.swift:140 authenticate(token:clientName:)] ✅ [UDP] Authentication successful
[2025-09-09 22:34:22.063] [KanataUDPClient.swift:514 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Message content: {"Authenticate":{"client_name":"KeyPath","token":"***"}} [requestId: 9B38C17A-56D8-4C82-BD7A-7FF9AB0B73FC]
[2025-09-09 22:34:22.063] [KanataUDPClient.swift:141 authenticate(token:clientName:)] 🔐 [UDP] Session established (expires in 1800s)
[2025-09-09 22:34:22.063] [KanataUDPClient.swift:592 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Sending message after receive handler is armed [requestId: 20A2BBE0-4C31-4CDE-96DF-1B94E4C08171]
[2025-09-09 22:34:22.063] [KanataUDPClient.swift:514 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Message content: {"Authenticate":{"client_name":"KeyPath","token":"***"}} [requestId: 74447DA8-DB9A-4234-97D9-6AF3447083C0]
[2025-09-09 22:34:22.063] [KanataManager.swift:3379 validateGeneratedConfig(_:)] 📡 [Validation] UDP server is AVAILABLE, using UDP validation
[2025-09-09 22:34:22.063] [KanataUDPClient.swift:546 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Local endpoint: 127.0.0.1:60620 [requestId: 74447DA8-DB9A-4234-97D9-6AF3447083C0]
[2025-09-09 22:34:22.063] [KanataUDPClient.swift:553 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Arming receive handler BEFORE send to prevent race condition [requestId: 125364D8-2337-4741-B532-67981C8D73F6]
[2025-09-09 22:34:22.063] [KanataUDPClient.swift:553 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Arming receive handler BEFORE send to prevent race condition [requestId: 74447DA8-DB9A-4234-97D9-6AF3447083C0]
[2025-09-09 22:34:22.063] [KanataUDPClient.swift:592 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Sending message after receive handler is armed [requestId: 74447DA8-DB9A-4234-97D9-6AF3447083C0]
[2025-09-09 22:34:22.063] [KanataUDPClient.swift:546 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Local endpoint: 127.0.0.1:62392 [requestId: 9B38C17A-56D8-4C82-BD7A-7FF9AB0B73FC]
[2025-09-09 22:34:22.063] [KanataUDPClient.swift:140 authenticate(token:clientName:)] ✅ [UDP] Authentication successful
[2025-09-09 22:34:22.063] [KanataUDPClient.swift:607 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] ✅ Message sent from local endpoint: 127.0.0.1:54266 [requestId: 78AEFBA5-9DE9-4CE9-87B3-4D2EB1E67473]
[2025-09-09 22:34:22.063] [KanataUDPClient.swift:592 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Sending message after receive handler is armed [requestId: 125364D8-2337-4741-B532-67981C8D73F6]
[2025-09-09 22:34:22.063] [KanataUDPClient.swift:607 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] ✅ Message sent from local endpoint: 127.0.0.1:60620 [requestId: 74447DA8-DB9A-4234-97D9-6AF3447083C0]
[2025-09-09 22:34:22.063] [KanataUDPClient.swift:487 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Starting request 7746F75E-0D9A-4A4C-8BB9-964F5BB6D751 to 127.0.0.1:37001
[2025-09-09 22:34:22.063] [KanataUDPClient.swift:553 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Arming receive handler BEFORE send to prevent race condition [requestId: 9B38C17A-56D8-4C82-BD7A-7FF9AB0B73FC]
[2025-09-09 22:34:22.063] [KanataUDPClient.swift:511 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Sending message to 127.0.0.1:37001 (312 bytes) [requestId: 7746F75E-0D9A-4A4C-8BB9-964F5BB6D751]
[2025-09-09 22:34:22.063] [KanataUDPClient.swift:592 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Sending message after receive handler is armed [requestId: 9B38C17A-56D8-4C82-BD7A-7FF9AB0B73FC]
[2025-09-09 22:34:22.063] [KanataUDPClient.swift:607 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] ✅ Message sent from local endpoint: 127.0.0.1:61479 [requestId: 125364D8-2337-4741-B532-67981C8D73F6]
[2025-09-09 22:34:22.063] [KanataUDPClient.swift:573 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] ✅ Received response: 90 bytes [requestId: 7B8F3C60-4795-45B3-A852-48DD0BB68D95]
[2025-09-09 22:34:22.063] [KanataUDPClient.swift:514 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Message content: {"ValidateConfig":{"config_content":";; Generated by KeyPath\n;; 1 key mapping(s) configured\n;;\n;; SAFETY FEATURES:\n;; - process-unmapped-keys no: Only process explicitly mapped keys\n\n(defcfg\n  process-unmapped-keys no\n)\n\n(defsrc\n  caps\n)\n\n(deflayer base\n  esc\n)","session_id":"***"}} [requestId: 7746F75E-0D9A-4A4C-8BB9-964F5BB6D751]
[2025-09-09 22:34:22.063] [KanataUDPClient.swift:611 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] ✅ Message sent - receive handler already armed [requestId: 74447DA8-DB9A-4234-97D9-6AF3447083C0]
[2025-09-09 22:34:22.063] [KanataUDPClient.swift:575 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Response context: Network.NWConnection.ContentContext [requestId: 7B8F3C60-4795-45B3-A852-48DD0BB68D95]
[2025-09-09 22:34:22.063] [KanataUDPClient.swift:607 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] ✅ Message sent from local endpoint: 127.0.0.1:62392 [requestId: 9B38C17A-56D8-4C82-BD7A-7FF9AB0B73FC]
[2025-09-09 22:34:22.063] [KanataUDPClient.swift:611 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] ✅ Message sent - receive handler already armed [requestId: 9B38C17A-56D8-4C82-BD7A-7FF9AB0B73FC]
[2025-09-09 22:34:22.063] [KanataUDPClient.swift:141 authenticate(token:clientName:)] 🔐 [UDP] Session established (expires in 1800s)
[2025-09-09 22:34:22.063] [KanataUDPClient.swift:546 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Local endpoint: 127.0.0.1:57276 [requestId: 7746F75E-0D9A-4A4C-8BB9-964F5BB6D751]
[2025-09-09 22:34:22.063] [KanataUDPClient.swift:611 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] ✅ Message sent - receive handler already armed [requestId: 125364D8-2337-4741-B532-67981C8D73F6]
[2025-09-09 22:34:22.063] [KanataManager.swift:3379 validateGeneratedConfig(_:)] 📡 [Validation] UDP server is AVAILABLE, using UDP validation
[2025-09-09 22:34:22.063] [KanataUDPClient.swift:553 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Arming receive handler BEFORE send to prevent race condition [requestId: 7746F75E-0D9A-4A4C-8BB9-964F5BB6D751]
[2025-09-09 22:34:22.063] [KanataUDPClient.swift:592 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Sending message after receive handler is armed [requestId: 7746F75E-0D9A-4A4C-8BB9-964F5BB6D751]
[2025-09-09 22:34:22.063] [KanataUDPClient.swift:611 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] ✅ Message sent - receive handler already armed [requestId: 78AEFBA5-9DE9-4CE9-87B3-4D2EB1E67473]
[2025-09-09 22:34:22.063] [KanataUDPClient.swift:487 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Starting request 9F7F0531-7512-455A-A7E2-57A9F7534020 to 127.0.0.1:37001
[2025-09-09 22:34:22.063] [KanataUDPClient.swift:511 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Sending message to 127.0.0.1:37001 (312 bytes) [requestId: 9F7F0531-7512-455A-A7E2-57A9F7534020]
[2025-09-09 22:34:22.063] [KanataUDPClient.swift:573 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] ✅ Received response: 90 bytes [requestId: F19BB590-C591-4412-AF2E-CDED7709AD84]
[2025-09-09 22:34:22.063] [KanataUDPClient.swift:607 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] ✅ Message sent from local endpoint: 127.0.0.1:56908 [requestId: 20A2BBE0-4C31-4CDE-96DF-1B94E4C08171]
[2025-09-09 22:34:22.063] [KanataUDPClient.swift:607 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] ✅ Message sent from local endpoint: 127.0.0.1:57276 [requestId: 7746F75E-0D9A-4A4C-8BB9-964F5BB6D751]
[2025-09-09 22:34:22.063] [KanataUDPClient.swift:611 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] ✅ Message sent - receive handler already armed [requestId: 20A2BBE0-4C31-4CDE-96DF-1B94E4C08171]
[2025-09-09 22:34:22.063] [KanataUDPClient.swift:573 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] ✅ Received response: 90 bytes [requestId: 86712EA1-B7DF-4144-811D-D31FDD737E91]
[2025-09-09 22:34:22.063] [KanataUDPClient.swift:575 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Response context: Network.NWConnection.ContentContext [requestId: 86712EA1-B7DF-4144-811D-D31FDD737E91]
[2025-09-09 22:34:22.063] [KanataUDPClient.swift:611 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] ✅ Message sent - receive handler already armed [requestId: 7746F75E-0D9A-4A4C-8BB9-964F5BB6D751]
[2025-09-09 22:34:22.063] [KanataUDPClient.swift:575 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Response context: Network.NWConnection.ContentContext [requestId: F19BB590-C591-4412-AF2E-CDED7709AD84]
[2025-09-09 22:34:22.063] [KanataUDPClient.swift:140 authenticate(token:clientName:)] ✅ [UDP] Authentication successful
[2025-09-09 22:34:22.063] [KanataUDPClient.swift:514 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Message content: {"ValidateConfig":{"config_content":";; Generated by KeyPath\n;; 1 key mapping(s) configured\n;;\n;; SAFETY FEATURES:\n;; - process-unmapped-keys no: Only process explicitly mapped keys\n\n(defcfg\n  process-unmapped-keys no\n)\n\n(defsrc\n  caps\n)\n\n(deflayer base\n  esc\n)","session_id":"***"}} [requestId: 9F7F0531-7512-455A-A7E2-57A9F7534020]
[2025-09-09 22:34:22.063] [KanataUDPClient.swift:573 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] ✅ Received response: 90 bytes [requestId: 78AEFBA5-9DE9-4CE9-87B3-4D2EB1E67473]
[2025-09-09 22:34:22.063] [KanataUDPClient.swift:141 authenticate(token:clientName:)] 🔐 [UDP] Session established (expires in 1800s)
[2025-09-09 22:34:22.063] [KanataUDPClient.swift:575 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Response context: Network.NWConnection.ContentContext [requestId: 78AEFBA5-9DE9-4CE9-87B3-4D2EB1E67473]
[2025-09-09 22:34:22.063] [KanataUDPClient.swift:546 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Local endpoint: 127.0.0.1:50389 [requestId: 9F7F0531-7512-455A-A7E2-57A9F7534020]
[2025-09-09 22:34:22.063] [KanataUDPClient.swift:553 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Arming receive handler BEFORE send to prevent race condition [requestId: 9F7F0531-7512-455A-A7E2-57A9F7534020]
[2025-09-09 22:34:22.063] [KanataUDPClient.swift:592 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Sending message after receive handler is armed [requestId: 9F7F0531-7512-455A-A7E2-57A9F7534020]
[2025-09-09 22:34:22.063] [KanataManager.swift:3379 validateGeneratedConfig(_:)] 📡 [Validation] UDP server is AVAILABLE, using UDP validation
[2025-09-09 22:34:22.063] [KanataUDPClient.swift:140 authenticate(token:clientName:)] ✅ [UDP] Authentication successful
[2025-09-09 22:34:22.064] [KanataUDPClient.swift:141 authenticate(token:clientName:)] 🔐 [UDP] Session established (expires in 1800s)
[2025-09-09 22:34:22.064] [KanataUDPClient.swift:487 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Starting request 692554E0-F077-4A2A-BA1F-D4BC2533B440 to 127.0.0.1:37001
[2025-09-09 22:34:22.064] [KanataManager.swift:3379 validateGeneratedConfig(_:)] 📡 [Validation] UDP server is AVAILABLE, using UDP validation
[2025-09-09 22:34:22.064] [KanataUDPClient.swift:140 authenticate(token:clientName:)] ✅ [UDP] Authentication successful
[2025-09-09 22:34:22.064] [KanataUDPClient.swift:141 authenticate(token:clientName:)] 🔐 [UDP] Session established (expires in 1800s)
[2025-09-09 22:34:22.064] [KanataUDPClient.swift:607 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] ✅ Message sent from local endpoint: 127.0.0.1:50389 [requestId: 9F7F0531-7512-455A-A7E2-57A9F7534020]
[2025-09-09 22:34:22.064] [KanataUDPClient.swift:611 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] ✅ Message sent - receive handler already armed [requestId: 9F7F0531-7512-455A-A7E2-57A9F7534020]
[2025-09-09 22:34:22.064] [KanataUDPClient.swift:511 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Sending message to 127.0.0.1:37001 (312 bytes) [requestId: 692554E0-F077-4A2A-BA1F-D4BC2533B440]
[2025-09-09 22:34:22.064] [KanataManager.swift:3379 validateGeneratedConfig(_:)] 📡 [Validation] UDP server is AVAILABLE, using UDP validation
[2025-09-09 22:34:22.064] [KanataUDPClient.swift:487 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Starting request 9E592F8A-D523-4C57-8E2D-44B0C779AF1F to 127.0.0.1:37001
[2025-09-09 22:34:22.064] [KanataUDPClient.swift:511 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Sending message to 127.0.0.1:37001 (312 bytes) [requestId: 9E592F8A-D523-4C57-8E2D-44B0C779AF1F]
[2025-09-09 22:34:22.064] [KanataUDPClient.swift:514 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Message content: {"ValidateConfig":{"config_content":";; Generated by KeyPath\n;; 1 key mapping(s) configured\n;;\n;; SAFETY FEATURES:\n;; - process-unmapped-keys no: Only process explicitly mapped keys\n\n(defcfg\n  process-unmapped-keys no\n)\n\n(defsrc\n  caps\n)\n\n(deflayer base\n  esc\n)","session_id":"***"}} [requestId: 692554E0-F077-4A2A-BA1F-D4BC2533B440]
[2025-09-09 22:34:22.064] [KanataUDPClient.swift:514 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Message content: {"ValidateConfig":{"config_content":";; Generated by KeyPath\n;; 1 key mapping(s) configured\n;;\n;; SAFETY FEATURES:\n;; - process-unmapped-keys no: Only process explicitly mapped keys\n\n(defcfg\n  process-unmapped-keys no\n)\n\n(defsrc\n  caps\n)\n\n(deflayer base\n  esc\n)","session_id":"***"}} [requestId: 9E592F8A-D523-4C57-8E2D-44B0C779AF1F]
[2025-09-09 22:34:22.064] [KanataUDPClient.swift:140 authenticate(token:clientName:)] ✅ [UDP] Authentication successful
[2025-09-09 22:34:22.064] [KanataUDPClient.swift:141 authenticate(token:clientName:)] 🔐 [UDP] Session established (expires in 1800s)
[2025-09-09 22:34:22.064] [KanataUDPClient.swift:487 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Starting request 66CDD049-6E9B-4547-B4E5-F650FE945504 to 127.0.0.1:37001
[2025-09-09 22:34:22.064] [KanataUDPClient.swift:511 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Sending message to 127.0.0.1:37001 (312 bytes) [requestId: 66CDD049-6E9B-4547-B4E5-F650FE945504]
[2025-09-09 22:34:22.064] [KanataUDPClient.swift:546 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Local endpoint: 127.0.0.1:54948 [requestId: 9E592F8A-D523-4C57-8E2D-44B0C779AF1F]
[2025-09-09 22:34:22.064] [KanataUDPClient.swift:553 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Arming receive handler BEFORE send to prevent race condition [requestId: 9E592F8A-D523-4C57-8E2D-44B0C779AF1F]
[2025-09-09 22:34:22.064] [KanataManager.swift:3379 validateGeneratedConfig(_:)] 📡 [Validation] UDP server is AVAILABLE, using UDP validation
[2025-09-09 22:34:22.064] [KanataUDPClient.swift:592 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Sending message after receive handler is armed [requestId: 9E592F8A-D523-4C57-8E2D-44B0C779AF1F]
[2025-09-09 22:34:22.064] [KanataUDPClient.swift:546 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Local endpoint: 127.0.0.1:58962 [requestId: 692554E0-F077-4A2A-BA1F-D4BC2533B440]
[2025-09-09 22:34:22.064] [KanataUDPClient.swift:514 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Message content: {"ValidateConfig":{"config_content":";; Generated by KeyPath\n;; 1 key mapping(s) configured\n;;\n;; SAFETY FEATURES:\n;; - process-unmapped-keys no: Only process explicitly mapped keys\n\n(defcfg\n  process-unmapped-keys no\n)\n\n(defsrc\n  caps\n)\n\n(deflayer base\n  esc\n)","session_id":"***"}} [requestId: 66CDD049-6E9B-4547-B4E5-F650FE945504]
[2025-09-09 22:34:22.064] [KanataUDPClient.swift:553 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Arming receive handler BEFORE send to prevent race condition [requestId: 692554E0-F077-4A2A-BA1F-D4BC2533B440]
[2025-09-09 22:34:22.064] [KanataUDPClient.swift:487 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Starting request 12A9BBAF-7DEC-4061-B4AA-671BDB881034 to 127.0.0.1:37001
[2025-09-09 22:34:22.064] [KanataUDPClient.swift:546 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Local endpoint: 127.0.0.1:54071 [requestId: 66CDD049-6E9B-4547-B4E5-F650FE945504]
[2025-09-09 22:34:22.064] [KanataUDPClient.swift:553 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Arming receive handler BEFORE send to prevent race condition [requestId: 66CDD049-6E9B-4547-B4E5-F650FE945504]
[2025-09-09 22:34:22.064] [KanataUDPClient.swift:592 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Sending message after receive handler is armed [requestId: 692554E0-F077-4A2A-BA1F-D4BC2533B440]
[2025-09-09 22:34:22.064] [KanataUDPClient.swift:573 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] ✅ Received response: 90 bytes [requestId: 20A2BBE0-4C31-4CDE-96DF-1B94E4C08171]
[2025-09-09 22:34:22.064] [KanataUDPClient.swift:511 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Sending message to 127.0.0.1:37001 (312 bytes) [requestId: 12A9BBAF-7DEC-4061-B4AA-671BDB881034]
[2025-09-09 22:34:22.064] [KanataUDPClient.swift:592 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Sending message after receive handler is armed [requestId: 66CDD049-6E9B-4547-B4E5-F650FE945504]
[2025-09-09 22:34:22.064] [KanataUDPClient.swift:607 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] ✅ Message sent from local endpoint: 127.0.0.1:54948 [requestId: 9E592F8A-D523-4C57-8E2D-44B0C779AF1F]
[2025-09-09 22:34:22.064] [KanataUDPClient.swift:514 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Message content: {"ValidateConfig":{"config_content":";; Generated by KeyPath\n;; 1 key mapping(s) configured\n;;\n;; SAFETY FEATURES:\n;; - process-unmapped-keys no: Only process explicitly mapped keys\n\n(defcfg\n  process-unmapped-keys no\n)\n\n(defsrc\n  caps\n)\n\n(deflayer base\n  esc\n)","session_id":"***"}} [requestId: 12A9BBAF-7DEC-4061-B4AA-671BDB881034]
[2025-09-09 22:34:22.064] [KanataUDPClient.swift:607 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] ✅ Message sent from local endpoint: 127.0.0.1:58962 [requestId: 692554E0-F077-4A2A-BA1F-D4BC2533B440]
[2025-09-09 22:34:22.064] [KanataUDPClient.swift:607 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] ✅ Message sent from local endpoint: 127.0.0.1:54071 [requestId: 66CDD049-6E9B-4547-B4E5-F650FE945504]
[2025-09-09 22:34:22.064] [KanataUDPClient.swift:611 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] ✅ Message sent - receive handler already armed [requestId: 9E592F8A-D523-4C57-8E2D-44B0C779AF1F]
[2025-09-09 22:34:22.064] [KanataUDPClient.swift:611 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] ✅ Message sent - receive handler already armed [requestId: 66CDD049-6E9B-4547-B4E5-F650FE945504]
[2025-09-09 22:34:22.064] [KanataUDPClient.swift:575 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Response context: Network.NWConnection.ContentContext [requestId: 20A2BBE0-4C31-4CDE-96DF-1B94E4C08171]
[2025-09-09 22:34:22.064] [KanataUDPClient.swift:611 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] ✅ Message sent - receive handler already armed [requestId: 692554E0-F077-4A2A-BA1F-D4BC2533B440]
[2025-09-09 22:34:22.064] [KanataUDPClient.swift:546 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Local endpoint: 127.0.0.1:54266 [requestId: 12A9BBAF-7DEC-4061-B4AA-671BDB881034]
[2025-09-09 22:34:22.064] [KanataUDPClient.swift:553 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Arming receive handler BEFORE send to prevent race condition [requestId: 12A9BBAF-7DEC-4061-B4AA-671BDB881034]
[2025-09-09 22:34:22.064] [KanataUDPClient.swift:592 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Sending message after receive handler is armed [requestId: 12A9BBAF-7DEC-4061-B4AA-671BDB881034]
[2025-09-09 22:34:22.064] [KanataUDPClient.swift:573 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] ✅ Received response: 90 bytes [requestId: 74447DA8-DB9A-4234-97D9-6AF3447083C0]
[2025-09-09 22:34:22.064] [KanataUDPClient.swift:575 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Response context: Network.NWConnection.ContentContext [requestId: 74447DA8-DB9A-4234-97D9-6AF3447083C0]
[2025-09-09 22:34:22.064] [KanataUDPClient.swift:607 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] ✅ Message sent from local endpoint: 127.0.0.1:54266 [requestId: 12A9BBAF-7DEC-4061-B4AA-671BDB881034]
[2025-09-09 22:34:22.064] [KanataUDPClient.swift:140 authenticate(token:clientName:)] ✅ [UDP] Authentication successful
[2025-09-09 22:34:22.064] [KanataUDPClient.swift:611 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] ✅ Message sent - receive handler already armed [requestId: 12A9BBAF-7DEC-4061-B4AA-671BDB881034]
[2025-09-09 22:34:22.064] [KanataUDPClient.swift:141 authenticate(token:clientName:)] 🔐 [UDP] Session established (expires in 1800s)
[2025-09-09 22:34:22.064] [KanataManager.swift:3379 validateGeneratedConfig(_:)] 📡 [Validation] UDP server is AVAILABLE, using UDP validation
[2025-09-09 22:34:22.064] [KanataUDPClient.swift:487 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Starting request BF997A20-ECA1-4CCC-923C-3713E5756B31 to 127.0.0.1:37001
[2025-09-09 22:34:22.064] [KanataUDPClient.swift:511 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Sending message to 127.0.0.1:37001 (312 bytes) [requestId: BF997A20-ECA1-4CCC-923C-3713E5756B31]
[2025-09-09 22:34:22.064] [KanataUDPClient.swift:514 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Message content: {"ValidateConfig":{"config_content":";; Generated by KeyPath\n;; 1 key mapping(s) configured\n;;\n;; SAFETY FEATURES:\n;; - process-unmapped-keys no: Only process explicitly mapped keys\n\n(defcfg\n  process-unmapped-keys no\n)\n\n(defsrc\n  caps\n)\n\n(deflayer base\n  esc\n)","session_id":"***"}} [requestId: BF997A20-ECA1-4CCC-923C-3713E5756B31]
[2025-09-09 22:34:22.064] [KanataUDPClient.swift:546 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Local endpoint: 127.0.0.1:56908 [requestId: BF997A20-ECA1-4CCC-923C-3713E5756B31]
[2025-09-09 22:34:22.064] [KanataUDPClient.swift:553 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Arming receive handler BEFORE send to prevent race condition [requestId: BF997A20-ECA1-4CCC-923C-3713E5756B31]
[2025-09-09 22:34:22.064] [KanataUDPClient.swift:592 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Sending message after receive handler is armed [requestId: BF997A20-ECA1-4CCC-923C-3713E5756B31]
[2025-09-09 22:34:22.064] [KanataUDPClient.swift:140 authenticate(token:clientName:)] ✅ [UDP] Authentication successful
[2025-09-09 22:34:22.064] [KanataUDPClient.swift:141 authenticate(token:clientName:)] 🔐 [UDP] Session established (expires in 1800s)
[2025-09-09 22:34:22.064] [KanataUDPClient.swift:573 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] ✅ Received response: 90 bytes [requestId: 125364D8-2337-4741-B532-67981C8D73F6]
[2025-09-09 22:34:22.064] [KanataManager.swift:3379 validateGeneratedConfig(_:)] 📡 [Validation] UDP server is AVAILABLE, using UDP validation
[2025-09-09 22:34:22.064] [KanataUDPClient.swift:575 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Response context: Network.NWConnection.ContentContext [requestId: 125364D8-2337-4741-B532-67981C8D73F6]
[2025-09-09 22:34:22.064] [KanataUDPClient.swift:607 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] ✅ Message sent from local endpoint: 127.0.0.1:56908 [requestId: BF997A20-ECA1-4CCC-923C-3713E5756B31]
[2025-09-09 22:34:22.064] [KanataUDPClient.swift:611 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] ✅ Message sent - receive handler already armed [requestId: BF997A20-ECA1-4CCC-923C-3713E5756B31]
[2025-09-09 22:34:22.064] [KanataUDPClient.swift:487 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Starting request 46881CC0-657E-4291-A595-8BE91E7DBCC4 to 127.0.0.1:37001
[2025-09-09 22:34:22.064] [KanataUDPClient.swift:511 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Sending message to 127.0.0.1:37001 (312 bytes) [requestId: 46881CC0-657E-4291-A595-8BE91E7DBCC4]
[2025-09-09 22:34:22.064] [KanataUDPClient.swift:573 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] ✅ Received response: 90 bytes [requestId: 9B38C17A-56D8-4C82-BD7A-7FF9AB0B73FC]
[2025-09-09 22:34:22.064] [KanataUDPClient.swift:140 authenticate(token:clientName:)] ✅ [UDP] Authentication successful
[2025-09-09 22:34:22.064] [KanataUDPClient.swift:575 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Response context: Network.NWConnection.ContentContext [requestId: 9B38C17A-56D8-4C82-BD7A-7FF9AB0B73FC]
[2025-09-09 22:34:22.064] [KanataUDPClient.swift:141 authenticate(token:clientName:)] 🔐 [UDP] Session established (expires in 1800s)
[2025-09-09 22:34:22.064] [KanataUDPClient.swift:514 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Message content: {"ValidateConfig":{"config_content":";; Generated by KeyPath\n;; 1 key mapping(s) configured\n;;\n;; SAFETY FEATURES:\n;; - process-unmapped-keys no: Only process explicitly mapped keys\n\n(defcfg\n  process-unmapped-keys no\n)\n\n(defsrc\n  caps\n)\n\n(deflayer base\n  esc\n)","session_id":"***"}} [requestId: 46881CC0-657E-4291-A595-8BE91E7DBCC4]
[2025-09-09 22:34:22.064] [KanataUDPClient.swift:546 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Local endpoint: 127.0.0.1:60620 [requestId: 46881CC0-657E-4291-A595-8BE91E7DBCC4]
[2025-09-09 22:34:22.064] [KanataUDPClient.swift:573 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] ✅ Received response: 313 bytes [requestId: 7746F75E-0D9A-4A4C-8BB9-964F5BB6D751]
[2025-09-09 22:34:22.064] [KanataManager.swift:3379 validateGeneratedConfig(_:)] 📡 [Validation] UDP server is AVAILABLE, using UDP validation
[2025-09-09 22:34:22.064] [KanataUDPClient.swift:575 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Response context: Network.NWConnection.ContentContext [requestId: 7746F75E-0D9A-4A4C-8BB9-964F5BB6D751]
[2025-09-09 22:34:22.064] [KanataUDPClient.swift:553 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Arming receive handler BEFORE send to prevent race condition [requestId: 46881CC0-657E-4291-A595-8BE91E7DBCC4]
[2025-09-09 22:34:22.064] [KanataUDPClient.swift:592 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Sending message after receive handler is armed [requestId: 46881CC0-657E-4291-A595-8BE91E7DBCC4]
[2025-09-09 22:34:22.064] [KanataUDPClient.swift:487 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Starting request 91E13896-ADE6-48E7-9DE2-EC5AD2589648 to 127.0.0.1:37001
[2025-09-09 22:34:22.064] [KanataUDPClient.swift:511 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Sending message to 127.0.0.1:37001 (312 bytes) [requestId: 91E13896-ADE6-48E7-9DE2-EC5AD2589648]
[2025-09-09 22:34:22.064] [KanataUDPClient.swift:140 authenticate(token:clientName:)] ✅ [UDP] Authentication successful
[2025-09-09 22:34:22.065] [KanataUDPClient.swift:141 authenticate(token:clientName:)] 🔐 [UDP] Session established (expires in 1800s)
[2025-09-09 22:34:22.065] [KanataUDPClient.swift:307 validateConfig(_:)] ❌ [UDP] Config validation error: invalidResponse
[2025-09-09 22:34:22.065] [KanataUDPClient.swift:514 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Message content: {"ValidateConfig":{"config_content":";; Generated by KeyPath\n;; 1 key mapping(s) configured\n;;\n;; SAFETY FEATURES:\n;; - process-unmapped-keys no: Only process explicitly mapped keys\n\n(defcfg\n  process-unmapped-keys no\n)\n\n(defsrc\n  caps\n)\n\n(deflayer base\n  esc\n)","session_id":"***"}} [requestId: 91E13896-ADE6-48E7-9DE2-EC5AD2589648]
[2025-09-09 22:34:22.065] [KanataManager.swift:3379 validateGeneratedConfig(_:)] 📡 [Validation] UDP server is AVAILABLE, using UDP validation
[2025-09-09 22:34:22.065] [KanataUDPClient.swift:607 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] ✅ Message sent from local endpoint: 127.0.0.1:60620 [requestId: 46881CC0-657E-4291-A595-8BE91E7DBCC4]
[2025-09-09 22:34:22.065] [KanataUDPClient.swift:611 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] ✅ Message sent - receive handler already armed [requestId: 46881CC0-657E-4291-A595-8BE91E7DBCC4]
[2025-09-09 22:34:22.065] [KanataUDPClient.swift:487 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Starting request 2A93956F-DE5D-4F2A-8481-A2920F0B5F54 to 127.0.0.1:37001
[2025-09-09 22:34:22.065] [KanataUDPClient.swift:511 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Sending message to 127.0.0.1:37001 (312 bytes) [requestId: 2A93956F-DE5D-4F2A-8481-A2920F0B5F54]
[2025-09-09 22:34:22.065] [KanataUDPClient.swift:546 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Local endpoint: 127.0.0.1:61479 [requestId: 91E13896-ADE6-48E7-9DE2-EC5AD2589648]
[2025-09-09 22:34:22.065] [KanataManager.swift:3383 validateGeneratedConfig(_:)] ⏱️ [Validation] UDP validation completed in 0.002 seconds
[2025-09-09 22:34:22.065] [KanataUDPClient.swift:573 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] ✅ Received response: 313 bytes [requestId: 9F7F0531-7512-455A-A7E2-57A9F7534020]
[2025-09-09 22:34:22.065] [KanataManager.swift:3399 validateGeneratedConfig(_:)] ⚠️ [Validation] UDP validation network error: Invalid or malformed response from server
[2025-09-09 22:34:22.065] [KanataUDPClient.swift:553 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Arming receive handler BEFORE send to prevent race condition [requestId: 91E13896-ADE6-48E7-9DE2-EC5AD2589648]
[2025-09-09 22:34:22.065] [KanataUDPClient.swift:575 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Response context: Network.NWConnection.ContentContext [requestId: 9F7F0531-7512-455A-A7E2-57A9F7534020]
[2025-09-09 22:34:22.065] [KanataManager.swift:3400 validateGeneratedConfig(_:)] ⚠️ [Validation] Falling back to CLI validation...
[2025-09-09 22:34:22.065] [KanataUDPClient.swift:514 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Message content: {"ValidateConfig":{"session_id":"***","config_content":";; Generated by KeyPath\n;; 1 key mapping(s) configured\n;;\n;; SAFETY FEATURES:\n;; - process-unmapped-keys no: Only process explicitly mapped keys\n\n(defcfg\n  process-unmapped-keys no\n)\n\n(defsrc\n  caps\n)\n\n(deflayer base\n  esc\n)"}} [requestId: 2A93956F-DE5D-4F2A-8481-A2920F0B5F54]
[2025-09-09 22:34:22.065] [KanataUDPClient.swift:65 deinit] 📡 [UDP] Client deallocated, connection cleaned up
[2025-09-09 22:34:22.065] [KanataManager.swift:3417 validateGeneratedConfig(_:)] 🖥️ [Validation] Starting CLI validation...
[2025-09-09 22:34:22.065] [KanataUDPClient.swift:546 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Local endpoint: 127.0.0.1:62392 [requestId: 2A93956F-DE5D-4F2A-8481-A2920F0B5F54]
[2025-09-09 22:34:22.065] [KanataUDPClient.swift:553 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Arming receive handler BEFORE send to prevent race condition [requestId: 2A93956F-DE5D-4F2A-8481-A2920F0B5F54]
[2025-09-09 22:34:22.065] [KanataUDPClient.swift:592 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Sending message after receive handler is armed [requestId: 91E13896-ADE6-48E7-9DE2-EC5AD2589648]
[2025-09-09 22:34:22.065] [KanataUDPClient.swift:592 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Sending message after receive handler is armed [requestId: 2A93956F-DE5D-4F2A-8481-A2920F0B5F54]
[2025-09-09 22:34:22.065] [KanataUDPClient.swift:307 validateConfig(_:)] ❌ [UDP] Config validation error: invalidResponse
[2025-09-09 22:34:22.065] [KanataManager.swift:3441 validateConfigWithCLI(_:)] 🖥️ [Validation-CLI] Starting CLI validation process...
[2025-09-09 22:34:22.065] [KanataManager.swift:3445 validateConfigWithCLI(_:)] 📝 [Validation-CLI] Creating temp config file: /Users/malpern/.config/keypath/temp_validation.kbd
[2025-09-09 22:34:22.065] [KanataUDPClient.swift:607 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] ✅ Message sent from local endpoint: 127.0.0.1:62392 [requestId: 2A93956F-DE5D-4F2A-8481-A2920F0B5F54]
[2025-09-09 22:34:22.065] [KanataUDPClient.swift:611 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] ✅ Message sent - receive handler already armed [requestId: 2A93956F-DE5D-4F2A-8481-A2920F0B5F54]
[2025-09-09 22:34:22.065] [KanataUDPClient.swift:607 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] ✅ Message sent from local endpoint: 127.0.0.1:61479 [requestId: 91E13896-ADE6-48E7-9DE2-EC5AD2589648]
[2025-09-09 22:34:22.065] [KanataUDPClient.swift:611 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] ✅ Message sent - receive handler already armed [requestId: 91E13896-ADE6-48E7-9DE2-EC5AD2589648]
[2025-09-09 22:34:22.065] [KanataUDPClient.swift:573 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] ✅ Received response: 313 bytes [requestId: 9E592F8A-D523-4C57-8E2D-44B0C779AF1F]
[2025-09-09 22:34:22.065] [KanataUDPClient.swift:575 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Response context: Network.NWConnection.ContentContext [requestId: 9E592F8A-D523-4C57-8E2D-44B0C779AF1F]
[2025-09-09 22:34:22.065] [KanataUDPClient.swift:573 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] ✅ Received response: 313 bytes [requestId: 692554E0-F077-4A2A-BA1F-D4BC2533B440]
[2025-09-09 22:34:22.065] [KanataUDPClient.swift:573 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] ✅ Received response: 313 bytes [requestId: 66CDD049-6E9B-4547-B4E5-F650FE945504]
[2025-09-09 22:34:22.065] [KanataUDPClient.swift:575 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Response context: Network.NWConnection.ContentContext [requestId: 692554E0-F077-4A2A-BA1F-D4BC2533B440]
[2025-09-09 22:34:22.065] [KanataUDPClient.swift:575 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Response context: Network.NWConnection.ContentContext [requestId: 66CDD049-6E9B-4547-B4E5-F650FE945504]
[2025-09-09 22:34:22.065] [KanataUDPClient.swift:307 validateConfig(_:)] ❌ [UDP] Config validation error: invalidResponse
[2025-09-09 22:34:22.065] [KanataUDPClient.swift:573 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] ✅ Received response: 313 bytes [requestId: 12A9BBAF-7DEC-4061-B4AA-671BDB881034]
[2025-09-09 22:34:22.065] [KanataUDPClient.swift:575 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Response context: Network.NWConnection.ContentContext [requestId: 12A9BBAF-7DEC-4061-B4AA-671BDB881034]
[2025-09-09 22:34:22.065] [KanataUDPClient.swift:307 validateConfig(_:)] ❌ [UDP] Config validation error: invalidResponse
[2025-09-09 22:34:22.065] [KanataUDPClient.swift:307 validateConfig(_:)] ❌ [UDP] Config validation error: invalidResponse
[2025-09-09 22:34:22.065] [KanataUDPClient.swift:307 validateConfig(_:)] ❌ [UDP] Config validation error: invalidResponse
[2025-09-09 22:34:22.065] [KanataUDPClient.swift:573 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] ✅ Received response: 313 bytes [requestId: BF997A20-ECA1-4CCC-923C-3713E5756B31]
[2025-09-09 22:34:22.065] [KanataUDPClient.swift:575 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Response context: Network.NWConnection.ContentContext [requestId: BF997A20-ECA1-4CCC-923C-3713E5756B31]
[2025-09-09 22:34:22.065] [KanataUDPClient.swift:307 validateConfig(_:)] ❌ [UDP] Config validation error: invalidResponse
[2025-09-09 22:34:22.065] [KanataManager.swift:3452 validateConfigWithCLI(_:)] 📝 [Validation-CLI] Temp config written successfully (224 characters)
[2025-09-09 22:34:22.065] [KanataUDPClient.swift:573 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] ✅ Received response: 313 bytes [requestId: 46881CC0-657E-4291-A595-8BE91E7DBCC4]
[2025-09-09 22:34:22.065] [KanataManager.swift:3456 validateConfigWithCLI(_:)] 🔧 [Validation-CLI] Using kanata binary: /Library/KeyPath/bin/kanata
[2025-09-09 22:34:22.065] [KanataUDPClient.swift:575 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Response context: Network.NWConnection.ContentContext [requestId: 46881CC0-657E-4291-A595-8BE91E7DBCC4]
[2025-09-09 22:34:22.065] [KanataUDPClient.swift:307 validateConfig(_:)] ❌ [UDP] Config validation error: invalidResponse
[2025-09-09 22:34:22.065] [KanataUDPClient.swift:573 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] ✅ Received response: 313 bytes [requestId: 2A93956F-DE5D-4F2A-8481-A2920F0B5F54]
[2025-09-09 22:34:22.065] [KanataUDPClient.swift:575 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Response context: Network.NWConnection.ContentContext [requestId: 2A93956F-DE5D-4F2A-8481-A2920F0B5F54]
[2025-09-09 22:34:22.065] [KanataUDPClient.swift:307 validateConfig(_:)] ❌ [UDP] Config validation error: invalidResponse
[2025-09-09 22:34:22.065] [KanataUDPClient.swift:573 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] ✅ Received response: 313 bytes [requestId: 91E13896-ADE6-48E7-9DE2-EC5AD2589648]
[2025-09-09 22:34:22.065] [KanataUDPClient.swift:575 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Response context: Network.NWConnection.ContentContext [requestId: 91E13896-ADE6-48E7-9DE2-EC5AD2589648]
[2025-09-09 22:34:22.065] [PreferencesService.swift:255 buildUDPArguments(port:sessionTimeout:defaultTimeout:)] 🔐 [UDP Launch] Auth token ensured; using environment variable
[2025-09-09 22:34:22.065] [KanataUDPClient.swift:307 validateConfig(_:)] ❌ [UDP] Config validation error: invalidResponse
[2025-09-09 22:34:22.066] [KanataManager.swift:3819 buildKanataArguments(configPath:checkOnly:)] 📡 [KanataArgs] UDP server enabled on port 37001
[2025-09-09 22:34:22.066] [KanataManager.swift:3832 buildKanataArguments(configPath:checkOnly:)] 🔧 [KanataArgs] Built arguments: --cfg /Users/malpern/.config/keypath/temp_validation.kbd --udp-port 37001 --check
[2025-09-09 22:34:22.066] [KanataManager.swift:3462 validateConfigWithCLI(_:)] 🔧 [Validation-CLI] Command: /Library/KeyPath/bin/kanata --cfg /Users/malpern/.config/keypath/temp_validation.kbd --udp-port 37001 --check
[2025-09-09 22:34:22.132] [KanataManager.swift:3472 validateConfigWithCLI(_:)] ⏱️ [Validation-CLI] CLI validation completed in 0.066 seconds
[2025-09-09 22:34:22.132] [KanataManager.swift:3477 validateConfigWithCLI(_:)] 📋 [Validation-CLI] Exit code: 0
[2025-09-09 22:34:22.132] [KanataManager.swift:3479 validateConfigWithCLI(_:)] 📋 [Validation-CLI] Output: 22:34:22.0788 [0m[34m[INFO] [0mkanata v1.9.0 starting
22:34:22.0789 [0m[34m[INFO] [0mvalidating config only and exiting
22:34:22.0790 [0m[34m[INFO] [0mprocess unmapped keys: false
22:34:22.0791 [0m[34m[INFO] [0mconfig file is valid
...
[2025-09-09 22:34:22.132] [KanataManager.swift:3484 validateConfigWithCLI(_:)] 🗑️ [Validation-CLI] Temp file cleaned up
[2025-09-09 22:34:22.132] [KanataManager.swift:3487 validateConfigWithCLI(_:)] ✅ [Validation-CLI] CLI validation PASSED
[2025-09-09 22:34:22.132] [KanataManager.swift:3419 validateGeneratedConfig(_:)] 🔍 [Validation] ========== CONFIG VALIDATION END ==========
[2025-09-09 22:34:22.132] [KanataManager.swift:2937 loadExistingMappings()] ⏱️ [Validation] Validation completed in 0.126 seconds
[2025-09-09 22:34:22.132] [KanataManager.swift:2941 loadExistingMappings()] ✅ [Validation] Config validation PASSED
[2025-09-09 22:34:22.132] [KanataManager.swift:3152 parseKanataConfig(_:)] 🔍 [Parse] Found 1 src keys, 1 layer keys, deduplicated to 1 unique mappings
[2025-09-09 22:34:22.132] [KanataManager.swift:2943 loadExistingMappings()] ✅ [Validation] Successfully loaded 1 existing mappings:
[2025-09-09 22:34:22.132] [KanataManager.swift:2945 loadExistingMappings()]    1. caps → esc
[2025-09-09 22:34:22.132] [KanataManager.swift:2962 loadExistingMappings()] 📂 [Validation] ========== STARTUP CONFIG VALIDATION END ==========
[2025-09-09 22:34:22.132] [KanataManager.swift:523 backupCurrentConfig()] 💾 [Backup] Current config backed up successfully
[2025-09-09 22:34:22.133] [ConfigurationService.swift:240 saveConfiguration(keyMappings:)] ✅ [ConfigService] Configuration saved with 2 mappings
[2025-09-09 22:34:22.133] [KanataManager.swift:1765 saveConfiguration(input:output:)] 💾 [Config] Config saved with 2 mappings via ConfigurationService
[2025-09-09 22:34:22.133] [KanataManager+Configuration.swift:93 triggerUDPReload()] 🧪 [UDP Reload] Skipping UDP reload in test environment
[2025-09-09 22:34:22.133] [KanataManager.swift:1786 saveConfiguration(input:output:)] ❌ [Config] UDP reload FAILED: Test environment - UDP disabled
[2025-09-09 22:34:22.133] [KanataManager.swift:1787 saveConfiguration(input:output:)] ❌ [Config] UDP server is required for validation-on-demand - restoring backup
[2025-09-09 22:34:22.133] [KanataManager.swift:536 restoreLastGoodConfig()] 🔄 [Restore] Restored last good config successfully
[2025-09-09 22:34:22.133] [KanataManager.swift:3383 validateGeneratedConfig(_:)] ⏱️ [Validation] UDP validation completed in 0.070 seconds
[2025-09-09 22:34:22.133] [KanataManager.swift:3399 validateGeneratedConfig(_:)] ⚠️ [Validation] UDP validation network error: Invalid or malformed response from server
[2025-09-09 22:34:22.133] [KanataManager.swift:3400 validateGeneratedConfig(_:)] ⚠️ [Validation] Falling back to CLI validation...
[2025-09-09 22:34:22.133] [KanataUDPClient.swift:65 deinit] 📡 [UDP] Client deallocated, connection cleaned up
[2025-09-09 22:34:22.133] [KanataManager.swift:3417 validateGeneratedConfig(_:)] 🖥️ [Validation] Starting CLI validation...
[2025-09-09 22:34:22.133] [KanataManager.swift:3441 validateConfigWithCLI(_:)] 🖥️ [Validation-CLI] Starting CLI validation process...
[2025-09-09 22:34:22.133] [KanataManager.swift:3445 validateConfigWithCLI(_:)] 📝 [Validation-CLI] Creating temp config file: /Users/malpern/.config/keypath/temp_validation.kbd
[2025-09-09 22:34:22.133] [KanataManager.swift:3452 validateConfigWithCLI(_:)] 📝 [Validation-CLI] Temp config written successfully (224 characters)
[2025-09-09 22:34:22.133] [KanataManager.swift:3456 validateConfigWithCLI(_:)] 🔧 [Validation-CLI] Using kanata binary: /Library/KeyPath/bin/kanata
[2025-09-09 22:34:22.133] [PreferencesService.swift:255 buildUDPArguments(port:sessionTimeout:defaultTimeout:)] 🔐 [UDP Launch] Auth token ensured; using environment variable
[2025-09-09 22:34:22.133] [KanataManager.swift:3819 buildKanataArguments(configPath:checkOnly:)] 📡 [KanataArgs] UDP server enabled on port 37001
[2025-09-09 22:34:22.133] [KanataManager.swift:3832 buildKanataArguments(configPath:checkOnly:)] 🔧 [KanataArgs] Built arguments: --cfg /Users/malpern/.config/keypath/temp_validation.kbd --udp-port 37001 --check
[2025-09-09 22:34:22.133] [KanataManager.swift:3462 validateConfigWithCLI(_:)] 🔧 [Validation-CLI] Command: /Library/KeyPath/bin/kanata --cfg /Users/malpern/.config/keypath/temp_validation.kbd --udp-port 37001 --check
[2025-09-09 22:34:22.199] [KanataManager.swift:3472 validateConfigWithCLI(_:)] ⏱️ [Validation-CLI] CLI validation completed in 0.066 seconds
[2025-09-09 22:34:22.199] [KanataManager.swift:3477 validateConfigWithCLI(_:)] 📋 [Validation-CLI] Exit code: 0
[2025-09-09 22:34:22.200] [KanataManager.swift:3479 validateConfigWithCLI(_:)] 📋 [Validation-CLI] Output: 22:34:22.1439 [0m[34m[INFO] [0mkanata v1.9.0 starting
22:34:22.1439 [0m[34m[INFO] [0mvalidating config only and exiting
22:34:22.1440 [0m[34m[INFO] [0mprocess unmapped keys: false
22:34:22.1441 [0m[34m[INFO] [0mconfig file is valid
...
[2025-09-09 22:34:22.200] [KanataManager.swift:3484 validateConfigWithCLI(_:)] 🗑️ [Validation-CLI] Temp file cleaned up
[2025-09-09 22:34:22.200] [KanataManager.swift:3487 validateConfigWithCLI(_:)] ✅ [Validation-CLI] CLI validation PASSED
[2025-09-09 22:34:22.200] [KanataManager.swift:3419 validateGeneratedConfig(_:)] 🔍 [Validation] ========== CONFIG VALIDATION END ==========
[2025-09-09 22:34:22.200] [KanataManager.swift:2937 loadExistingMappings()] ⏱️ [Validation] Validation completed in 0.194 seconds
[2025-09-09 22:34:22.200] [KanataManager.swift:2941 loadExistingMappings()] ✅ [Validation] Config validation PASSED
[2025-09-09 22:34:22.200] [KanataManager.swift:3152 parseKanataConfig(_:)] 🔍 [Parse] Found 1 src keys, 1 layer keys, deduplicated to 1 unique mappings
[2025-09-09 22:34:22.200] [KanataManager.swift:2943 loadExistingMappings()] ✅ [Validation] Successfully loaded 1 existing mappings:
[2025-09-09 22:34:22.200] [KanataManager.swift:2945 loadExistingMappings()]    1. caps → esc
[2025-09-09 22:34:22.200] [KanataManager.swift:2962 loadExistingMappings()] 📂 [Validation] ========== STARTUP CONFIG VALIDATION END ==========
[2025-09-09 22:34:22.200] [KanataManager.swift:523 backupCurrentConfig()] 💾 [Backup] Current config backed up successfully
[2025-09-09 22:34:22.200] [ConfigurationService.swift:240 saveConfiguration(keyMappings:)] ✅ [ConfigService] Configuration saved with 2 mappings
[2025-09-09 22:34:22.200] [KanataManager.swift:1765 saveConfiguration(input:output:)] 💾 [Config] Config saved with 2 mappings via ConfigurationService
[2025-09-09 22:34:22.201] [KanataManager+Configuration.swift:93 triggerUDPReload()] 🧪 [UDP Reload] Skipping UDP reload in test environment
[2025-09-09 22:34:22.201] [KanataManager.swift:1786 saveConfiguration(input:output:)] ❌ [Config] UDP reload FAILED: Test environment - UDP disabled
[2025-09-09 22:34:22.201] [KanataManager.swift:1787 saveConfiguration(input:output:)] ❌ [Config] UDP server is required for validation-on-demand - restoring backup
[2025-09-09 22:34:22.201] [KanataManager.swift:536 restoreLastGoodConfig()] 🔄 [Restore] Restored last good config successfully
[2025-09-09 22:34:22.201] [KanataManager.swift:3383 validateGeneratedConfig(_:)] ⏱️ [Validation] UDP validation completed in 0.138 seconds
[2025-09-09 22:34:22.201] [KanataManager.swift:3399 validateGeneratedConfig(_:)] ⚠️ [Validation] UDP validation network error: Invalid or malformed response from server
[2025-09-09 22:34:22.201] [KanataManager.swift:3400 validateGeneratedConfig(_:)] ⚠️ [Validation] Falling back to CLI validation...
[2025-09-09 22:34:22.201] [KanataUDPClient.swift:65 deinit] 📡 [UDP] Client deallocated, connection cleaned up
[2025-09-09 22:34:22.201] [KanataManager.swift:3417 validateGeneratedConfig(_:)] 🖥️ [Validation] Starting CLI validation...
[2025-09-09 22:34:22.201] [KanataManager.swift:3441 validateConfigWithCLI(_:)] 🖥️ [Validation-CLI] Starting CLI validation process...
[2025-09-09 22:34:22.201] [KanataManager.swift:3445 validateConfigWithCLI(_:)] 📝 [Validation-CLI] Creating temp config file: /Users/malpern/.config/keypath/temp_validation.kbd
[2025-09-09 22:34:22.202] [KanataManager.swift:3452 validateConfigWithCLI(_:)] 📝 [Validation-CLI] Temp config written successfully (224 characters)
[2025-09-09 22:34:22.202] [KanataManager.swift:3456 validateConfigWithCLI(_:)] 🔧 [Validation-CLI] Using kanata binary: /Library/KeyPath/bin/kanata
[2025-09-09 22:34:22.202] [PreferencesService.swift:255 buildUDPArguments(port:sessionTimeout:defaultTimeout:)] 🔐 [UDP Launch] Auth token ensured; using environment variable
[2025-09-09 22:34:22.202] [KanataManager.swift:3819 buildKanataArguments(configPath:checkOnly:)] 📡 [KanataArgs] UDP server enabled on port 37001
[2025-09-09 22:34:22.202] [KanataManager.swift:3832 buildKanataArguments(configPath:checkOnly:)] 🔧 [KanataArgs] Built arguments: --cfg /Users/malpern/.config/keypath/temp_validation.kbd --udp-port 37001 --check
[2025-09-09 22:34:22.202] [KanataManager.swift:3462 validateConfigWithCLI(_:)] 🔧 [Validation-CLI] Command: /Library/KeyPath/bin/kanata --cfg /Users/malpern/.config/keypath/temp_validation.kbd --udp-port 37001 --check
[2025-09-09 22:34:22.265] [KanataManager.swift:3472 validateConfigWithCLI(_:)] ⏱️ [Validation-CLI] CLI validation completed in 0.063 seconds
[2025-09-09 22:34:22.265] [KanataManager.swift:3477 validateConfigWithCLI(_:)] 📋 [Validation-CLI] Exit code: 0
[2025-09-09 22:34:22.265] [KanataManager.swift:3479 validateConfigWithCLI(_:)] 📋 [Validation-CLI] Output: 22:34:22.2132 [0m[34m[INFO] [0mkanata v1.9.0 starting
22:34:22.2132 [0m[34m[INFO] [0mvalidating config only and exiting
22:34:22.2133 [0m[34m[INFO] [0mprocess unmapped keys: false
22:34:22.2134 [0m[34m[INFO] [0mconfig file is valid
...
[2025-09-09 22:34:22.265] [KanataManager.swift:3484 validateConfigWithCLI(_:)] 🗑️ [Validation-CLI] Temp file cleaned up
[2025-09-09 22:34:22.265] [KanataManager.swift:3487 validateConfigWithCLI(_:)] ✅ [Validation-CLI] CLI validation PASSED
[2025-09-09 22:34:22.265] [KanataManager.swift:3419 validateGeneratedConfig(_:)] 🔍 [Validation] ========== CONFIG VALIDATION END ==========
[2025-09-09 22:34:22.265] [KanataManager.swift:2937 loadExistingMappings()] ⏱️ [Validation] Validation completed in 0.258 seconds
[2025-09-09 22:34:22.265] [KanataManager.swift:2941 loadExistingMappings()] ✅ [Validation] Config validation PASSED
[2025-09-09 22:34:22.265] [KanataManager.swift:3152 parseKanataConfig(_:)] 🔍 [Parse] Found 1 src keys, 1 layer keys, deduplicated to 1 unique mappings
[2025-09-09 22:34:22.265] [KanataManager.swift:2943 loadExistingMappings()] ✅ [Validation] Successfully loaded 1 existing mappings:
[2025-09-09 22:34:22.265] [KanataManager.swift:2945 loadExistingMappings()]    1. caps → esc
[2025-09-09 22:34:22.265] [KanataManager.swift:2962 loadExistingMappings()] 📂 [Validation] ========== STARTUP CONFIG VALIDATION END ==========
[2025-09-09 22:34:22.266] [KanataManager.swift:523 backupCurrentConfig()] 💾 [Backup] Current config backed up successfully
[2025-09-09 22:34:22.266] [ConfigurationService.swift:240 saveConfiguration(keyMappings:)] ✅ [ConfigService] Configuration saved with 2 mappings
[2025-09-09 22:34:22.266] [KanataManager.swift:1765 saveConfiguration(input:output:)] 💾 [Config] Config saved with 2 mappings via ConfigurationService
[2025-09-09 22:34:22.266] [KanataManager+Configuration.swift:93 triggerUDPReload()] 🧪 [UDP Reload] Skipping UDP reload in test environment
[2025-09-09 22:34:22.266] [KanataManager.swift:1786 saveConfiguration(input:output:)] ❌ [Config] UDP reload FAILED: Test environment - UDP disabled
[2025-09-09 22:34:22.266] [KanataManager.swift:1787 saveConfiguration(input:output:)] ❌ [Config] UDP server is required for validation-on-demand - restoring backup
[2025-09-09 22:34:22.267] [KanataManager.swift:536 restoreLastGoodConfig()] 🔄 [Restore] Restored last good config successfully
[2025-09-09 22:34:22.267] [KanataManager.swift:3383 validateGeneratedConfig(_:)] ⏱️ [Validation] UDP validation completed in 0.203 seconds
[2025-09-09 22:34:22.267] [KanataManager.swift:3399 validateGeneratedConfig(_:)] ⚠️ [Validation] UDP validation network error: Invalid or malformed response from server
[2025-09-09 22:34:22.267] [KanataManager.swift:3400 validateGeneratedConfig(_:)] ⚠️ [Validation] Falling back to CLI validation...
[2025-09-09 22:34:22.267] [KanataUDPClient.swift:65 deinit] 📡 [UDP] Client deallocated, connection cleaned up
[2025-09-09 22:34:22.267] [KanataManager.swift:3417 validateGeneratedConfig(_:)] 🖥️ [Validation] Starting CLI validation...
[2025-09-09 22:34:22.267] [KanataManager.swift:3441 validateConfigWithCLI(_:)] 🖥️ [Validation-CLI] Starting CLI validation process...
[2025-09-09 22:34:22.267] [KanataManager.swift:3445 validateConfigWithCLI(_:)] 📝 [Validation-CLI] Creating temp config file: /Users/malpern/.config/keypath/temp_validation.kbd
[2025-09-09 22:34:22.267] [KanataManager.swift:3452 validateConfigWithCLI(_:)] 📝 [Validation-CLI] Temp config written successfully (224 characters)
[2025-09-09 22:34:22.267] [KanataManager.swift:3456 validateConfigWithCLI(_:)] 🔧 [Validation-CLI] Using kanata binary: /Library/KeyPath/bin/kanata
[2025-09-09 22:34:22.267] [PreferencesService.swift:255 buildUDPArguments(port:sessionTimeout:defaultTimeout:)] 🔐 [UDP Launch] Auth token ensured; using environment variable
[2025-09-09 22:34:22.267] [KanataManager.swift:3819 buildKanataArguments(configPath:checkOnly:)] 📡 [KanataArgs] UDP server enabled on port 37001
[2025-09-09 22:34:22.267] [KanataManager.swift:3832 buildKanataArguments(configPath:checkOnly:)] 🔧 [KanataArgs] Built arguments: --cfg /Users/malpern/.config/keypath/temp_validation.kbd --udp-port 37001 --check
[2025-09-09 22:34:22.267] [KanataManager.swift:3462 validateConfigWithCLI(_:)] 🔧 [Validation-CLI] Command: /Library/KeyPath/bin/kanata --cfg /Users/malpern/.config/keypath/temp_validation.kbd --udp-port 37001 --check
[2025-09-09 22:34:22.332] [KanataManager.swift:3472 validateConfigWithCLI(_:)] ⏱️ [Validation-CLI] CLI validation completed in 0.064 seconds
[2025-09-09 22:34:22.332] [KanataManager.swift:3477 validateConfigWithCLI(_:)] 📋 [Validation-CLI] Exit code: 0
[2025-09-09 22:34:22.332] [KanataManager.swift:3479 validateConfigWithCLI(_:)] 📋 [Validation-CLI] Output: 22:34:22.2829 [0m[34m[INFO] [0mkanata v1.9.0 starting
22:34:22.2830 [0m[34m[INFO] [0mvalidating config only and exiting
22:34:22.2831 [0m[34m[INFO] [0mprocess unmapped keys: false
22:34:22.2832 [0m[34m[INFO] [0mconfig file is valid
...
[2025-09-09 22:34:22.332] [KanataManager.swift:3484 validateConfigWithCLI(_:)] 🗑️ [Validation-CLI] Temp file cleaned up
[2025-09-09 22:34:22.332] [KanataManager.swift:3487 validateConfigWithCLI(_:)] ✅ [Validation-CLI] CLI validation PASSED
[2025-09-09 22:34:22.332] [KanataManager.swift:3419 validateGeneratedConfig(_:)] 🔍 [Validation] ========== CONFIG VALIDATION END ==========
[2025-09-09 22:34:22.332] [KanataManager.swift:2937 loadExistingMappings()] ⏱️ [Validation] Validation completed in 0.325 seconds
[2025-09-09 22:34:22.332] [KanataManager.swift:2941 loadExistingMappings()] ✅ [Validation] Config validation PASSED
[2025-09-09 22:34:22.332] [KanataManager.swift:3152 parseKanataConfig(_:)] 🔍 [Parse] Found 1 src keys, 1 layer keys, deduplicated to 1 unique mappings
[2025-09-09 22:34:22.332] [KanataManager.swift:2943 loadExistingMappings()] ✅ [Validation] Successfully loaded 1 existing mappings:
[2025-09-09 22:34:22.332] [KanataManager.swift:2945 loadExistingMappings()]    1. caps → esc
[2025-09-09 22:34:22.332] [KanataManager.swift:2962 loadExistingMappings()] 📂 [Validation] ========== STARTUP CONFIG VALIDATION END ==========
[2025-09-09 22:34:22.332] [KanataManager.swift:523 backupCurrentConfig()] 💾 [Backup] Current config backed up successfully
[2025-09-09 22:34:22.333] [ConfigurationService.swift:240 saveConfiguration(keyMappings:)] ✅ [ConfigService] Configuration saved with 2 mappings
[2025-09-09 22:34:22.333] [KanataManager.swift:1765 saveConfiguration(input:output:)] 💾 [Config] Config saved with 2 mappings via ConfigurationService
[2025-09-09 22:34:22.333] [KanataManager+Configuration.swift:93 triggerUDPReload()] 🧪 [UDP Reload] Skipping UDP reload in test environment
[2025-09-09 22:34:22.333] [KanataManager.swift:1786 saveConfiguration(input:output:)] ❌ [Config] UDP reload FAILED: Test environment - UDP disabled
[2025-09-09 22:34:22.333] [KanataManager.swift:1787 saveConfiguration(input:output:)] ❌ [Config] UDP server is required for validation-on-demand - restoring backup
[2025-09-09 22:34:22.334] [KanataManager.swift:536 restoreLastGoodConfig()] 🔄 [Restore] Restored last good config successfully
[2025-09-09 22:34:22.334] [KanataManager.swift:3383 validateGeneratedConfig(_:)] ⏱️ [Validation] UDP validation completed in 0.270 seconds
[2025-09-09 22:34:22.334] [KanataManager.swift:3399 validateGeneratedConfig(_:)] ⚠️ [Validation] UDP validation network error: Invalid or malformed response from server
[2025-09-09 22:34:22.334] [KanataManager.swift:3400 validateGeneratedConfig(_:)] ⚠️ [Validation] Falling back to CLI validation...
[2025-09-09 22:34:22.334] [KanataUDPClient.swift:65 deinit] 📡 [UDP] Client deallocated, connection cleaned up
[2025-09-09 22:34:22.334] [KanataManager.swift:3417 validateGeneratedConfig(_:)] 🖥️ [Validation] Starting CLI validation...
[2025-09-09 22:34:22.334] [KanataManager.swift:3441 validateConfigWithCLI(_:)] 🖥️ [Validation-CLI] Starting CLI validation process...
[2025-09-09 22:34:22.334] [KanataManager.swift:3445 validateConfigWithCLI(_:)] 📝 [Validation-CLI] Creating temp config file: /Users/malpern/.config/keypath/temp_validation.kbd
[2025-09-09 22:34:22.334] [KanataManager.swift:3452 validateConfigWithCLI(_:)] 📝 [Validation-CLI] Temp config written successfully (224 characters)
[2025-09-09 22:34:22.334] [KanataManager.swift:3456 validateConfigWithCLI(_:)] 🔧 [Validation-CLI] Using kanata binary: /Library/KeyPath/bin/kanata
[2025-09-09 22:34:22.335] [PreferencesService.swift:255 buildUDPArguments(port:sessionTimeout:defaultTimeout:)] 🔐 [UDP Launch] Auth token ensured; using environment variable
[2025-09-09 22:34:22.335] [KanataManager.swift:3819 buildKanataArguments(configPath:checkOnly:)] 📡 [KanataArgs] UDP server enabled on port 37001
[2025-09-09 22:34:22.335] [KanataManager.swift:3832 buildKanataArguments(configPath:checkOnly:)] 🔧 [KanataArgs] Built arguments: --cfg /Users/malpern/.config/keypath/temp_validation.kbd --udp-port 37001 --check
[2025-09-09 22:34:22.335] [KanataManager.swift:3462 validateConfigWithCLI(_:)] 🔧 [Validation-CLI] Command: /Library/KeyPath/bin/kanata --cfg /Users/malpern/.config/keypath/temp_validation.kbd --udp-port 37001 --check
[2025-09-09 22:34:22.398] [KanataManager.swift:3472 validateConfigWithCLI(_:)] ⏱️ [Validation-CLI] CLI validation completed in 0.064 seconds
[2025-09-09 22:34:22.398] [KanataManager.swift:3477 validateConfigWithCLI(_:)] 📋 [Validation-CLI] Exit code: 0
[2025-09-09 22:34:22.398] [KanataManager.swift:3479 validateConfigWithCLI(_:)] 📋 [Validation-CLI] Output: 22:34:22.3522 [0m[34m[INFO] [0mkanata v1.9.0 starting
22:34:22.3522 [0m[34m[INFO] [0mvalidating config only and exiting
22:34:22.3524 [0m[34m[INFO] [0mprocess unmapped keys: false
22:34:22.3525 [0m[34m[INFO] [0mconfig file is valid
...
[2025-09-09 22:34:22.399] [KanataManager.swift:3484 validateConfigWithCLI(_:)] 🗑️ [Validation-CLI] Temp file cleaned up
[2025-09-09 22:34:22.399] [KanataManager.swift:3487 validateConfigWithCLI(_:)] ✅ [Validation-CLI] CLI validation PASSED
[2025-09-09 22:34:22.399] [KanataManager.swift:3419 validateGeneratedConfig(_:)] 🔍 [Validation] ========== CONFIG VALIDATION END ==========
[2025-09-09 22:34:22.399] [KanataManager.swift:2937 loadExistingMappings()] ⏱️ [Validation] Validation completed in 0.393 seconds
[2025-09-09 22:34:22.399] [KanataManager.swift:2941 loadExistingMappings()] ✅ [Validation] Config validation PASSED
[2025-09-09 22:34:22.399] [KanataManager.swift:3152 parseKanataConfig(_:)] 🔍 [Parse] Found 1 src keys, 1 layer keys, deduplicated to 1 unique mappings
[2025-09-09 22:34:22.399] [KanataManager.swift:2943 loadExistingMappings()] ✅ [Validation] Successfully loaded 1 existing mappings:
[2025-09-09 22:34:22.399] [KanataManager.swift:2945 loadExistingMappings()]    1. caps → esc
[2025-09-09 22:34:22.399] [KanataManager.swift:2962 loadExistingMappings()] 📂 [Validation] ========== STARTUP CONFIG VALIDATION END ==========
[2025-09-09 22:34:22.399] [KanataManager.swift:523 backupCurrentConfig()] 💾 [Backup] Current config backed up successfully
[2025-09-09 22:34:22.400] [ConfigurationService.swift:240 saveConfiguration(keyMappings:)] ✅ [ConfigService] Configuration saved with 2 mappings
[2025-09-09 22:34:22.400] [KanataManager.swift:1765 saveConfiguration(input:output:)] 💾 [Config] Config saved with 2 mappings via ConfigurationService
[2025-09-09 22:34:22.400] [KanataManager+Configuration.swift:93 triggerUDPReload()] 🧪 [UDP Reload] Skipping UDP reload in test environment
[2025-09-09 22:34:22.400] [KanataManager.swift:1786 saveConfiguration(input:output:)] ❌ [Config] UDP reload FAILED: Test environment - UDP disabled
[2025-09-09 22:34:22.400] [KanataManager.swift:1787 saveConfiguration(input:output:)] ❌ [Config] UDP server is required for validation-on-demand - restoring backup
[2025-09-09 22:34:22.400] [KanataManager.swift:536 restoreLastGoodConfig()] 🔄 [Restore] Restored last good config successfully
[2025-09-09 22:34:22.400] [KanataManager.swift:3383 validateGeneratedConfig(_:)] ⏱️ [Validation] UDP validation completed in 0.337 seconds
[2025-09-09 22:34:22.400] [KanataManager.swift:3399 validateGeneratedConfig(_:)] ⚠️ [Validation] UDP validation network error: Invalid or malformed response from server
[2025-09-09 22:34:22.400] [KanataManager.swift:3400 validateGeneratedConfig(_:)] ⚠️ [Validation] Falling back to CLI validation...
[2025-09-09 22:34:22.400] [KanataUDPClient.swift:65 deinit] 📡 [UDP] Client deallocated, connection cleaned up
[2025-09-09 22:34:22.400] [KanataManager.swift:3417 validateGeneratedConfig(_:)] 🖥️ [Validation] Starting CLI validation...
[2025-09-09 22:34:22.400] [KanataManager.swift:3441 validateConfigWithCLI(_:)] 🖥️ [Validation-CLI] Starting CLI validation process...
[2025-09-09 22:34:22.400] [KanataManager.swift:3445 validateConfigWithCLI(_:)] 📝 [Validation-CLI] Creating temp config file: /Users/malpern/.config/keypath/temp_validation.kbd
[2025-09-09 22:34:22.401] [KanataManager.swift:3452 validateConfigWithCLI(_:)] 📝 [Validation-CLI] Temp config written successfully (224 characters)
[2025-09-09 22:34:22.401] [KanataManager.swift:3456 validateConfigWithCLI(_:)] 🔧 [Validation-CLI] Using kanata binary: /Library/KeyPath/bin/kanata
[2025-09-09 22:34:22.401] [PreferencesService.swift:255 buildUDPArguments(port:sessionTimeout:defaultTimeout:)] 🔐 [UDP Launch] Auth token ensured; using environment variable
[2025-09-09 22:34:22.401] [KanataManager.swift:3819 buildKanataArguments(configPath:checkOnly:)] 📡 [KanataArgs] UDP server enabled on port 37001
[2025-09-09 22:34:22.401] [KanataManager.swift:3832 buildKanataArguments(configPath:checkOnly:)] 🔧 [KanataArgs] Built arguments: --cfg /Users/malpern/.config/keypath/temp_validation.kbd --udp-port 37001 --check
[2025-09-09 22:34:22.401] [KanataManager.swift:3462 validateConfigWithCLI(_:)] 🔧 [Validation-CLI] Command: /Library/KeyPath/bin/kanata --cfg /Users/malpern/.config/keypath/temp_validation.kbd --udp-port 37001 --check
[2025-09-09 22:34:22.469] [KanataManager.swift:3472 validateConfigWithCLI(_:)] ⏱️ [Validation-CLI] CLI validation completed in 0.068 seconds
[2025-09-09 22:34:22.469] [KanataManager.swift:3477 validateConfigWithCLI(_:)] 📋 [Validation-CLI] Exit code: 0
[2025-09-09 22:34:22.469] [KanataManager.swift:3479 validateConfigWithCLI(_:)] 📋 [Validation-CLI] Output: 22:34:22.4199 [0m[34m[INFO] [0mkanata v1.9.0 starting
22:34:22.4199 [0m[34m[INFO] [0mvalidating config only and exiting
22:34:22.4201 [0m[34m[INFO] [0mprocess unmapped keys: false
22:34:22.4202 [0m[34m[INFO] [0mconfig file is valid
...
[2025-09-09 22:34:22.470] [KanataManager.swift:3484 validateConfigWithCLI(_:)] 🗑️ [Validation-CLI] Temp file cleaned up
[2025-09-09 22:34:22.470] [KanataManager.swift:3487 validateConfigWithCLI(_:)] ✅ [Validation-CLI] CLI validation PASSED
[2025-09-09 22:34:22.470] [KanataManager.swift:3419 validateGeneratedConfig(_:)] 🔍 [Validation] ========== CONFIG VALIDATION END ==========
[2025-09-09 22:34:22.470] [KanataManager.swift:2937 loadExistingMappings()] ⏱️ [Validation] Validation completed in 0.464 seconds
[2025-09-09 22:34:22.470] [KanataManager.swift:2941 loadExistingMappings()] ✅ [Validation] Config validation PASSED
[2025-09-09 22:34:22.470] [KanataManager.swift:3152 parseKanataConfig(_:)] 🔍 [Parse] Found 1 src keys, 1 layer keys, deduplicated to 1 unique mappings
[2025-09-09 22:34:22.470] [KanataManager.swift:2943 loadExistingMappings()] ✅ [Validation] Successfully loaded 1 existing mappings:
[2025-09-09 22:34:22.470] [KanataManager.swift:2945 loadExistingMappings()]    1. caps → esc
[2025-09-09 22:34:22.470] [KanataManager.swift:2962 loadExistingMappings()] 📂 [Validation] ========== STARTUP CONFIG VALIDATION END ==========
[2025-09-09 22:34:22.470] [KanataManager.swift:523 backupCurrentConfig()] 💾 [Backup] Current config backed up successfully
[2025-09-09 22:34:22.470] [ConfigurationService.swift:240 saveConfiguration(keyMappings:)] ✅ [ConfigService] Configuration saved with 2 mappings
[2025-09-09 22:34:22.470] [KanataManager.swift:1765 saveConfiguration(input:output:)] 💾 [Config] Config saved with 2 mappings via ConfigurationService
[2025-09-09 22:34:22.470] [KanataManager+Configuration.swift:93 triggerUDPReload()] 🧪 [UDP Reload] Skipping UDP reload in test environment
[2025-09-09 22:34:22.470] [KanataManager.swift:1786 saveConfiguration(input:output:)] ❌ [Config] UDP reload FAILED: Test environment - UDP disabled
[2025-09-09 22:34:22.470] [KanataManager.swift:1787 saveConfiguration(input:output:)] ❌ [Config] UDP server is required for validation-on-demand - restoring backup
[2025-09-09 22:34:22.470] [KanataManager.swift:536 restoreLastGoodConfig()] 🔄 [Restore] Restored last good config successfully
[2025-09-09 22:34:22.470] [KanataManager.swift:3383 validateGeneratedConfig(_:)] ⏱️ [Validation] UDP validation completed in 0.406 seconds
[2025-09-09 22:34:22.470] [KanataManager.swift:3399 validateGeneratedConfig(_:)] ⚠️ [Validation] UDP validation network error: Invalid or malformed response from server
[2025-09-09 22:34:22.470] [KanataManager.swift:3400 validateGeneratedConfig(_:)] ⚠️ [Validation] Falling back to CLI validation...
[2025-09-09 22:34:22.470] [KanataUDPClient.swift:65 deinit] 📡 [UDP] Client deallocated, connection cleaned up
[2025-09-09 22:34:22.470] [KanataManager.swift:3417 validateGeneratedConfig(_:)] 🖥️ [Validation] Starting CLI validation...
[2025-09-09 22:34:22.471] [KanataManager.swift:3441 validateConfigWithCLI(_:)] 🖥️ [Validation-CLI] Starting CLI validation process...
[2025-09-09 22:34:22.471] [KanataManager.swift:3445 validateConfigWithCLI(_:)] 📝 [Validation-CLI] Creating temp config file: /Users/malpern/.config/keypath/temp_validation.kbd
[2025-09-09 22:34:22.471] [KanataManager.swift:3452 validateConfigWithCLI(_:)] 📝 [Validation-CLI] Temp config written successfully (224 characters)
[2025-09-09 22:34:22.471] [KanataManager.swift:3456 validateConfigWithCLI(_:)] 🔧 [Validation-CLI] Using kanata binary: /Library/KeyPath/bin/kanata
[2025-09-09 22:34:22.471] [PreferencesService.swift:255 buildUDPArguments(port:sessionTimeout:defaultTimeout:)] 🔐 [UDP Launch] Auth token ensured; using environment variable
[2025-09-09 22:34:22.471] [KanataManager.swift:3819 buildKanataArguments(configPath:checkOnly:)] 📡 [KanataArgs] UDP server enabled on port 37001
[2025-09-09 22:34:22.471] [KanataManager.swift:3832 buildKanataArguments(configPath:checkOnly:)] 🔧 [KanataArgs] Built arguments: --cfg /Users/malpern/.config/keypath/temp_validation.kbd --udp-port 37001 --check
[2025-09-09 22:34:22.471] [KanataManager.swift:3462 validateConfigWithCLI(_:)] 🔧 [Validation-CLI] Command: /Library/KeyPath/bin/kanata --cfg /Users/malpern/.config/keypath/temp_validation.kbd --udp-port 37001 --check
[2025-09-09 22:34:22.538] [KanataManager.swift:3472 validateConfigWithCLI(_:)] ⏱️ [Validation-CLI] CLI validation completed in 0.067 seconds
[2025-09-09 22:34:22.538] [KanataManager.swift:3477 validateConfigWithCLI(_:)] 📋 [Validation-CLI] Exit code: 0
[2025-09-09 22:34:22.538] [KanataManager.swift:3479 validateConfigWithCLI(_:)] 📋 [Validation-CLI] Output: 22:34:22.4808 [0m[34m[INFO] [0mkanata v1.9.0 starting
22:34:22.4808 [0m[34m[INFO] [0mvalidating config only and exiting
22:34:22.4809 [0m[34m[INFO] [0mprocess unmapped keys: false
22:34:22.4810 [0m[34m[INFO] [0mconfig file is valid
...
[2025-09-09 22:34:22.539] [KanataManager.swift:3484 validateConfigWithCLI(_:)] 🗑️ [Validation-CLI] Temp file cleaned up
[2025-09-09 22:34:22.539] [KanataManager.swift:3487 validateConfigWithCLI(_:)] ✅ [Validation-CLI] CLI validation PASSED
[2025-09-09 22:34:22.539] [KanataManager.swift:3419 validateGeneratedConfig(_:)] 🔍 [Validation] ========== CONFIG VALIDATION END ==========
[2025-09-09 22:34:22.539] [KanataManager.swift:2937 loadExistingMappings()] ⏱️ [Validation] Validation completed in 0.532 seconds
[2025-09-09 22:34:22.539] [KanataManager.swift:2941 loadExistingMappings()] ✅ [Validation] Config validation PASSED
[2025-09-09 22:34:22.539] [KanataManager.swift:3152 parseKanataConfig(_:)] 🔍 [Parse] Found 1 src keys, 1 layer keys, deduplicated to 1 unique mappings
[2025-09-09 22:34:22.539] [KanataManager.swift:2943 loadExistingMappings()] ✅ [Validation] Successfully loaded 1 existing mappings:
[2025-09-09 22:34:22.539] [KanataManager.swift:2945 loadExistingMappings()]    1. caps → esc
[2025-09-09 22:34:22.539] [KanataManager.swift:2962 loadExistingMappings()] 📂 [Validation] ========== STARTUP CONFIG VALIDATION END ==========
[2025-09-09 22:34:22.539] [KanataManager.swift:523 backupCurrentConfig()] 💾 [Backup] Current config backed up successfully
[2025-09-09 22:34:22.540] [ConfigurationService.swift:240 saveConfiguration(keyMappings:)] ✅ [ConfigService] Configuration saved with 2 mappings
[2025-09-09 22:34:22.540] [KanataManager.swift:1765 saveConfiguration(input:output:)] 💾 [Config] Config saved with 2 mappings via ConfigurationService
[2025-09-09 22:34:22.540] [KanataManager+Configuration.swift:93 triggerUDPReload()] 🧪 [UDP Reload] Skipping UDP reload in test environment
[2025-09-09 22:34:22.540] [KanataManager.swift:1786 saveConfiguration(input:output:)] ❌ [Config] UDP reload FAILED: Test environment - UDP disabled
[2025-09-09 22:34:22.540] [KanataManager.swift:1787 saveConfiguration(input:output:)] ❌ [Config] UDP server is required for validation-on-demand - restoring backup
[2025-09-09 22:34:22.541] [KanataManager.swift:536 restoreLastGoodConfig()] 🔄 [Restore] Restored last good config successfully
[2025-09-09 22:34:22.541] [KanataManager.swift:3383 validateGeneratedConfig(_:)] ⏱️ [Validation] UDP validation completed in 0.477 seconds
[2025-09-09 22:34:22.541] [KanataManager.swift:3399 validateGeneratedConfig(_:)] ⚠️ [Validation] UDP validation network error: Invalid or malformed response from server
[2025-09-09 22:34:22.541] [KanataManager.swift:3400 validateGeneratedConfig(_:)] ⚠️ [Validation] Falling back to CLI validation...
[2025-09-09 22:34:22.541] [KanataUDPClient.swift:65 deinit] 📡 [UDP] Client deallocated, connection cleaned up
[2025-09-09 22:34:22.541] [KanataManager.swift:3417 validateGeneratedConfig(_:)] 🖥️ [Validation] Starting CLI validation...
[2025-09-09 22:34:22.541] [KanataManager.swift:3441 validateConfigWithCLI(_:)] 🖥️ [Validation-CLI] Starting CLI validation process...
[2025-09-09 22:34:22.541] [KanataManager.swift:3445 validateConfigWithCLI(_:)] 📝 [Validation-CLI] Creating temp config file: /Users/malpern/.config/keypath/temp_validation.kbd
[2025-09-09 22:34:22.542] [KanataManager.swift:3452 validateConfigWithCLI(_:)] 📝 [Validation-CLI] Temp config written successfully (224 characters)
[2025-09-09 22:34:22.542] [KanataManager.swift:3456 validateConfigWithCLI(_:)] 🔧 [Validation-CLI] Using kanata Test Case '-[KeyPathTests.ErrorHandlingTests testConcurrentConfigurationOperations]' passed (0.751 seconds).
Test Case '-[KeyPathTests.ErrorHandlingTests testConfigGenerationWithInvalidInputOutput]' started.
binary: /Library/KeyPath/bin/kanata
[2025-09-09 22:34:22.542] [PreferencesService.swift:255 buildUDPArguments(port:sessionTimeout:defaultTimeout:)] 🔐 [UDP Launch] Auth token ensured; using environment variable
[2025-09-09 22:34:22.542] [KanataManager.swift:3819 buildKanataArguments(configPath:checkOnly:)] 📡 [KanataArgs] UDP server enabled on port 37001
[2025-09-09 22:34:22.542] [KanataManager.swift:3832 buildKanataArguments(configPath:checkOnly:)] 🔧 [KanataArgs] Built arguments: --cfg /Users/malpern/.config/keypath/temp_validation.kbd --udp-port 37001 --check
[2025-09-09 22:34:22.542] [KanataManager.swift:3462 validateConfigWithCLI(_:)] 🔧 [Validation-CLI] Command: /Library/KeyPath/bin/kanata --cfg /Users/malpern/.config/keypath/temp_validation.kbd --udp-port 37001 --check
[2025-09-09 22:34:22.609] [KanataManager.swift:3472 validateConfigWithCLI(_:)] ⏱️ [Validation-CLI] CLI validation completed in 0.067 seconds
[2025-09-09 22:34:22.609] [KanataManager.swift:3477 validateConfigWithCLI(_:)] 📋 [Validation-CLI] Exit code: 0
[2025-09-09 22:34:22.609] [KanataManager.swift:3479 validateConfigWithCLI(_:)] 📋 [Validation-CLI] Output: 22:34:22.5585 [0m[34m[INFO] [0mkanata v1.9.0 starting
22:34:22.5585 [0m[34m[INFO] [0mvalidating config only and exiting
22:34:22.5586 [0m[34m[INFO] [0mprocess unmapped keys: false
22:34:22.5587 [0m[34m[INFO] [0mconfig file is valid
...
[2025-09-09 22:34:22.610] [KanataManager.swift:3484 validateConfigWithCLI(_:)] 🗑️ [Validation-CLI] Temp file cleaned up
[2025-09-09 22:34:22.610] [KanataManager.swift:3487 validateConfigWithCLI(_:)] ✅ [Validation-CLI] CLI validation PASSED
[2025-09-09 22:34:22.610] [KanataManager.swift:3419 validateGeneratedConfig(_:)] 🔍 [Validation] ========== CONFIG VALIDATION END ==========
[2025-09-09 22:34:22.610] [KanataManager.swift:2937 loadExistingMappings()] ⏱️ [Validation] Validation completed in 0.603 seconds
[2025-09-09 22:34:22.610] [KanataManager.swift:2941 loadExistingMappings()] ✅ [Validation] Config validation PASSED
[2025-09-09 22:34:22.610] [KanataManager.swift:3152 parseKanataConfig(_:)] 🔍 [Parse] Found 1 src keys, 1 layer keys, deduplicated to 1 unique mappings
[2025-09-09 22:34:22.610] [KanataManager.swift:2943 loadExistingMappings()] ✅ [Validation] Successfully loaded 1 existing mappings:
[2025-09-09 22:34:22.610] [KanataManager.swift:2945 loadExistingMappings()]    1. caps → esc
[2025-09-09 22:34:22.610] [KanataManager.swift:2962 loadExistingMappings()] 📂 [Validation] ========== STARTUP CONFIG VALIDATION END ==========
[2025-09-09 22:34:22.610] [KanataManager.swift:523 backupCurrentConfig()] 💾 [Backup] Current config backed up successfully
[2025-09-09 22:34:22.611] [ConfigurationService.swift:240 saveConfiguration(keyMappings:)] ✅ [ConfigService] Configuration saved with 2 mappings
[2025-09-09 22:34:22.611] [KanataManager.swift:1765 saveConfiguration(input:output:)] 💾 [Config] Config saved with 2 mappings via ConfigurationService
[2025-09-09 22:34:22.611] [KanataManager+Configuration.swift:93 triggerUDPReload()] 🧪 [UDP Reload] Skipping UDP reload in test environment
[2025-09-09 22:34:22.611] [KanataManager.swift:1786 saveConfiguration(input:output:)] ❌ [Config] UDP reload FAILED: Test environment - UDP disabled
[2025-09-09 22:34:22.611] [KanataManager.swift:1787 saveConfiguration(input:output:)] ❌ [Config] UDP server is required for validation-on-demand - restoring backup
[2025-09-09 22:34:22.612] [KanataManager.swift:536 restoreLastGoodConfig()] 🔄 [Restore] Restored last good config successfully
[2025-09-09 22:34:22.612] [KanataManager.swift:3383 validateGeneratedConfig(_:)] ⏱️ [Validation] UDP validation completed in 0.547 seconds
[2025-09-09 22:34:22.612] [KanataManager.swift:3399 validateGeneratedConfig(_:)] ⚠️ [Validation] UDP validation network error: Invalid or malformed response from server
[2025-09-09 22:34:22.612] [KanataManager.swift:3400 validateGeneratedConfig(_:)] ⚠️ [Validation] Falling back to CLI validation...
[2025-09-09 22:34:22.612] [KanataUDPClient.swift:65 deinit] 📡 [UDP] Client deallocated, connection cleaned up
[2025-09-09 22:34:22.612] [KanataManager.swift:3417 validateGeneratedConfig(_:)] 🖥️ [Validation] Starting CLI validation...
[2025-09-09 22:34:22.612] [KanataManager.swift:3441 validateConfigWithCLI(_:)] 🖥️ [Validation-CLI] Starting CLI validation process...
[2025-09-09 22:34:22.612] [KanataManager.swift:3445 validateConfigWithCLI(_:)] 📝 [Validation-CLI] Creating temp config file: /Users/malpern/.config/keypath/temp_validation.kbd
[2025-09-09 22:34:22.613] [KanataManager.swift:3452 validateConfigWithCLI(_:)] 📝 [Validation-CLI] Temp config written successfully (224 characters)
[2025-09-09 22:34:22.613] [KanataManager.swift:3456 validateConfigWithCLI(_:)] 🔧 [Validation-CLI] Using kanata binary: /Library/KeyPath/bin/kanata
[2025-09-09 22:34:22.613] [PreferencesService.swift:255 buildUDPArguments(port:sessionTimeout:defaultTimeout:)] 🔐 [UDP Launch] Auth token ensured; using environment variable
[2025-09-09 22:34:22.613] [KanataManager.swift:3819 buildKanataArguments(configPath:checkOnly:)] 📡 [KanataArgs] UDP server enabled on port 37001
[2025-09-09 22:34:22.613] [KanataManager.swift:3832 buildKanataArguments(configPath:checkOnly:)] 🔧 [KanataArgs] Built arguments: --cfg /Users/malpern/.config/keypath/temp_validation.kbd --udp-port 37001 --check
[2025-09-09 22:34:22.613] [KanataManager.swift:3462 validateConfigWithCLI(_:)] 🔧 [Validation-CLI] Command: /Library/KeyPath/bin/kanata --cfg /Users/malpern/.config/keypath/temp_validation.kbd --udp-port 37001 --check
[2025-09-09 22:34:22.680] [KanataManager.swift:3472 validateConfigWithCLI(_:)] ⏱️ [Validation-CLI] CLI validation completed in 0.067 seconds
[2025-09-09 22:34:22.680] [KanataManager.swift:3477 validateConfigWithCLI(_:)] 📋 [Validation-CLI] Exit code: 0
[2025-09-09 22:34:22.680] [KanataManager.swift:3479 validateConfigWithCLI(_:)] 📋 [Validation-CLI] Output: 22:34:22.6364 [0m[34m[INFO] [0mkanata v1.9.0 starting
22:34:22.6364 [0m[34m[INFO] [0mvalidating config only and exiting
22:34:22.6365 [0m[34m[INFO] [0mprocess unmapped keys: false
22:34:22.6366 [0m[34m[INFO] [0mconfig file is valid
...
[2025-09-09 22:34:22.681] [KanataManager.swift:3484 validateConfigWithCLI(_:)] 🗑️ [Validation-CLI] Temp file cleaned up
[2025-09-09 22:34:22.681] [KanataManager.swift:3487 validateConfigWithCLI(_:)] ✅ [Validation-CLI] CLI validation PASSED
[2025-09-09 22:34:22.681] [KanataManager.swift:3419 validateGeneratedConfig(_:)] 🔍 [Validation] ========== CONFIG VALIDATION END ==========
[2025-09-09 22:34:22.681] [KanataManager.swift:2937 loadExistingMappings()] ⏱️ [Validation] Validation completed in 0.674 seconds
[2025-09-09 22:34:22.681] [KanataManager.swift:2941 loadExistingMappings()] ✅ [Validation] Config validation PASSED
[2025-09-09 22:34:22.681] [KanataManager.swift:3152 parseKanataConfig(_:)] 🔍 [Parse] Found 1 src keys, 1 layer keys, deduplicated to 1 unique mappings
[2025-09-09 22:34:22.681] [KanataManager.swift:2943 loadExistingMappings()] ✅ [Validation] Successfully loaded 1 existing mappings:
[2025-09-09 22:34:22.681] [KanataManager.swift:2945 loadExistingMappings()]    1. caps → esc
[2025-09-09 22:34:22.681] [KanataManager.swift:2962 loadExistingMappings()] 📂 [Validation] ========== STARTUP CONFIG VALIDATION END ==========
[2025-09-09 22:34:22.681] [KanataManager.swift:523 backupCurrentConfig()] 💾 [Backup] Current config backed up successfully
[2025-09-09 22:34:22.682] [ConfigurationService.swift:240 saveConfiguration(keyMappings:)] ✅ [ConfigService] Configuration saved with 2 mappings
[2025-09-09 22:34:22.682] [KanataManager.swift:1765 saveConfiguration(input:output:)] 💾 [Config] Config saved with 2 mappings via ConfigurationService
[2025-09-09 22:34:22.682] [KanataManager+Configuration.swift:93 triggerUDPReload()] 🧪 [UDP Reload] Skipping UDP reload in test environment
[2025-09-09 22:34:22.682] [KanataManager.swift:1786 saveConfiguration(input:output:)] ❌ [Config] UDP reload FAILED: Test environment - UDP disabled
[2025-09-09 22:34:22.682] [KanataManager.swift:1787 saveConfiguration(input:output:)] ❌ [Config] UDP server is required for validation-on-demand - restoring backup
[2025-09-09 22:34:22.682] [KanataManager.swift:536 restoreLastGoodConfig()] 🔄 [Restore] Restored last good config successfully
[2025-09-09 22:34:22.683] [KanataManager.swift:3383 validateGeneratedConfig(_:)] ⏱️ [Validation] UDP validation completed in 0.618 seconds
[2025-09-09 22:34:22.683] [KanataManager.swift:3399 validateGeneratedConfig(_:)] ⚠️ [Validation] UDP validation network error: Invalid or malformed response from server
[2025-09-09 22:34:22.683] [KanataManager.swift:3400 validateGeneratedConfig(_:)] ⚠️ [Validation] Falling back to CLI validation...
[2025-09-09 22:34:22.683] [KanataUDPClient.swift:65 deinit] 📡 [UDP] Client deallocated, connection cleaned up
[2025-09-09 22:34:22.683] [KanataManager.swift:3417 validateGeneratedConfig(_:)] 🖥️ [Validation] Starting CLI validation...
[2025-09-09 22:34:22.683] [KanataManager.swift:3441 validateConfigWithCLI(_:)] 🖥️ [Validation-CLI] Starting CLI validation process...
[2025-09-09 22:34:22.683] [KanataManager.swift:3445 validateConfigWithCLI(_:)] 📝 [Validation-CLI] Creating temp config file: /Users/malpern/.config/keypath/temp_validation.kbd
[2025-09-09 22:34:22.683] [KanataManager.swift:3452 validateConfigWithCLI(_:)] 📝 [Validation-CLI] Temp config written successfully (224 characters)
[2025-09-09 22:34:22.683] [KanataManager.swift:3456 validateConfigWithCLI(_:)] 🔧 [Validation-CLI] Using kanata binary: /Library/KeyPath/bin/kanata
[2025-09-09 22:34:22.684] [PreferencesService.swift:255 buildUDPArguments(port:sessionTimeout:defaultTimeout:)] 🔐 [UDP Launch] Auth token ensured; using environment variable
[2025-09-09 22:34:22.684] [KanataManager.swift:3819 buildKanataArguments(configPath:checkOnly:)] 📡 [KanataArgs] UDP server enabled on port 37001
[2025-09-09 22:34:22.684] [KanataManager.swift:3832 buildKanataArguments(configPath:checkOnly:)] 🔧 [KanataArgs] Built arguments: --cfg /Users/malpern/.config/keypath/temp_validation.kbd --udp-port 37001 --check
[2025-09-09 22:34:22.684] [KanataManager.swift:3462 validateConfigWithCLI(_:)] 🔧 [Validation-CLI] Command: /Library/KeyPath/bin/kanata --cfg /Users/malpern/.config/keypath/temp_validation.kbd --udp-port 37001 --check
[2025-09-09 22:34:22.748] [KanataManager.swift:3472 validateConfigWithCLI(_:)] ⏱️ [Validation-CLI] CLI validation completed in 0.064 seconds
[2025-09-09 22:34:22.748] [KanataManager.swift:3477 validateConfigWithCLI(_:)] 📋 [Validation-CLI] Exit code: 0
[2025-09-09 22:34:22.749] [KanataManager.swift:3479 validateConfigWithCLI(_:)] 📋 [Validation-CLI] Output: 22:34:22.7118 [0m[34m[INFO] [0mkanata v1.9.0 starting
22:34:22.7119 [0m[34m[INFO] [0mvalidating config only and exiting
22:34:22.7121 [0m[34m[INFO] [0mprocess unmapped keys: false
22:34:22.7122 [0m[34m[INFO] [0mconfig file is valid
...
[2025-09-09 22:34:22.752] [KanataManager.swift:3484 validateConfigWithCLI(_:)] 🗑️ [Validation-CLI] Temp file cleaned up
[2025-09-09 22:34:22.752] [KanataManager.swift:3487 validateConfigWithCLI(_:)] ✅ [Validation-CLI] CLI validation PASSED
[2025-09-09 22:34:22.752] [KanataManager.swift:3419 validateGeneratedConfig(_:)] 🔍 [Validation] ========== CONFIG VALIDATION END ==========
[2025-09-09 22:34:22.752] [KanataManager.swift:2937 loadExistingMappings()] ⏱️ [Validation] Validation completed in 0.746 seconds
[2025-09-09 22:34:22.752] [KanataManager.swift:2941 loadExistingMappings()] ✅ [Validation] Config validation PASSED
[2025-09-09 22:34:22.752] [KanataManager.swift:3152 parseKanataConfig(_:)] 🔍 [Parse] Found 1 src keys, 1 layer keys, deduplicated to 1 unique mappings
[2025-09-09 22:34:22.752] [KanataManager.swift:2943 loadExistingMappings()] ✅ [Validation] Successfully loaded 1 existing mappings:
[2025-09-09 22:34:22.752] [KanataManager.swift:2945 loadExistingMappings()]    1. caps → esc
[2025-09-09 22:34:22.752] [KanataManager.swift:2962 loadExistingMappings()] 📂 [Validation] ========== STARTUP CONFIG VALIDATION END ==========
[2025-09-09 22:34:22.752] [KanataManager.swift:523 backupCurrentConfig()] 💾 [Backup] Current config backed up successfully
[2025-09-09 22:34:22.753] [ConfigurationService.swift:240 saveConfiguration(keyMappings:)] ✅ [ConfigService] Configuration saved with 2 mappings
[2025-09-09 22:34:22.753] [KanataManager.swift:1765 saveConfiguration(input:output:)] 💾 [Config] Config saved with 2 mappings via ConfigurationService
[2025-09-09 22:34:22.753] [KanataManager+Configuration.swift:93 triggerUDPReload()] 🧪 [UDP Reload] Skipping UDP reload in test environment
[2025-09-09 22:34:22.753] [KanataManager.swift:1786 saveConfiguration(input:output:)] ❌ [Config] UDP reload FAILED: Test environment - UDP disabled
[2025-09-09 22:34:22.753] [KanataManager.swift:1787 saveConfiguration(input:output:)] ❌ [Config] UDP server is required for validation-on-demand - restoring backup
[2025-09-09 22:34:22.754] [KanataManager.swift:536 restoreLastGoodConfig()] 🔄 [Restore] Restored last good config successfully
[2025-09-09 22:34:22.754] [SoundManager.swift:14 playTinkSound()] 🧪 [Sound] Suppressed tink sound in test environment
[2025-09-09 22:34:22.754] [SoundManager.swift:34 playErrorSound()] 🧪 [Sound] Suppressed error beep in test environment
[2025-09-09 22:34:22.754] [SoundManager.swift:14 playTinkSound()] 🧪 [Sound] Suppressed tink sound in test environment
[2025-09-09 22:34:22.754] [SoundManager.swift:34 playErrorSound()] 🧪 [Sound] Suppressed error beep in test environment
[2025-09-09 22:34:22.754] [SoundManager.swift:14 playTinkSound()] 🧪 [Sound] Suppressed tink sound in test environment
[2025-09-09 22:34:22.754] [SoundManager.swift:34 playErrorSound()] 🧪 [Sound] Suppressed error beep in test environment
[2025-09-09 22:34:22.754] [SoundManager.swift:14 playTinkSound()] 🧪 [Sound] Suppressed tink sound in test environment
[2025-09-09 22:34:22.754] [SoundManager.swift:34 playErrorSound()] 🧪 [Sound] Suppressed error beep in test environment
[2025-09-09 22:34:22.754] [SoundManager.swift:14 playTinkSound()] 🧪 [Sound] Suppressed tink sound in test environment
[2025-09-09 22:34:22.754] [SoundManager.swift:34 playErrorSound()] 🧪 [Sound] Suppressed error beep in test environment
[2025-09-09 22:34:22.754] [SoundManager.swift:14 playTinkSound()] 🧪 [Sound] Suppressed tink sound in test environment
[2025-09-09 22:34:22.754] [SoundManager.swift:34 playErrorSound()] 🧪 [Sound] Suppressed error beep in test environment
[2025-09-09 22:34:22.754] [SoundManager.swift:14 playTinkSound()] 🧪 [Sound] Suppressed tink sound in test environment
[2025-09-09 22:34:22.754] [SoundManager.swift:34 playErrorSound()] 🧪 [Sound] Suppressed error beep in test environment
[2025-09-09 22:34:22.754] [SoundManager.swift:14 playTinkSound()] 🧪 [Sound] Suppressed tink sound in test environment
[2025-09-09 22:34:22.755] [SoundManager.swift:34 playErrorSound()] 🧪 [Sound] Suppressed error beep in test environment
[2025-09-09 22:34:22.755] [SoundManager.swift:14 playTinkSound()] 🧪 [Sound] Suppressed tink sound in test environment
[2025-09-09 22:34:22.755] [SoundManager.swift:34 playErrorSound()] 🧪 [Sound] Suppressed error beep in test environment
[2025-09-09 22:34:22.755] [SoundManager.swift:14 playTinkSound()] 🧪 [Sound] Suppressed tink sound in test environment
[2025-09-09 22:34:22.755] [SoundManager.swift:34 playErrorSound()] 🧪 [Sound] Suppressed error beep in test environment
[2025-09-09 22:34:22.756] [ConfigFileWatcher.swift:197 stopWatching()] 📁 [FileWatcher] Stopping all monitoring...
[2025-09-09 22:34:22.756] [ConfigFileWatcher.swift:226 stopWatching()] ✅ [FileWatcher] All monitoring stopped and state cleared
[2025-09-09 22:34:22.756] [ConfigFileWatcher.swift:43 deinit] 📁 [FileWatcher] ConfigFileWatcher deinitialized
[2025-09-09 22:34:22.757] [ProcessLifecycleManager.swift:99 init(kanataManager:)] 🏗️ [ProcessLifecycleManager] Initialized with simplified PID-based tracking and caching
[2025-09-09 22:34:22.757] [ConfigFileWatcher.swift:38 init()] 📁 [FileWatcTest Case '-[KeyPathTests.ErrorHandlingTests testConfigGenerationWithInvalidInputOutput]' passed (0.002 seconds).
Test Case '-[KeyPathTests.ErrorHandlingTests testConfigurationIntegrity]' started.
Test Case '-[KeyPathTests.ErrorHandlingTests testConfigurationIntegrity]' passed (0.008 seconds).
Test Case '-[KeyPathTests.ErrorHandlingTests testConfigurationRoundTrip]' started.
Test Case '-[KeyPathTests.ErrorHandlingTests testConfigurationRoundTrip]' passed (0.001 seconds).
Test Case '-[KeyPathTests.ErrorHandlingTests testConfigWithNonASCIICharacters]' started.
Test Case '-[KeyPathTests.ErrorHandlingTests testConfigWithNonASCIICharacters]' passed (0.003 seconds).
Test Case '-[KeyPathTests.ErrorHandlingTests testConfigWithSpecialKanataCharacters]' started.
/Users/malpern/Library/CloudStorage/Dropbox/code/KeyPath/Tests/KeyPathTests/ErrorHandlingTests.swift:173: error: -[KeyPathTests.ErrorHandlingTests testConfigWithSpecialKanataCharacters] : XCTAssertEqual failed: ("5") is not equal to ("4") - Should have balanced parentheses with special char: (
/Users/malpern/Library/CloudStorage/Dropbox/code/KeyPath/Tests/KeyPathTests/ErrorHandlingTests.swift:173: error: -[KeyPathTests.ErrorHandlingTests testConfigWithSpecialKanataCharacters] : XCTAssertEqual failed: ("4") is not equal to ("5") - Should have balanced parentheses with special char: )
Test Case '-[KeyPathTests.ErrorHandlingTests testConfigWithSpecialKanataCharacters]' failed (0.255 seconds).
Test Case '-[KeyPathTests.ErrorHandlingTests testDirectoryCreationErrorHandling]' started.
her] ConfigFileWatcher initialized with robust monitoring
[2025-09-09 22:34:22.757] [KanataManager.swift:318 init()] 🧪 [KanataManager] Skipping background initialization in test environment
[2025-09-09 22:34:22.758] [ConfigFileWatcher.swift:197 stopWatching()] 📁 [FileWatcher] Stopping all monitoring...
[2025-09-09 22:34:22.758] [ConfigFileWatcher.swift:226 stopWatching()] ✅ [FileWatcher] All monitoring stopped and state cleared
[2025-09-09 22:34:22.758] [ConfigFileWatcher.swift:43 deinit] 📁 [FileWatcher] ConfigFileWatcher deinitialized
[2025-09-09 22:34:22.759] [ProcessLifecycleManager.swift:99 init(kanataManager:)] 🏗️ [ProcessLifecycleManager] Initialized with simplified PID-based tracking and caching
[2025-09-09 22:34:22.759] [ConfigFileWatcher.swift:38 init()] 📁 [FileWatcher] ConfigFileWatcher initialized with robust monitoring
[2025-09-09 22:34:22.759] [KanataManager.swift:318 init()] 🧪 [KanataManager] Skipping background initialization in test environment
[2025-09-09 22:34:22.766] [ConfigFileWatcher.swift:197 stopWatching()] 📁 [FileWatcher] Stopping all monitoring...
[2025-09-09 22:34:22.767] [ConfigFileWatcher.swift:226 stopWatching()] ✅ [FileWatcher] All monitoring stopped and state cleared
[2025-09-09 22:34:22.767] [ConfigFileWatcher.swift:43 deinit] 📁 [FileWatcher] ConfigFileWatcher deinitialized
[2025-09-09 22:34:22.767] [ProcessLifecycleManager.swift:99 init(kanataManager:)] 🏗️ [ProcessLifecycleManager] Initialized with simplified PID-based tracking and caching
[2025-09-09 22:34:22.767] [ConfigFileWatcher.swift:38 init()] 📁 [FileWatcher] ConfigFileWatcher initialized with robust monitoring
[2025-09-09 22:34:22.767] [KanataManager.swift:318 init()] 🧪 [KanataManager] Skipping background initialization in test environment
[2025-09-09 22:34:22.768] [ConfigFileWatcher.swift:197 stopWatching()] 📁 [FileWatcher] Stopping all monitoring...
[2025-09-09 22:34:22.768] [ConfigFileWatcher.swift:226 stopWatching()] ✅ [FileWatcher] All monitoring stopped and state cleared
[2025-09-09 22:34:22.768] [ConfigFileWatcher.swift:43 deinit] 📁 [FileWatcher] ConfigFileWatcher deinitialized
[2025-09-09 22:34:22.768] [ProcessLifecycleManager.swift:99 init(kanataManager:)] 🏗️ [ProcessLifecycleManager] Initialized with simplified PID-based tracking and caching
[2025-09-09 22:34:22.768] [ConfigFileWatcher.swift:38 init()] 📁 [FileWatcher] ConfigFileWatcher initialized with robust monitoring
[2025-09-09 22:34:22.768] [KanataManager.swift:318 init()] 🧪 [KanataManager] Skipping background initialization in test environment
[2025-09-09 22:34:22.771] [ConfigFileWatcher.swift:197 stopWatching()] 📁 [FileWatcher] Stopping all monitoring...
[2025-09-09 22:34:22.771] [ConfigFileWatcher.swift:226 stopWatching()] ✅ [FileWatcher] All monitoring stopped and state cleared
[2025-09-09 22:34:22.771] [ConfigFileWatcher.swift:43 deinit] 📁 [FileWatcher] ConfigFileWatcher deinitialized
[2025-09-09 22:34:22.771] [ProcessLifecycleManager.swift:99 init(kanataManager:)] 🏗️ [ProcessLifecycleManager] Initialized with simplified PID-based tracking and caching
[2025-09-09 22:34:22.771] [ConfigFileWatcher.swift:38 init()] 📁 [FileWatcher] ConfigFileWatcher initialized with robust monitoring
[2025-09-09 22:34:22.771] [KanataManager.swift:318 init()] 🧪 [KanataManager] Skipping background initialization in test environment
[2025-09-09 22:34:23.025] [ConfigFileWatcher.swift:197 stopWatching()] 📁 [FileWatcher] Stopping all monitoring...
[2025-09-09 22:34:23.025] [ConfigFileWatcher.swift:226 stopWatching()] ✅ [FileWatcher] All monitoring stopped and state cleared
[2025-09-09 22:34:23.025] [ConfigFileWatcher.swift:43 deinit] 📁 [FileWatcher] ConfigFileWatcher deinitialized
[2025-09-09 22:34:23.026] [ProcessLifecycleManager.swift:99 init(kanataManager:)] 🏗️ [ProcessLifecycleManager] Initialized with simplified PID-based tracking and caching
[2025-09-09 22:34:23.026] [ConfigFileWatcher.swift:38 init()] 📁 [FileWatcher] ConfigFileWatcher initialized with robust monitoring
[2025-09-09 22:34:23.026] [KanataManager.swift:318 init()] 🧪 [KanataManager] Skipping background initialization in test environment
[2025-09-09 22:34:23.026] [ConfigFileWatcher.swift:52 suppressEvents(for:reason:)] 🔇 [FileWatcher] Suppressing events for 1.0s - Internal saveConfiguration
[2025-09-09 22:34:23.026] [KanataManager.swift:2917 loadExistingMappings()] 📂 [Validation] ========== STARTUP CONFIG VALIDATION BEGIN ==========
[2025-09-09 22:34:23.026] [KanataManager.swift:2928 loadExistingMappings()] 📖 [Validation] Reading config file from: /Users/malpern/.config/keypath/keypath.kbd
[2025-09-09 22:34:23.026] [KanataManager.swift:2930 loadExistingMappings()] 📖 [Validation] Config file size: 224 characters
[2025-09-09 22:34:23.026] [KanataManager.swift:2933 loadExistingMappings()] 🔍 [Validation] Starting validation of existing configuration...
[2025-09-09 22:34:23.026] [KanataManager.swift:3368 validateGeneratedConfig(_:)] 🔍 [Validation] ========== CONFIG VALIDATION START ==========
[2025-09-09 22:34:23.026] [KanataManager.swift:3369 validateGeneratedConfig(_:)] 🔍 [Validation] Config size: 224 characters
[2025-09-09 22:34:23.026] [KanataManager.swift:3373 validateGeneratedConfig(_:)] 📡 [Validation] UDP port configured: 37001
[2025-09-09 22:34:23.026] [KanataManager.swift:3377 validateGeneratedConfig(_:)] 📡 [Validation] Checking UDP server availability on port 37001...
[2025-09-09 22:34:23.026] [KanataUDPClient.swift:203 checkServerStatus(authToken:)] 🌐 [UDP] Checking server status for 127.0.0.1:37001
[2025-09-09 22:34:23.026] [KanataUDPClient.swift:487 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Starting request E38E67A6-AC35-46B9-A8F4-69A5439D4141 to 127.0.0.1:37001
[2025-09-09 22:34:23.026] [KanataUDPClient.swift:511 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Sending message to 127.0.0.1:37001 (30 bytes) [requestId: E38E67A6-AC35-46B9-A8F4-69A5439D4141]
[2025-09-09 22:34:23.026] [KanataUDPClient.swift:514 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Message content: {"RequestCurrentLayerName":{}} [requestId: E38E67A6-AC35-46B9-A8F4-69A5439D4141]
[2025-09-09 22:34:23.026] [KanataUDPClient.swift:429 getOrCreateConnection()] 📡 [UDP] Created new connection to 127.0.0.1:37001
[2025-09-09 22:34:23.026] [KanataUDPClient.swift:420 getOrCreateConnection()] 📡 [UDP] Connection state: preparing
[2025-09-09 22:34:23.027] [KanataUDPClient.swift:420 getOrCreateConnection()] 📡 [UDP] Connection state: ready
[2025-09-09 22:34:23.081] [KanataUDPClient.swift:546 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Local endpoint: 127.0.0.1:50805 [requestId: E38E67A6-AC35-46B9-A8F4-69A5439D4141]
[2025-09-09 22:34:23.081] [KanataUDPClient.swift:553 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Arming receive handler BEFORE send to prevent race condition [requestId: E38E67A6-AC35-46B9-A8F4-69A5439D4141]
[2025-09-09 22:34:23.081] [KanataUDPClient.swift:592 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Sending message after receive handler is armed [requestId: E38E67A6-AC35-46B9-A8F4-69A5439D4141]
[2025-09-09 22:34:23.081] [KanataUDPClient.swift:607 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] ✅ Message sent from local endpoint: 127.0.0.1:50805 [requestId: E38E67A6-AC35-46B9-A8F4-69A5439D4141]
[2025-09-09 22:34:23.082] [KanataUDPClient.swift:611 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] ✅ Message sent - receive handler already armed [requestId: E38E67A6-AC35-46B9-A8F4-69A5439D4141]
[2025-09-09 22:34:23.082] [KanataUDPClient.swift:573 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] ✅ Received response: 15 bytes [requestId: E38E67A6-AC35-46B9-A8F4-69A5439D4141]
[2025-09-09 22:34:23.082] [KanataUDPClient.swift:575 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Response context: Network.NWConnection.ContentContext [requestId: E38E67A6-AC35-46B9-A8F4-69A5439D4141]
[2025-09-09 22:34:23.082] [KanataUDPClient.swift:212 checkServerStatus(authToken:)] 🌐 [UDP] Server response: "AuthRequired"

[2025-09-09 22:34:23.082] [KanataUDPClient.swift:216 checkServerStatus(authToken:)] ✅ [UDP] Server is responding (auth required)
[2025-09-09 22:34:23.082] [KanataUDPClient.swift:120 authenticate(token:clientName:)] 🔐 [UDP] Attempting authentication
[2025-09-09 22:34:23.082] [KanataUDPClient.swift:487 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Starting request C4B0D785-AD49-4B9D-BBE2-48FBA6198AF1 to 127.0.0.1:37001
[2025-09-09 22:34:23.082] [KanataUDPClient.swift:511 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Sending message to 127.0.0.1:37001 (96 bytes) [requestId: C4B0D785-AD49-4B9D-BBE2-48FBA6198AF1]
[2025-09-09 22:34:23.082] [KanataUDPClient.swift:514 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Message content: {"Authenticate":{"client_name":"KeyPath","token":"***"}} [requestId: C4B0D785-AD49-4B9D-BBE2-48FBA6198AF1]
[2025-09-09 22:34:23.082] [KanataUDPClient.swift:546 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Local endpoint: 127.0.0.1:50805 [requestId: C4B0D785-AD49-4B9D-BBE2-48FBA6198AF1]
[2025-09-09 22:34:23.082] [KanataUDPClient.swift:553 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Arming receive handler BEFORE send to prevent race condition [requestId: C4B0D785-AD49-4B9D-BBE2-48FBA6198AF1]
[2025-09-09 22:34:23.082] [KanataUDPClient.swift:592 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Sending message after receive handler is armed [requestId: C4B0D785-AD49-4B9D-BBE2-48FBA6198AF1]
[2025-09-09 22:34:23.082] [KanataUDPClient.swift:607 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] ✅ Message sent from local endpoint: 127.0.0.1:50805 [requestId: C4B0D785-AD49-4B9D-BBE2-48FBA6198AF1]
[2025-09-09 22:34:23.082] [KanataUDPClient.swift:611 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] ✅ Message sent - receive handler already armed [requestId: C4B0D785-AD49-4B9D-BBE2-48FBA6198AF1]
[2025-09-09 22:34:23.082] [KanataUDPClient.swift:573 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] ✅ Received response: 90 bytes [requestId: C4B0D785-AD49-4B9D-BBE2-48FBA6198AF1]
[2025-09-09 22:34:23.082] [KanataUDPClient.swift:575 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Response context: Network.NWConnection.ContentContext [requestId: C4B0D785-AD49-4B9D-BBE2-48FBA6198AF1]
[2025-09-09 22:34:23.082] [KanataUDPClient.swift:140 authenticate(token:clientName:)] ✅ [UDP] Authentication successful
[2025-09-09 22:34:23.082] [KanataUDPClient.swift:141 authenticate(token:clientName:)] 🔐 [UDP] Session established (expires in 1800s)
[2025-09-09 22:34:23.082] [KanataManager.swift:3379 validateGeneratedConfig(_:)] 📡 [Validation] UDP server is AVAILABLE, using UDP validation
[2025-09-09 22:34:23.083] [KanataUDPClient.swift:487 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Starting request C9C5B6B1-7F77-4871-8D6E-E506F043F797 to 127.0.0.1:37001
[2025-09-09 22:34:23.083] [KanataUDPClient.swift:511 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Sending message to 127.0.0.1:37001 (312 bytes) [requestId: C9C5B6B1-7F77-4871-8D6E-E506F043F797]
[2025-09-09 22:34:23.083] [KanataUDPClient.swift:514 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Message content: {"ValidateConfig":{"session_id":"***","config_content":";; Generated by KeyPath\n;; 1 key mapping(s) configured\n;;\n;; SAFETY FEATURES:\n;; - process-unmapped-keys no: Only process explicitly mapped keys\n\n(defcfg\n  process-unmapped-keys no\n)\n\n(defsrc\n  caps\n)\n\n(deflayer base\n  esc\n)"}} [requestId: C9C5B6B1-7F77-4871-8D6E-E506F043F797]
[2025-09-09 22:34:23.083] [KanataUDPClient.swift:546 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Local endpoint: 127.0.0.1:50805 [requestId: C9C5B6B1-7F77-4871-8D6E-E506F043F797]
[2025-09-09 22:34:23.083] [KanataUDPClient.swift:553 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Arming receive handler BEFORE send to prevent race condition [requestId: C9C5B6B1-7F77-4871-8D6E-E506F043F797]
[2025-09-09 22:34:23.083] [KanataUDPClient.swift:592 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Sending message after receive handler is armed [requestId: C9C5B6B1-7F77-4871-8D6E-E506F043F797]
[2025-09-09 22:34:23.083] [KanataUDPClient.swift:607 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] ✅ Message sent from local endpoint: 127.0.0.1:50805 [requestId: C9C5B6B1-7F77-4871-8D6E-E506F043F797]
[2025-09-09 22:34:23.083] [KanataUDPClient.swift:611 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] ✅ Message sent - receive handler already armed [requestId: C9C5B6B1-7F77-4871-8D6E-E506F043F797]
[2025-09-09 22:34:23.083] [KanataUDPClient.swift:573 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] ✅ Received response: 313 bytes [requestId: C9C5B6B1-7F77-4871-8D6E-E506F043F797]
[2025-09-09 22:34:23.083] [KanataUDPClient.swift:575 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Response context: Network.NWConnection.ContentContext [requestId: C9C5B6B1-7F77-4871-8D6E-E506F043F797]
[2025-09-09 22:34:23.083] [KanataUDPClient.swift:307 validateConfig(_:)] ❌ [UDP] Config validation error: invalidResponse
[2025-09-09 22:34:23.083] [KanataManager.swift:3383 validateGeneratedConfig(_:)] ⏱️ [Validation] UDP validation completed in 0.000 seconds
[2025-09-09 22:34:23.083] [KanataManager.swift:3399 validateGeneratedConfig(_:)] ⚠️ [Validation] UDP validation network error: Invalid or malformed response from server
[2025-09-09 22:34:23.083] [KanataManager.swift:3400 validateGeneratedConfig(_:)] ⚠️ [Validation] Falling back to CLI validation...
[2025-09-09 22:34:23.083] [KanataUDPClient.swift:65 deinit] 📡 [UDP] Client deallocated, connection cleaned up
[2025-09-09 22:34:23.083] [KanataManager.swift:3417 validateGeneratedConfig(_:)] 🖥️ [Validation] Starting CLI validation...
[2025-09-09 22:34:23.083] [KanataManager.swift:3441 validateConfigWithCLI(_:)] 🖥️ [Validation-CLI] Starting CLI validation process...
[2025-09-09 22:34:23.083] [KanataManager.swift:3445 validateConfigWithCLI(_:)] 📝 [Validation-CLI] Creating temp config file: /Users/malpern/.config/keypath/temp_validation.kbd
[2025-09-09 22:34:23.083] [KanataManager.swift:3452 validateConfigWithCLI(_:)] 📝 [Validation-CLI] Temp config written successfully (224 characters)
[2025-09-09 22:34:23.083] [KanataManager.swift:3456 validateConfigWithCLI(_:)] 🔧 [Validation-CLI] Using kanata binary: /Library/KeyPath/bin/kanata
[2025-09-09 22:34:23.084] [PreferencesService.swift:255 buildUDPArguments(port:sessionTimeout:defaultTimeout:)] 🔐 [UDP Launch] Auth token ensured; using environment variable
[2025-09-09 22:34:23.084] [KanataManager.swift:3819 buildKanataArguments(configPath:checkOnly:)] 📡 [KanataArgs] UDP server enabled on port 37001
[2025-09-09 22:34:23.084] [KanataManager.swift:3832 buildKanataArguments(configPath:checkOnly:)] 🔧 [KanataArgs] Built arguments: --cfg /Users/malpern/.config/keypath/temp_validation.kbd --udp-port 37001 --check
[2025-09-09 22:34:23.084] [KanataManager.swift:3462 validateConfigWithCLI(_:)] 🔧 [Validation-CLI] Command: /Library/KeyPath/bin/kanata --cfg /Users/malpern/.config/keypath/temp_validation.kbd --udp-port 37001 --check
[2025-09-09 22:34:23.147] [KanataManager.swift:3472 validateConfigWithCLI(_:)] ⏱️ [Validation-CLI] CLI validation completed in 0.064 seconds
[2025-09-09 22:34:23.147] [KanataManager.swift:3477 validateConfigWithCLI(_:)] 📋 [Validation-CLI] Exit code: 0
[2025-09-09 22:34:23.147] [KanataManager.swift:3479 validateConfigWithCLI(_:)] 📋 [Validation-CLI] Output: 22:34:23.0962 [0m[34m[INFO] [0mkanata v1.9.0 starting
22:34:23.0962 [0m[34m[INFO] [0mvalidating config only and exiting
22:34:23.0963 [0m[34m[INFO] [0mprocess unmapped keys: false
22:34:23.0964 [0m[34m[INFO] [0mconfig file is valid
...
[2025-09-09 22:34:23.148] [KanataManager.swift:3484 validateConfigWithCLI(_:)] 🗑️ [Validation-CLI] Temp file cleaned up
[2025-09-09 22:34:23.148] [KanataManager.swift:3487 validateConfigWithCLI(_:)] ✅ [Validation-CLI] CLI validation PASSED
[2025-09-09 22:34:23.148] [KanataManager.swift:3419 validateGeneratedConfig(_:)] 🔍 [Validation] ========== CONFIG VALIDATION END ==========
[2025-09-09 22:34:23.148] [KanataManager.swift:2937 loadExistingMappings()] ⏱️ [Validation] Validation completed in 0.122 seconds
[2025-09-09 22:34:23.148] [KanataManager.swift:2941 loadExistingMappings()] ✅ [Validation] Config validation PASSED
[2025-09-09 22:34:23.148] [KanataManager.swift:3152 parseKanataConfig(_:)] 🔍 [Parse] Found 1 src keTest Case '-[KeyPathTests.ErrorHandlingTests testDirectoryCreationErrorHandling]' passed (0.123 seconds).
Test Case '-[KeyPathTests.ErrorHandlingTests testExtremeKeyCodeHandling]' started.
Test Case '-[KeyPathTests.ErrorHandlingTests testExtremeKeyCodeHandling]' passed (0.000 seconds).
Test Case '-[KeyPathTests.ErrorHandlingTests testInvalidKeyInputHandling]' started.
Test Case '-[KeyPathTests.ErrorHandlingTests testInvalidKeyInputHandling]' passed (0.000 seconds).
Test Case '-[KeyPathTests.ErrorHandlingTests testInvalidPathHandling]' started.
/Users/malpern/Library/CloudStorage/Dropbox/code/KeyPath/Tests/KeyPathTests/ErrorHandlingTests.swift:327: error: -[KeyPathTests.ErrorHandlingTests testInvalidPathHandling] : XCTAssertTrue failed - Config path should be in Library directory
/Users/malpern/Library/CloudStorage/Dropbox/code/KeyPath/Tests/KeyPathTests/ErrorHandlingTests.swift:328: error: -[KeyPathTests.ErrorHandlingTests testInvalidPathHandling] : XCTAssertTrue failed - Config path should contain KeyPath
Test Case '-[KeyPathTests.ErrorHandlingTests testInvalidPathHandling]' failed (0.001 seconds).
Test Case '-[KeyPathTests.ErrorHandlingTests testKanataProcessErrorHandling]' started.
Test Case '-[KeyPathTests.ErrorHandlingTests testKanataProcessErrorHandling]' passed (2.598 seconds).
Test Case '-[KeyPathTests.ErrorHandlingTests testMemoryPressureErrorHandling]' started.
Test Case '-[KeyPathTests.ErrorHandlingTests testMemoryPressureErrorHandling]' passed (0.015 seconds).
Test Case '-[KeyPathTests.ErrorHandlingTests testNilAndOptionalHandling]' started.
Test Case '-[KeyPathTests.ErrorHandlingTests testNilAndOptionalHandling]' passed (0.001 seconds).
Test Case '-[KeyPathTests.ErrorHandlingTests testPermissionErrorHandling]' started.
Test Case '-[KeyPathTests.ErrorHandlingTests testPermissionErrorHandling]' passed (0.023 seconds).
Test Case '-[KeyPathTests.ErrorHandlingTests testResourceCleanupErrorHandling]' started.
ys, 1 layer keys, deduplicated to 1 unique mappings
[2025-09-09 22:34:23.148] [KanataManager.swift:2943 loadExistingMappings()] ✅ [Validation] Successfully loaded 1 existing mappings:
[2025-09-09 22:34:23.148] [KanataManager.swift:2945 loadExistingMappings()]    1. caps → esc
[2025-09-09 22:34:23.148] [KanataManager.swift:2962 loadExistingMappings()] 📂 [Validation] ========== STARTUP CONFIG VALIDATION END ==========
[2025-09-09 22:34:23.148] [KanataManager.swift:523 backupCurrentConfig()] 💾 [Backup] Current config backed up successfully
[2025-09-09 22:34:23.148] [ConfigurationService.swift:240 saveConfiguration(keyMappings:)] ✅ [ConfigService] Configuration saved with 1 mappings
[2025-09-09 22:34:23.148] [KanataManager.swift:1765 saveConfiguration(input:output:)] 💾 [Config] Config saved with 1 mappings via ConfigurationService
[2025-09-09 22:34:23.148] [KanataManager+Configuration.swift:93 triggerUDPReload()] 🧪 [UDP Reload] Skipping UDP reload in test environment
[2025-09-09 22:34:23.148] [KanataManager.swift:1786 saveConfiguration(input:output:)] ❌ [Config] UDP reload FAILED: Test environment - UDP disabled
[2025-09-09 22:34:23.148] [KanataManager.swift:1787 saveConfiguration(input:output:)] ❌ [Config] UDP server is required for validation-on-demand - restoring backup
[2025-09-09 22:34:23.149] [KanataManager.swift:536 restoreLastGoodConfig()] 🔄 [Restore] Restored last good config successfully
[2025-09-09 22:34:23.149] [SoundManager.swift:14 playTinkSound()] 🧪 [Sound] Suppressed tink sound in test environment
[2025-09-09 22:34:23.149] [SoundManager.swift:34 playErrorSound()] 🧪 [Sound] Suppressed error beep in test environment
[2025-09-09 22:34:23.149] [ConfigFileWatcher.swift:197 stopWatching()] 📁 [FileWatcher] Stopping all monitoring...
[2025-09-09 22:34:23.149] [ConfigFileWatcher.swift:226 stopWatching()] ✅ [FileWatcher] All monitoring stopped and state cleared
[2025-09-09 22:34:23.149] [ConfigFileWatcher.swift:43 deinit] 📁 [FileWatcher] ConfigFileWatcher deinitialized
[2025-09-09 22:34:23.149] [ProcessLifecycleManager.swift:99 init(kanataManager:)] 🏗️ [ProcessLifecycleManager] Initialized with simplified PID-based tracking and caching
[2025-09-09 22:34:23.149] [ConfigFileWatcher.swift:38 init()] 📁 [FileWatcher] ConfigFileWatcher initialized with robust monitoring
[2025-09-09 22:34:23.149] [KanataManager.swift:318 init()] 🧪 [KanataManager] Skipping background initialization in test environment
[2025-09-09 22:34:23.150] [ConfigFileWatcher.swift:197 stopWatching()] 📁 [FileWatcher] Stopping all monitoring...
[2025-09-09 22:34:23.150] [ConfigFileWatcher.swift:226 stopWatching()] ✅ [FileWatcher] All monitoring stopped and state cleared
[2025-09-09 22:34:23.150] [ConfigFileWatcher.swift:43 deinit] 📁 [FileWatcher] ConfigFileWatcher deinitialized
[2025-09-09 22:34:23.150] [ProcessLifecycleManager.swift:99 init(kanataManager:)] 🏗️ [ProcessLifecycleManager] Initialized with simplified PID-based tracking and caching
[2025-09-09 22:34:23.150] [ConfigFileWatcher.swift:38 init()] 📁 [FileWatcher] ConfigFileWatcher initialized with robust monitoring
[2025-09-09 22:34:23.150] [KanataManager.swift:318 init()] 🧪 [KanataManager] Skipping background initialization in test environment
[2025-09-09 22:34:23.150] [ConfigFileWatcher.swift:197 stopWatching()] 📁 [FileWatcher] Stopping all monitoring...
[2025-09-09 22:34:23.150] [ConfigFileWatcher.swift:226 stopWatching()] ✅ [FileWatcher] All monitoring stopped and state cleared
[2025-09-09 22:34:23.150] [ConfigFileWatcher.swift:43 deinit] 📁 [FileWatcher] ConfigFileWatcher deinitialized
[2025-09-09 22:34:23.150] [ProcessLifecycleManager.swift:99 init(kanataManager:)] 🏗️ [ProcessLifecycleManager] Initialized with simplified PID-based tracking and caching
[2025-09-09 22:34:23.151] [ConfigFileWatcher.swift:38 init()] 📁 [FileWatcher] ConfigFileWatcher initialized with robust monitoring
[2025-09-09 22:34:23.151] [KanataManager.swift:318 init()] 🧪 [KanataManager] Skipping background initialization in test environment
[2025-09-09 22:34:23.151] [ConfigFileWatcher.swift:197 stopWatching()] 📁 [FileWatcher] Stopping all monitoring...
[2025-09-09 22:34:23.151] [ConfigFileWatcher.swift:226 stopWatching()] ✅ [FileWatcher] All monitoring stopped and state cleared
[2025-09-09 22:34:23.151] [ConfigFileWatcher.swift:43 deinit] 📁 [FileWatcher] ConfigFileWatcher deinitialized
[2025-09-09 22:34:23.152] [ProcessLifecycleManager.swift:99 init(kanataManager:)] 🏗️ [ProcessLifecycleManager] Initialized with simplified PID-based tracking and caching
[2025-09-09 22:34:23.152] [ConfigFileWatcher.swift:38 init()] 📁 [FileWatcher] ConfigFileWatcher initialized with robust monitoring
[2025-09-09 22:34:23.152] [KanataManager.swift:318 init()] 🧪 [KanataManager] Skipping background initialization in test environment
[2025-09-09 22:34:23.152] [KanataManager.swift:1505 checkLaunchDaemonStatus()] 🧪 [TestEnvironment] Skipping launchctl check - returning mock data
[2025-09-09 22:34:23.152] [KanataManager.swift:1861 performUpdateStatus()] ⚠️ [Status] LaunchDaemon service state changed: true
[2025-09-09 22:34:23.152] [KanataManager.swift:1871 performUpdateStatus()] 🔄 [Status] LaunchDaemon service running - cleared stale diagnostics
[2025-09-09 22:34:23.671] [ProcessLifecycleManager.swift:133 detectConflicts()] 🔍 [ProcessLifecycleManager] Detecting conflicts...
[2025-09-09 22:34:23.671] [ProcessLifecycleManager.swift:137 detectConflicts()] 🧪 [TestEnvironment] Skipping process conflict detection - returning clean state
[2025-09-09 22:34:23.672] [KanataManager.swift:1583 verifyNoProcessConflicts()] 🔍 [Verify] Process status: 0 managed, 0 conflicts
[2025-09-09 22:34:23.672] [KanataManager.swift:1596 verifyNoProcessConflicts()] ✅ [Verify] Clean single-process architecture confirmed - no conflicts
[2025-09-09 22:34:23.672] [KanataManager.swift:895 startKanata()] 📞 [Trace] startKanata() called from:
[2025-09-09 22:34:23.681] [KanataManager.swift:897 startKanata()] 📞 [Trace] [0] 0   KeyPathPackageTests                 0x000000010d4e618c $s7KeyPath13KanataManagerC05startC0yyYaFTY0_ + 268
[2025-09-09 22:34:23.681] [KanataManager.swift:897 startKanata()] 📞 [Trace] [1] 1   KeyPathPackageTests                 0x000000010d8ccdf9 $s12KeyPathTests013ErrorHandlingC0C017testKanataProcessdE0yyYaKFTQ3_ + 1
[2025-09-09 22:34:23.681] [KanataManager.swift:897 startKanata()] 📞 [Trace] [2] 2   KeyPathPackageTests                 0x000000010d8cd6dd $s12KeyPathTests013ErrorHandlingC0C017testKanataProcessdE0yyYaKFyyYacfU_ToTQ1_ + 1
[2025-09-09 22:34:23.681] [KanataManager.swift:897 startKanata()] 📞 [Trace] [3] 3   KeyPathPackageTests                 0x000000010d8cd8c1 $s12KeyPathTests013ErrorHandlingC0C017testKanataProcessdE0yyYaKFyyYacfU_ToTATQ0_ + 1
[2025-09-09 22:34:23.681] [KanataManager.swift:897 startKanata()] 📞 [Trace] [4] 4   KeyPathPackageTests                 0x000000010d8bdbb1 $sIeghH_IeAgH_TRTQ0_ + 1
[2025-09-09 22:34:23.681] [KanataManager.swift:952 performStartKanata()] 🚀 [Start] ========== KANATA START ATTEMPT ==========
[2025-09-09 22:34:23.681] [KanataManager.swift:953 performStartKanata()] 🚀 [Start] Time: 2025-09-10 02:34:23 +0000
[2025-09-09 22:34:23.681] [KanataManager.swift:954 performStartKanata()] 🚀 [Start] Starting Kanata with synchronization lock...
[2025-09-09 22:34:23.682] [KanataManager.swift:985 performStartKanata()] 🔍 [Start] Kanata is already running - checking health before restart
[2025-09-09 22:34:23.682] [KanataManager.swift:1505 checkLaunchDaemonStatus()] 🧪 [TestEnvironment] Skipping launchctl check - returning mock data
[2025-09-09 22:34:23.682] [KanataManager.swift:992 performStartKanata()] 🔍 [Start] LaunchDaemon confirms service is running (PID: unknown)
[2025-09-09 22:34:23.682] [KanataManager.swift:998 performStartKanata()] ⏳ [Start] Process is running and within UDP grace period (0.5s < 10.0s) - skipping UDP health check
[2025-09-09 22:34:23.682] [KanataManager.swift:1636 stopKanata()] 🛑 [Stop] Stopping Kanata LaunchDaemon service...
[2025-09-09 22:34:23.682] [KanataManager.swift:1604 stopLaunchDaemonService()] 🛑 [LaunchDaemon] Stopping Kanata service via PrivilegedOperations...
[2025-09-09 22:34:24.714] [KanataManager.swift:1642 stopKanata()] ✅ [Stop] Successfully stopped Kanata LaunchDaemon service
[2025-09-09 22:34:24.715] [LaunchDaemonPIDCache.swift:83 invalidateCache()] 🗑️ [PIDCache] Cache invalidated
[2025-09-09 22:34:24.715] [ProcessLifecycleManager.swift:125 unregisterProcess()] 🗑️ [ProcessLifecycleManager] Unregistered process
[2025-09-09 22:34:24.715] [KanataManager.swift:1636 stopKanata()] 🛑 [Stop] Stopping Kanata LaunchDaemon service...
[2025-09-09 22:34:24.715] [KanataManager.swift:1604 stopLaunchDaemonService()] 🛑 [LaunchDaemon] Stopping Kanata service via PrivilegedOperations...
[2025-09-09 22:34:25.748] [KanataManager.swift:1642 stopKanata()] ✅ [Stop] Successfully stopped Kanata LaunchDaemon service
[2025-09-09 22:34:25.749] [LaunchDaemonPIDCache.swift:83 invalidateCache()] 🗑️ [PIDCache] Cache invalidated
[2025-09-09 22:34:25.749] [ProcessLifecycleManager.swift:125 unregisterProcess()] 🗑️ [ProcessLifecycleManager] Unregistered process
[2025-09-09 22:34:25.749] [ConfigFileWatcher.swift:197 stopWatching()] 📁 [FileWatcher] Stopping all monitoring...
[2025-09-09 22:34:25.749] [ConfigFileWatcher.swift:226 stopWatching()] ✅ [FileWatcher] All monitoring stopped and state cleared
[2025-09-09 22:34:25.749] [ConfigFileWatcher.swift:43 deinit] 📁 [FileWatcher] ConfigFileWatcher deinitialized
[2025-09-09 22:34:25.751] [ProcessLifecycleManager.swift:99 init(kanataManager:)] 🏗️ [ProcessLifecycleManager] Initialized with simplified PID-based tracking and caching
[2025-09-09 22:34:25.751] [ConfigFileWatcher.swift:38 init()] 📁 [FileWatcher] ConfigFileWatcher initialized with robust monitoring
[2025-09-09 22:34:25.751] [KanataManager.swift:318 init()] 🧪 [KanataManager] Skipping background initialization in test environment
[2025-09-09 22:34:25.765] [ConfigFileWatcher.swift:197 stopWatching()] 📁 [FileWatcher] Stopping all monitoring...
[2025-09-09 22:34:25.765] [ConfigFileWatcher.swift:226 stopWatching()] ✅ [FileWatcher] All monitoring stopped and state cleared
[2025-09-09 22:34:25.765] [ConfigFileWatcher.swift:43 deinit] 📁 [FileWatcher] ConfigFileWatcher deinitialized
[2025-09-09 22:34:25.766] [ProcessLifecycleManager.swift:99 init(kanataManager:)] 🏗️ [ProcessLifecycleManager] Initialized with simplified PID-based tracking and caching
[2025-09-09 22:34:25.766] [ConfigFileWatcher.swift:38 init()] 📁 [FileWatcher] ConfigFileWatcher initialized with robust monitoring
[2025-09-09 22:34:25.766] [KanataManager.swift:318 init()] 🧪 [KanataManager] Skipping background initialization in test environment
[2025-09-09 22:34:25.766] [ConfigFileWatcher.swift:197 stopWatching()] 📁 [FileWatcher] Stopping all monitoring...
[2025-09-09 22:34:25.766] [ConfigFileWatcher.swift:226 stopWatching()] ✅ [FileWatcher] All monitoring stopped and state cleared
[2025-09-09 22:34:25.766] [ConfigFileWatcher.swift:43 deinit] 📁 [FileWatcher] ConfigFileWatcher deinitialized
[2025-09-09 22:34:25.767] [ProcessLifecycleManager.swift:99 init(kanataManager:)] 🏗️ [ProcessLifecycleManager] Initialized with simplified PID-based tracking and caching
[2025-09-09 22:34:25.767] [ConfigFileWatcher.swift:38 init()] 📁 [FileWatcher] ConfigFileWatcher initialized with robust monitoring
[2025-09-09 22:34:25.767] [KanataManager.swift:318 init()] 🧪 [KanataManager] Skipping background initialization in test environment
[2025-09-09 22:34:25.767] [PermissionOracle.swift:118 init()] 🔮 [Oracle] Permission Oracle initialized - ending the chaos!
[2025-09-09 22:34:25.768] [PermissionOracle.swift:148 currentSnapshot()] 🔮 [Oracle] Test mode snapshot generated (non-blocking)
[2025-09-09 22:34:25.790] [ConfigFileWatcher.swift:197 stopWatching()] 📁 [FileWatcher] Stopping all monitoring...
[2025-09-09 22:34:25.790] [ConfigFileWatcher.swift:226 stopWatching()] ✅ [FileWatcher] All monitoring stopped and state cleared
[2025-09-09 22:34:25.790] [ConfigFileWatcher.swift:43 deinit] 📁 [FileWatcher] ConfigFileWatcher deinitialized
[2025-09-09 22:34:25.790] [ProcessLifecycleManager.swift:99 init(kanataManager:)] 🏗️ [ProcessLifecycleManager] Initialized with simplified PID-based tracking and caching
[2025-09-09 22:34:25.790] [ConfigFileWatcher.swift:38 init()] 📁 [FileWatcher] ConfigFileWatcher initialized with robust monitoring
[2025-09-09 22:34:25.790] [KanataManager.swift:318 init()] 🧪 [KanataManager] Skipping background initialization in test environment
[2025-09-09 22:34:25.790] [KeyboardCapture.swift:199 setupEventTap()] 🧪 [KeyboardCapture] Test environment detected – skipping CGEvent tap setup
[2025-09-09 22:34:25.790] [KeyboardCapture.swift:199 setupEventTap()] 🧪 [KeyboardCapture] Test environment detected – skipping CGEvent tap setup
[2025-09-09 22:34:25.790] [KeyboardCapture.swift:199 setupEventTap()] 🧪 [KeyboardCapture] Test environment detected – skipping CGEvent tap setup
[2025-09-09 22:34:25.790] [KeyboardCapture.swift:199 setupEventTap()] 🧪 [KeyboardCapture] Test environment detected – skipping CGEvent tap setup
[2025-09-09 22:34:25.790] [KeyboardCapture.swift:199 setupEventTap()] 🧪 [KeyboardCapture] Test environment detected – skipping CGEvent tap setup
[2025-09-09 22:34:25.790] [KeyboardCapture.swift:199 setupEventTap()] 🧪 [KeyboardCapture] Test environment detected – skipping CGEvent tap setup
[2025-09-09 22:34:25.790] [KeyboardCapture.swift:199 setupEventTap()] 🧪 [KeyboardCapture] Test environment detected – skipping CGEvent tap setup
[2025-09-09 22:34:25.790] [KeyboardCapture.swift:199 setupEventTap()] 🧪 [KeyboardCapture] Test environment detected – skipping CGEvent tap setup
[2025-09-09 22:34:25.790] [KeyboardCapture.swift:199 setupEventTap()] 🧪 [KeyboardCapture] Test environment detected – skipping CGEvent tap setup
[2025-09-09 22:34:25.790] [KeyboardCapture.swift:199 setupEventTap()] 🧪 [KeyboardCapture] Test environment detected – skipping CGEvent tap setup
[2025-09-09 22:34:25.790] [KeyboardCapture.swift:199 setupEventTap()] 🧪 [KeyboardCapture] Test environment detected – skipping CGEvent tap setup
[2025-09-09 22:34:25.790] [KeyboardCapture.swift:199 setupEventTap()] 🧪 [KeyboardCapture] Test environment detected – skipping CGEvent tap setup
[2025-09-09 22:34:25.791] [KeyboardCapture.swift:199 setupEventTap()] 🧪 [KeyboardCapture] Test environment detected – skipping CGEvent tap setup
[2025-09-09 22:34:25.791] [KeyboardCapture.swift:199 setupEventTap()] 🧪 [KeyboardCapture] Test environment detected – skipping CGEvent tap setup
[2025-09-09 22:34:25.791] [KeyboardCapture.swift:199 setupEventTap()] 🧪 [KeyboardCapture] Test environment detected – skipping CGEvent tap setup
[2025-09-09 22:34:25.791] [KeyboardCapture.swift:199 setupEventTap()] 🧪 [KeyboardCapture] Test environment detected – skipping CGEvent tap setup
[2025-09-09 22:34:25.791] [KeyboardCapture.swift:199 setupEventTap()] 🧪 [KeyboardCapture] Test environment detected – skipping CGEvent tap setup
[2025-09-09 22:34:25.791] [KeyboardCapture.swift:199 setupEventTap()] 🧪 [KeyboardCapture] Test environment detected – skipping CGEvent tap setup
[2025-09-09 22:34:25.791] [KeyboardCapture.swift:199 setupEventTap()] 🧪 [KeyboardCapture] Test environment detected – skipping CGEvent tap setup
[2025-09-09 22:34:25.791] [KeyboardCapture.swift:199 setupEventTap()] 🧪 [KeyboardCapture] Test environment detected – skipping CGEvent tap setup
[2025-09-09 22:34:25.791] [KeyboardCapture.swift:391 startEmergencyMonitoring(callback:)] 🧪 [KeyboardCapture] Test environment – skipping emergency monitoring tap
[2025-09-09 22:34:25.791] [KeyboardCapture.swift:391 startEmergencyMonitoring(callback:)] 🧪 [KeyboardCapture] Test environment – skipping emergency monitoring tap
[2025-09-09 22:34:25.791] [KeyboardCapture.swift:391 startEmergencyMonitoring(callback:)] 🧪 [KeyboardCapture] Test environment – skipping emergency monitoring tap
[2025-09-09 22:34:25.791] [KeyboardCapture.swift:391 startEmergencyMonitoring(callbacTest Case '-[KeyPathTests.ErrorHandlingTests testResourceCleanupErrorHandling]' passed (0.001 seconds).
Test Case '-[KeyPathTests.ErrorHandlingTests testSequenceGenerationErrorHandling]' started.
/Users/malpern/Library/CloudStorage/Dropbox/code/KeyPath/Tests/KeyPathTests/ErrorHandlingTests.swift:418: error: -[KeyPathTests.ErrorHandlingTests testSequenceGenerationErrorHandling] : XCTAssertTrue failed - Multi-char sequence should be wrapped or converted: 'a	b
c' -> 'a	b
c'
/Users/malpern/Library/CloudStorage/Dropbox/code/KeyPath/Tests/KeyPathTests/ErrorHandlingTests.swift:418: error: -[KeyPathTests.ErrorHandlingTests testSequenceGenerationErrorHandling] : XCTAssertTrue failed - Multi-char sequence should be wrapped or converted: '!@#$%' -> '!@#$%'
Test Case '-[KeyPathTests.ErrorHandlingTests testSequenceGenerationErrorHandling]' failed (0.002 seconds).
Test Case '-[KeyPathTests.ErrorHandlingTests testServiceInstallationErrorHandling]' started.
Test Case '-[KeyPathTests.ErrorHandlingTests testServiceInstallationErrorHandling]' passed (0.206 seconds).
Test Case '-[KeyPathTests.ErrorHandlingTests testSpecialCharacterKeyMapping]' started.
Test Case '-[KeyPathTests.ErrorHandlingTests testSpecialCharacterKeyMapping]' passed (0.000 seconds).
Test Suite 'ErrorHandlingTests' failed at 2025-09-09 22:34:25.999.
	 Executed 21 tests, with 6 failures (0 unexpected) in 4.124 (4.127) seconds
Test Suite 'FDADetectionTests' started at 2025-09-09 22:34:26.000.
Test Case '-[KeyPathTests.FDADetectionTests testDetectionModalTiming]' started.
Test Case '-[KeyPathTests.FDADetectionTests testDetectionModalTiming]' passed (0.000 seconds).
Test Case '-[KeyPathTests.FDADetectionTests testFDACaching]' started.
Test Case '-[KeyPathTests.FDADetectionTests testFDACaching]' passed (0.000 seconds).
Test Case '-[KeyPathTests.FDADetectionTests testFDACheckPerformance]' started.
/Users/malpern/Library/CloudStorage/Dropbox/code/KeyPath/Tests/KeyPathTests/FDADetectionTests.swift:154: Test Case '-[KeyPathTests.FDADetectionTests testFDACheckPerformance]' measured [Time, seconds] average: 0.001, relative standard deviation: 107.221%, values: [0.003931, 0.000801, 0.000777, 0.000625, 0.000515, 0.000525, 0.000607, 0.000537, 0.000536, 0.000504], performanceMetricID:com.apple.XCTPerformanceMetric_WallClockTime, baselineName: "", baselineAverage: , polarity: prefers smaller, maxPercentRegression: 10.000%, maxPercentRelativeStandardDeviation: 10.000%, maxRegression: 0.100, maxStandardDeviation: 0.100
Test Case '-[KeyPathTests.FDADetectionTests testFDACheckPerformance]' passed (0.268 seconds).
Test Case '-[KeyPathTests.FDADetectionTests testFDADetectionWithoutAccess]' started.
Test Case '-[KeyPathTests.FDADetectionTests testFDADetectionWithoutAccess]' passed (0.004 seconds).
Test Case '-[KeyPathTests.FDADetectionTests testProtectedPathDetection]' started.
Test Case '-[KeyPathTests.FDADetectionTests testProtectedPathDetection]' passed (0.002 seconds).
Test Case '-[KeyPathTests.FDADetectionTests testRestartTimingWindow]' started.
Test Case '-[KeyPathTests.FDADetectionTests testRestartTimingWindow]' passed (0.003 seconds).
Test Case '-[KeyPathTests.FDADetectionTests testWizardStatePreservation]' started.
Test Case '-[KeyPathTests.FDADetectionTests testWizardStatePreservation]' passed (0.002 seconds).
Test Suite 'FDADetectionTests' passed at 2025-09-09 22:34:26.279.
	 Executed 7 tests, with 0 failures (0 unexpected) in 0.278 (0.279) seconds
Test Suite 'IntegrationTestSuite' started at 2025-09-09 22:34:26.279.
Test Case '-[KeyPathTests.IntegrationTestSuite testAllIntegrationScenarios]' started.
Test Case '-[KeyPathTests.IntegrationTestSuite testAllIntegrationScenarios]' passed (0.002 seconds).
Test Case '-[KeyPathTests.IntegrationTestSuite testEndToEndPerformance]' started.
Test Case '-[KeyPathTests.IntegrationTestSuite testEndToEndPerformance]' passed (0.001 seconds).
Test Case '-[KeyPathTests.IntegrationTestSuite testErrorRecovery]' started.
Test Case '-[KeyPathTests.IntegrationTestSuite testErrorRecovery]' passed (0.001 seconds).
Test Case '-[KeyPathTests.IntegrationTestSuite testNewUserCompleteJourney]' started.
Test Case '-[KeyPathTests.IntegrationTestSuite testNewUserCompleteJourney]' passed (0.001 seconds).
Test Case '-[KeyPathTests.IntegrationTestSuite testPartialInstallationRecovery]' started.
Test Case '-[KeyPathTests.IntegrationTestSuite testPartialInstallationRecovery]' passed (0.001 seconds).
Test Case '-[KeyPathTests.IntegrationTestSuite testPowerUserWorkflow]' started.
Test Case '-[KeyPathTests.IntegrationTestSuite testPowerUserWorkflow]' passed (0.001 seconds).
Test Case '-[KeyPathTests.IntegrationTestSuite testSecurityCompliance]' started.
Test Case '-[KeyPathTests.IntegrationTestSuite testSecurityCompliance]' passed (0.001 seconds).
Test Case '-[KeyPathTests.IntegrationTestSuite testStressScenario]' started.
Test Case '-[KeyPathTests.IntegrationTestSuite testStressScenario]' passed (0.001 seconds).
Test Suite 'IntegrationTestSuite' passed at 2025-09-09 22:34:26.288.
	 Executed 8 tests, with 0 failures (0 unexpected) in 0.008 (0.009) seconds
Test Suite 'KanataManagerTests' started at 2025-09-09 22:34:26.288.
Test Case '-[KeyPathTests.KanataManagerTests testConfigPathProperty]' started.
Test Case '-[KeyPathTests.KanataManagerTests testConfigPathProperty]' passed (0.001 seconds).
Test Case '-[KeyPathTests.KanataManagerTests testConfigValidation]' started.
Test Case '-[KeyPathTests.KanataManagerTests testConfigValidation]' passed (0.067 seconds).
Test Case '-[KeyPathTests.KanataManagerTests testDiagnosticManagement]' started.
Test Case '-[KeyPathTests.KanataManagerTests testDiagnosticManagement]' passed (0.001 seconds).
Test Case '-[KeyPathTests.KanataManagerTests testInitialState]' started.
Test Case '-[KeyPathTests.KanataManagerTests testInitialState]' passed (0.001 seconds).
Test Case '-[KeyPathTests.KanataManagerTests testInstallationStatus]' started.
k:)] 🧪 [KeyboardCapture] Test environment – skipping emergency monitoring tap
[2025-09-09 22:34:25.791] [KeyboardCapture.swift:391 startEmergencyMonitoring(callback:)] 🧪 [KeyboardCapture] Test environment – skipping emergency monitoring tap
[2025-09-09 22:34:25.791] [KeyboardCapture.swift:391 startEmergencyMonitoring(callback:)] 🧪 [KeyboardCapture] Test environment – skipping emergency monitoring tap
[2025-09-09 22:34:25.791] [KeyboardCapture.swift:391 startEmergencyMonitoring(callback:)] 🧪 [KeyboardCapture] Test environment – skipping emergency monitoring tap
[2025-09-09 22:34:25.791] [KeyboardCapture.swift:391 startEmergencyMonitoring(callback:)] 🧪 [KeyboardCapture] Test environment – skipping emergency monitoring tap
[2025-09-09 22:34:25.791] [KeyboardCapture.swift:391 startEmergencyMonitoring(callback:)] 🧪 [KeyboardCapture] Test environment – skipping emergency monitoring tap
[2025-09-09 22:34:25.791] [KeyboardCapture.swift:391 startEmergencyMonitoring(callback:)] 🧪 [KeyboardCapture] Test environment – skipping emergency monitoring tap
[2025-09-09 22:34:25.791] [KeyboardCapture.swift:391 startEmergencyMonitoring(callback:)] 🧪 [KeyboardCapture] Test environment – skipping emergency monitoring tap
[2025-09-09 22:34:25.791] [KeyboardCapture.swift:391 startEmergencyMonitoring(callback:)] 🧪 [KeyboardCapture] Test environment – skipping emergency monitoring tap
[2025-09-09 22:34:25.791] [KeyboardCapture.swift:391 startEmergencyMonitoring(callback:)] 🧪 [KeyboardCapture] Test environment – skipping emergency monitoring tap
[2025-09-09 22:34:25.791] [KeyboardCapture.swift:391 startEmergencyMonitoring(callback:)] 🧪 [KeyboardCapture] Test environment – skipping emergency monitoring tap
[2025-09-09 22:34:25.791] [KeyboardCapture.swift:391 startEmergencyMonitoring(callback:)] 🧪 [KeyboardCapture] Test environment – skipping emergency monitoring tap
[2025-09-09 22:34:25.791] [KeyboardCapture.swift:391 startEmergencyMonitoring(callback:)] 🧪 [KeyboardCapture] Test environment – skipping emergency monitoring tap
[2025-09-09 22:34:25.791] [KeyboardCapture.swift:391 startEmergencyMonitoring(callback:)] 🧪 [KeyboardCapture] Test environment – skipping emergency monitoring tap
[2025-09-09 22:34:25.791] [KeyboardCapture.swift:391 startEmergencyMonitoring(callback:)] 🧪 [KeyboardCapture] Test environment – skipping emergency monitoring tap
[2025-09-09 22:34:25.791] [KeyboardCapture.swift:391 startEmergencyMonitoring(callback:)] 🧪 [KeyboardCapture] Test environment – skipping emergency monitoring tap
[2025-09-09 22:34:25.791] [KeyboardCapture.swift:391 startEmergencyMonitoring(callback:)] 🧪 [KeyboardCapture] Test environment – skipping emergency monitoring tap
[2025-09-09 22:34:25.791] [ConfigFileWatcher.swift:197 stopWatching()] 📁 [FileWatcher] Stopping all monitoring...
[2025-09-09 22:34:25.791] [ConfigFileWatcher.swift:226 stopWatching()] ✅ [FileWatcher] All monitoring stopped and state cleared
[2025-09-09 22:34:25.791] [ConfigFileWatcher.swift:43 deinit] 📁 [FileWatcher] ConfigFileWatcher deinitialized
[2025-09-09 22:34:25.791] [ProcessLifecycleManager.swift:99 init(kanataManager:)] 🏗️ [ProcessLifecycleManager] Initialized with simplified PID-based tracking and caching
[2025-09-09 22:34:25.791] [ConfigFileWatcher.swift:38 init()] 📁 [FileWatcher] ConfigFileWatcher initialized with robust monitoring
[2025-09-09 22:34:25.791] [KanataManager.swift:318 init()] 🧪 [KanataManager] Skipping background initialization in test environment
[2025-09-09 22:34:25.793] [ConfigFileWatcher.swift:197 stopWatching()] 📁 [FileWatcher] Stopping all monitoring...
[2025-09-09 22:34:25.793] [ConfigFileWatcher.swift:226 stopWatching()] ✅ [FileWatcher] All monitoring stopped and state cleared
[2025-09-09 22:34:25.793] [ConfigFileWatcher.swift:43 deinit] 📁 [FileWatcher] ConfigFileWatcher deinitialized
[2025-09-09 22:34:25.793] [ProcessLifecycleManager.swift:99 init(kanataManager:)] 🏗️ [ProcessLifecycleManager] Initialized with simplified PID-based tracking and caching
[2025-09-09 22:34:25.793] [ConfigFileWatcher.swift:38 init()] 📁 [FileWatcher] ConfigFileWatcher initialized with robust monitoring
[2025-09-09 22:34:25.793] [KanataManager.swift:318 init()] 🧪 [KanataManager] Skipping background initialization in test environment
[2025-09-09 22:34:25.794] [KanataBinaryDetector.swift:64 detectCurrentStatus()] 🔍 [KanataBinaryDetector] Starting unified kanata binary detection
[2025-09-09 22:34:25.863] [PackageManager.swift:176 detectCodeSigningStatus(at:)] 🔍 [PackageManager] Code signing output for /Library/KeyPath/bin/kanata: Executable=/Library/KeyPath/bin/kanata
Identifier=kanata
Format=Mach-O thin (arm64)
CodeDirectory v=20500 size=6418 flags=0x10000(runtime) hashes=195+2 location=embedded
VersionPlatform=1
VersionMin=720896
VersionSDK=1703936
Hash type=sha256 size=32
CandidateCDHash sha256=44d44c777a2b4fcea335922f14b6fa6a2f1a8648
CandidateCDHashFull sha256=44d44c777a2b4fcea335922f14b6fa6a2f1a8648a44dbf901911eac3c3a137d7
Hash choices=sha256
CMSDigest=44d44c777a2b4fcea335922f14b6fa6a2f1a8648a44dbf901911eac3c3a137d7
CMSDigestType=2
Executable Segment base=0
Executable Segment limit=1654784
Executable Segment flags=0x1
Page size=16384
CDHash=44d44c777a2b4fcea335922f14b6fa6a2f1a8648
Signature size=8974
Authority=Developer ID Application: Micah Alpern (X2RKZ5TG99)
Authority=Developer ID Certification Authority
Authority=Apple Root CA
Timestamp=Sep 1, 2025 at 10:45:48 AM
Info.plist=not bound
TeamIdentifier=X2RKZ5TG99
Runtime Version=26.0.0
Sealed Resources=none
Internal requirements count=1 size=168

[2025-09-09 22:34:25.864] [KanataBinaryDetector.swift:119 checkSystemInstallation()] 🔍 [KanataBinaryDetector] System binary signing: developerIDSigned(authority: "Developer ID Application: Micah Alpern (X2RKZ5TG99)")
[2025-09-09 22:34:25.864] [KanataBinaryDetector.swift:68 detectCurrentStatus()] ✅ [KanataBinaryDetector] System installation detected
[2025-09-09 22:34:25.864] [KanataBinaryDetector.swift:64 detectCurrentStatus()] 🔍 [KanataBinaryDetector] Starting unified kanata binary detection
[2025-09-09 22:34:25.932] [PackageManager.swift:176 detectCodeSigningStatus(at:)] 🔍 [PackageManager] Code signing output for /Library/KeyPath/bin/kanata: Executable=/Library/KeyPath/bin/kanata
Identifier=kanata
Format=Mach-O thin (arm64)
CodeDirectory v=20500 size=6418 flags=0x10000(runtime) hashes=195+2 location=embedded
VersionPlatform=1
VersionMin=720896
VersionSDK=1703936
Hash type=sha256 size=32
CandidateCDHash sha256=44d44c777a2b4fcea335922f14b6fa6a2f1a8648
CandidateCDHashFull sha256=44d44c777a2b4fcea335922f14b6fa6a2f1a8648a44dbf901911eac3c3a137d7
Hash choices=sha256
CMSDigest=44d44c777a2b4fcea335922f14b6fa6a2f1a8648a44dbf901911eac3c3a137d7
CMSDigestType=2
Executable Segment base=0
Executable Segment limit=1654784
Executable Segment flags=0x1
Page size=16384
CDHash=44d44c777a2b4fcea335922f14b6fa6a2f1a8648
Signature size=8974
Authority=Developer ID Application: Micah Alpern (X2RKZ5TG99)
Authority=Developer ID Certification Authority
Authority=Apple Root CA
Timestamp=Sep 1, 2025 at 10:45:48 AM
Info.plist=not bound
TeamIdentifier=X2RKZ5TG99
Runtime Version=26.0.0
Sealed Resources=none
Internal requirements count=1 size=168

[2025-09-09 22:34:25.932] [KanataBinaryDetector.swift:119 checkSystemInstallation()] 🔍 [KanataBinaryDetector] System binary signing: developerIDSigned(authority: "Developer ID Application: Micah Alpern (X2RKZ5TG99)")
[2025-09-09 22:34:25.932] [KanataBinaryDetector.swift:68 detectCurrentStatus()] ✅ [KanataBinaryDetector] System installation detected
[2025-09-09 22:34:25.932] [KanataBinaryDetector.swift:64 detectCurrentStatus()] 🔍 [KanataBinaryDetector] Starting unified kanata binary detection
[2025-09-09 22:34:25.998] [PackageManager.swift:176 detectCodeSigningStatus(at:)] 🔍 [PackageManager] Code signing output for /Library/KeyPath/bin/kanata: Executable=/Library/KeyPath/bin/kanata
Identifier=kanata
Format=Mach-O thin (arm64)
CodeDirectory v=20500 size=6418 flags=0x10000(runtime) hashes=195+2 location=embedded
VersionPlatform=1
VersionMin=720896
VersionSDK=1703936
Hash type=sha256 size=32
CandidateCDHash sha256=44d44c777a2b4fcea335922f14b6fa6a2f1a8648
CandidateCDHashFull sha256=44d44c777a2b4fcea335922f14b6fa6a2f1a8648a44dbf901911eac3c3a137d7
Hash choices=sha256
CMSDigest=44d44c777a2b4fcea335922f14b6fa6a2f1a8648a44dbf901911eac3c3a137d7
CMSDigestType=2
Executable Segment base=0
Executable Segment limit=1654784
Executable Segment flags=0x1
Page size=16384
CDHash=44d44c777a2b4fcea335922f14b6fa6a2f1a8648
Signature size=8974
Authority=Developer ID Application: Micah Alpern (X2RKZ5TG99)
Authority=Developer ID Certification Authority
Authority=Apple Root CA
Timestamp=Sep 1, 2025 at 10:45:48 AM
Info.plist=not bound
TeamIdentifier=X2RKZ5TG99
Runtime Version=26.0.0
Sealed Resources=none
Internal requirements count=1 size=168

[2025-09-09 22:34:25.998] [KanataBinaryDetector.swift:119 checkSystemInstallation()] 🔍 [KanataBinaryDetector] System binary signing: developerIDSigned(authority: "Developer ID Application: Micah Alpern (X2RKZ5TG99)")
[2025-09-09 22:34:25.998] [KanataBinaryDetector.swift:68 detectCurrentStatus()] ✅ [KanataBinaryDetector] System installation detected
[2025-09-09 22:34:25.999] [ConfigFileWatcher.swift:197 stopWatching()] 📁 [FileWatcher] Stopping all monitoring...
[2025-09-09 22:34:25.999] [ConfigFileWatcher.swift:226 stopWatching()] ✅ [FileWatcher] All monitoring stopped and state cleared
[2025-09-09 22:34:25.999] [ConfigFileWatcher.swift:43 deinit] 📁 [FileWatcher] ConfigFileWatcher deinitialized
[2025-09-09 22:34:25.999] [ProcessLifecycleManager.swift:99 init(kanataManager:)] 🏗️ [ProcessLifecycleManager] Initialized with simplified PID-based tracking and caching
[2025-09-09 22:34:25.999] [ConfigFileWatcher.swift:38 init()] 📁 [FileWatcher] ConfigFileWatcher initialized with robust monitoring
[2025-09-09 22:34:25.999] [KanataManager.swift:318 init()] 🧪 [KanataManager] Skipping background initialization in test environment
[2025-09-09 22:34:25.999] [ConfigFileWatcher.swift:197 stopWatching()] 📁 [FileWatcher] Stopping all monitoring...
[2025-09-09 22:34:25.999] [ConfigFileWatcher.swift:226 stopWatching()] ✅ [FileWatcher] All monitoring stopped and state cleared
[2025-09-09 22:34:25.999] [ConfigFileWatcher.swift:43 deinit] 📁 [FileWatcher] ConfigFileWatcher deinitialized
No FDA access to: /Users/malpern/Library/Mail
No FDA access to: /Users/malpern/Library/Messages
Has FDA access to: /Users/malpern/Library/Safari/Bookmarks.plist
🧪 Testing: New User Complete Journey
📝 Description: Clean install → Setup → First use → Configuration → Daily use
✅ PASSED: New User Complete Journey
---
🧪 Testing: Partial Installation Recovery
📝 Description: User with partial install → Automatic recovery → Full functionality
✅ PASSED: Partial Installation Recovery
---
🧪 Testing: Power User Daily Workflow
📝 Description: Multiple config changes → Service restarts → Heavy usage
✅ PASSED: Power User Daily Workflow
---
🧪 Testing: Error Recovery and Resilience
📝 Description: Service failures → Automatic recovery → Continued operation
✅ PASSED: Error Recovery and Resilience
---
🧪 Testing: Security and Root Privileges
📝 Description: Verify root execution → Permission validation → Security compliance
✅ PASSED: Security and Root Privileges
---
📊 INTEGRATION TEST RESULTS:
✅ Passed: 5/5
❌ Failed: 0/5
[2025-09-09 22:34:26.289] [ProcessLifecycleManager.swift:99 init(kanataManager:)] 🏗️ [ProcessLifecycleManager] Initialized with simplified PID-based tracking and caching
[2025-09-09 22:34:26.289] [ConfigFileWatcher.swift:38 init()] 📁 [FileWatcher] ConfigFileWatcher initialized with robust monitoring
[2025-09-09 22:34:26.289] [KanataManager.swift:318 init()] 🧪 [KanataManager] Skipping background initialization in test environment
[2025-09-09 22:34:26.290] [ConfigFileWatcher.swift:197 stopWatching()] 📁 [FileWatcher] Stopping all monitoring...
[2025-09-09 22:34:26.290] [ConfigFileWatcher.swift:226 stopWatching()] ✅ [FileWatcher] All monitoring stopped and state cleared
[2025-09-09 22:34:26.290] [ConfigFileWatcher.swift:43 deinit] 📁 [FileWatcher] ConfigFileWatcher deinitialized
[2025-09-09 22:34:26.290] [ProcessLifecycleManager.swift:99 init(kanataManager:)] 🏗️ [ProcessLifecycleManager] Initialized with simplified PID-based tracking and caching
[2025-09-09 22:34:26.290] [ConfigFileWatcher.swift:38 init()] 📁 [FileWatcher] ConfigFileWatcher initialized with robust monitoring
[2025-09-09 22:34:26.290] [KanataManager.swift:318 init()] 🧪 [KanataManager] Skipping background initialization in test environment
[2025-09-09 22:34:26.291] [KanataManager+Configuration.swift:53 validateConfigFile()] 📄 [Validation] Using file-based validation
[2025-09-09 22:34:26.356] [ConfigurationService.swift:324 validateConfigViaFile()] ✅ [ConfigService] File validation passed
[2025-09-09 22:34:26.357] [ConfigFileWatcher.swift:197 stopWatching()] 📁 [FileWatcher] Stopping all monitoring...
[2025-09-09 22:34:26.357] [ConfigFileWatcher.swift:226 stopWatching()] ✅ [FileWatcher] All monitoring stopped and state cleared
[2025-09-09 22:34:26.357] [ConfigFileWatcher.swift:43 deinit] 📁 [FileWatcher] ConfigFileWatcher deinitialized
[2025-09-09 22:34:26.358] [ProcessLifecycleManager.swift:99 init(kanataManager:)] 🏗️ [ProcessLifecycleManager] Initialized with simplified PID-based tracking and caching
[2025-09-09 22:34:26.358] [ConfigFileWatcher.swift:38 init()] 📁 [FileWatcher] ConfigFileWatcher initialized with robust monitoring
[2025-09-09 22:34:26.358] [KanataManager.swift:318 init()] 🧪 [KanataManager] Skipping background initialization in test environment
[2025-09-09 22:34:26.358] [KanataManager.swift:330 addDiagnostic(_:)] ❌ [Diagnostic] Test Error: Test description
[2025-09-09 22:34:26.358] [ConfigFileWatcher.swift:197 stopWatching()] 📁 [FileWatcher] Stopping all monitoring...
[2025-09-09 22:34:26.358] [ConfigFileWatcher.swift:226 stopWatching()] ✅ [FileWatcher] All monitoring stopped and state cleared
[2025-09-09 22:34:26.359] [ConfigFileWatcher.swift:43 deinit] 📁 [FileWatcher] ConfigFileWatcher deinitialized
[2025-09-09 22:34:26.359] [ProcessLifecycleManager.swift:99 init(kanataManager:)] 🏗️ [ProcessLifecycleManager] Initialized with simplified PID-based tracking and caching
[2025-09-09 22:34:26.359] [ConfigFileWatcher.swift:38 init()] 📁 [FileWatcher] ConfigFileWatcher initialized with robust monitoring
[2025-09-09 22:34:26.359] [KanataManager.swift:318 init()] 🧪 [KanataManager] Skipping background initialization in test environment
[2025-09-09 22:34:26.360] [ConfigFileWatcher.swift:197 stopWatching()] 📁 [FileWatcher] Stopping all monitoring...
[2025-09-09 22:34:26.360] [ConfigFileWatcher.swift:226 stopWatching()] ✅ [FileWatcher] All monitoring stopped and state cleared
[2025-09-09 22:34:26.360] [ConfigFileWatcher.swift:43 deinit] 📁 [FileWatcher] ConfigFileWatcher deinitialized
[2025-09-09 22:34:26.360] [ProcessLifecycleManager.swift:99 init(kanataManager:)] 🏗️ [ProcessLifecycleManager] Initialized with simplified PID-based tracking and caching
[2025-09-09 22:34:26.360] [ConfigFileWatcher.swift:38 init()] 📁 [FileWatcher] ConfigFileWatcher initialized with robust monitoring
[2025-09-09 22:34:26.360] [KanataManager.swift:318 init()] 🧪 [KanataManager] Skipping background initialization in test environment
[2025-09-09 22:34:26.360] [KanataBinaryDetector.swift:64 detectCurrentStatus()] 🔍 [KanataBinaryDetector] Starting unified kanata binary detection
[2025-09-09 22:34:26.429] [PackageManager.swift:176 detectCodeSigningStatus(at:)] 🔍 [PackageManager] Code signing output for /Library/KeyPath/bin/kanata: Executable=/Library/KeyPath/bin/kanata
Identifier=kanata
Format=Mach-O thin (arm64)
CodeDirectory v=20500 size=6418 flags=0x10000(runtime) hashes=195+2 location=embedded
VersionPlatform=1
VersionMin=720896
VersionSDK=1703936
Hash type=sha256 size=32
CandidateCDHash sha256=44d44c777a2b4fcea335922f14b6fa6a2f1a8648
CandidateCDHashFull sha256=44d44c777a2b4fcea335922f14b6fa6a2f1a8648a44dbf901911eac3c3a137d7
Hash choices=sha256
CMSDigest=44d44c777a2b4fcTest Case '-[KeyPathTests.KanataManagerTests testInstallationStatus]' passed (0.070 seconds).
Test Case '-[KeyPathTests.KanataManagerTests testKeyMappingStorage]' started.
Test Case '-[KeyPathTests.KanataManagerTests testKeyMappingStorage]' passed (0.001 seconds).
Test Case '-[KeyPathTests.KanataManagerTests testPerformanceConfigValidation]' started.
Test Case '-[KeyPathTests.KanataManagerTests testPerformanceConfigValidation]' passed (0.068 seconds).
Test Case '-[KeyPathTests.KanataManagerTests testSystemDiagnostics]' started.
Test Case '-[KeyPathTests.KanataManagerTests testSystemDiagnostics]' passed (0.269 seconds).
Test Suite 'KanataManagerTests' passed at 2025-09-09 22:34:26.768.
	 Executed 8 tests, with 0 failures (0 unexpected) in 0.478 (0.479) seconds
Test Suite 'KanataUDPClientTests' started at 2025-09-09 22:34:26.768.
Test Case '-[KeyPathTests.KanataUDPClientTests testAuthenticationPayloadSizeValidation]' started.
Test Case '-[KeyPathTests.KanataUDPClientTests testAuthenticationPayloadSizeValidation]' passed (0.001 seconds).
Test Case '-[KeyPathTests.KanataUDPClientTests testAuthenticationPerformance]' started.
ea335922f14b6fa6a2f1a8648a44dbf901911eac3c3a137d7
CMSDigestType=2
Executable Segment base=0
Executable Segment limit=1654784
Executable Segment flags=0x1
Page size=16384
CDHash=44d44c777a2b4fcea335922f14b6fa6a2f1a8648
Signature size=8974
Authority=Developer ID Application: Micah Alpern (X2RKZ5TG99)
Authority=Developer ID Certification Authority
Authority=Apple Root CA
Timestamp=Sep 1, 2025 at 10:45:48 AM
Info.plist=not bound
TeamIdentifier=X2RKZ5TG99
Runtime Version=26.0.0
Sealed Resources=none
Internal requirements count=1 size=168

[2025-09-09 22:34:26.429] [KanataBinaryDetector.swift:119 checkSystemInstallation()] 🔍 [KanataBinaryDetector] System binary signing: developerIDSigned(authority: "Developer ID Application: Micah Alpern (X2RKZ5TG99)")
[2025-09-09 22:34:26.429] [KanataBinaryDetector.swift:68 detectCurrentStatus()] ✅ [KanataBinaryDetector] System installation detected
[2025-09-09 22:34:26.429] [ConfigFileWatcher.swift:197 stopWatching()] 📁 [FileWatcher] Stopping all monitoring...
[2025-09-09 22:34:26.429] [ConfigFileWatcher.swift:226 stopWatching()] ✅ [FileWatcher] All monitoring stopped and state cleared
[2025-09-09 22:34:26.429] [ConfigFileWatcher.swift:43 deinit] 📁 [FileWatcher] ConfigFileWatcher deinitialized
[2025-09-09 22:34:26.430] [ProcessLifecycleManager.swift:99 init(kanataManager:)] 🏗️ [ProcessLifecycleManager] Initialized with simplified PID-based tracking and caching
[2025-09-09 22:34:26.430] [ConfigFileWatcher.swift:38 init()] 📁 [FileWatcher] ConfigFileWatcher initialized with robust monitoring
[2025-09-09 22:34:26.430] [KanataManager.swift:318 init()] 🧪 [KanataManager] Skipping background initialization in test environment
[2025-09-09 22:34:26.430] [ConfigFileWatcher.swift:197 stopWatching()] 📁 [FileWatcher] Stopping all monitoring...
[2025-09-09 22:34:26.430] [ConfigFileWatcher.swift:226 stopWatching()] ✅ [FileWatcher] All monitoring stopped and state cleared
[2025-09-09 22:34:26.430] [ConfigFileWatcher.swift:43 deinit] 📁 [FileWatcher] ConfigFileWatcher deinitialized
[2025-09-09 22:34:26.431] [ProcessLifecycleManager.swift:99 init(kanataManager:)] 🏗️ [ProcessLifecycleManager] Initialized with simplified PID-based tracking and caching
[2025-09-09 22:34:26.431] [ConfigFileWatcher.swift:38 init()] 📁 [FileWatcher] ConfigFileWatcher initialized with robust monitoring
[2025-09-09 22:34:26.431] [KanataManager.swift:318 init()] 🧪 [KanataManager] Skipping background initialization in test environment
[2025-09-09 22:34:26.431] [KanataManager+Configuration.swift:53 validateConfigFile()] 📄 [Validation] Using file-based validation
[2025-09-09 22:34:26.498] [ConfigurationService.swift:324 validateConfigViaFile()] ✅ [ConfigService] File validation passed
[2025-09-09 22:34:26.499] [ConfigFileWatcher.swift:197 stopWatching()] 📁 [FileWatcher] Stopping all monitoring...
[2025-09-09 22:34:26.499] [ConfigFileWatcher.swift:226 stopWatching()] ✅ [FileWatcher] All monitoring stopped and state cleared
[2025-09-09 22:34:26.499] [ConfigFileWatcher.swift:43 deinit] 📁 [FileWatcher] ConfigFileWatcher deinitialized
[2025-09-09 22:34:26.499] [ProcessLifecycleManager.swift:99 init(kanataManager:)] 🏗️ [ProcessLifecycleManager] Initialized with simplified PID-based tracking and caching
[2025-09-09 22:34:26.499] [ConfigFileWatcher.swift:38 init()] 📁 [FileWatcher] ConfigFileWatcher initialized with robust monitoring
[2025-09-09 22:34:26.499] [KanataManager.swift:318 init()] 🧪 [KanataManager] Skipping background initialization in test environment
[2025-09-09 22:34:26.499] [KanataBinaryDetector.swift:64 detectCurrentStatus()] 🔍 [KanataBinaryDetector] Starting unified kanata binary detection
[2025-09-09 22:34:26.564] [PackageManager.swift:176 detectCodeSigningStatus(at:)] 🔍 [PackageManager] Code signing output for /Library/KeyPath/bin/kanata: Executable=/Library/KeyPath/bin/kanata
Identifier=kanata
Format=Mach-O thin (arm64)
CodeDirectory v=20500 size=6418 flags=0x10000(runtime) hashes=195+2 location=embedded
VersionPlatform=1
VersionMin=720896
VersionSDK=1703936
Hash type=sha256 size=32
CandidateCDHash sha256=44d44c777a2b4fcea335922f14b6fa6a2f1a8648
CandidateCDHashFull sha256=44d44c777a2b4fcea335922f14b6fa6a2f1a8648a44dbf901911eac3c3a137d7
Hash choices=sha256
CMSDigest=44d44c777a2b4fcea335922f14b6fa6a2f1a8648a44dbf901911eac3c3a137d7
CMSDigestType=2
Executable Segment base=0
Executable Segment limit=1654784
Executable Segment flags=0x1
Page size=16384
CDHash=44d44c777a2b4fcea335922f14b6fa6a2f1a8648
Signature size=8974
Authority=Developer ID Application: Micah Alpern (X2RKZ5TG99)
Authority=Developer ID Certification Authority
Authority=Apple Root CA
Timestamp=Sep 1, 2025 at 10:45:48 AM
Info.plist=not bound
TeamIdentifier=X2RKZ5TG99
Runtime Version=26.0.0
Sealed Resources=none
Internal requirements count=1 size=168

[2025-09-09 22:34:26.565] [KanataBinaryDetector.swift:119 checkSystemInstallation()] 🔍 [KanataBinaryDetector] System binary signing: developerIDSigned(authority: "Developer ID Application: Micah Alpern (X2RKZ5TG99)")
[2025-09-09 22:34:26.565] [KanataBinaryDetector.swift:68 detectCurrentStatus()] ✅ [KanataBinaryDetector] System installation detected
[2025-09-09 22:34:26.565] [KanataManager.swift:2190 isKarabinerElementsRunning()] ℹ️ [Conflict] karabiner_grabber permanently disabled by KeyPath - skipping conflict check
[2025-09-09 22:34:26.632] [KanataManager.swift:2677 isKarabinerDaemonRunning()] 🔍 [Daemon] Karabiner VirtualHIDDevice-Daemon running: true
[2025-09-09 22:34:26.632] [KanataManager.swift:2190 isKarabinerElementsRunning()] ℹ️ [Conflict] karabiner_grabber permanently disabled by KeyPath - skipping conflict check
[2025-09-09 22:34:26.632] [ProcessLifecycleManager.swift:133 detectConflicts()] 🔍 [ProcessLifecycleManager] Detecting conflicts...
[2025-09-09 22:34:26.632] [ProcessLifecycleManager.swift:137 detectConflicts()] 🧪 [TestEnvironment] Skipping process conflict detection - returning clean state
[2025-09-09 22:34:26.698] [KanataManager.swift:2134 isKarabinerDriverExtensionEnabled()] ✅ [Driver] Karabiner driver extension is enabled
[2025-09-09 22:34:26.766] [KanataManager.swift:2172 areKarabinerBackgroundServicesEnabled()] ✅ [Services] Karabiner background services detected
[2025-09-09 22:34:26.767] [ConfigFileWatcher.swift:197 stopWatching()] 📁 [FileWatcher] Stopping all monitoring...
[2025-09-09 22:34:26.767] [ConfigFileWatcher.swift:226 stopWatching()] ✅ [FileWatcher] All monitoring stopped and state cleared
[2025-09-09 22:34:26.767] [ConfigFileWatcher.swift:43 deinit] 📁 [FileWatcher] ConfigFileWatcher deinitialized
[2025-09-09 22:34:26.768] [KanataUDPClient.swift:117 authenticate(token:clientName:)] ❌ [UDP] Authentication payload too large for UDP
[2025-09-09 22:34:26.768] [KanataUDPClient.swift:65 deinit] 📡 [UDP] Client deallocated, connection cleaned up
[2025-09-09 22:34:27.023] [KanataUDPClient.swift:120 authenticate(token:clientName:)] 🔐 [UDP] Attempting authentication
[2025-09-09 22:34:27.024] [KanataUDPClient.swift:487 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Starting request 2F2EE56E-93CF-4E25-B9AA-008C4D142BD6 to 127.0.0.1:37000
[2025-09-09 22:34:27.024] [KanataUDPClient.swift:511 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Sending message to 127.0.0.1:37000 (68 bytes) [requestId: 2F2EE56E-93CF-4E25-B9AA-008C4D142BD6]
[2025-09-09 22:34:27.024] [KanataUDPClient.swift:514 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Message content: {"Authenticate":{"client_name":"KeyPath","token":"***"}} [requestId: 2F2EE56E-93CF-4E25-B9AA-008C4D142BD6]
[2025-09-09 22:34:27.025] [KanataUDPClient.swift:429 getOrCreateConnection()] 📡 [UDP] Created new connection to 127.0.0.1:37000
[2025-09-09 22:34:27.025] [KanataUDPClient.swift:120 authenticate(token:clientName:)] 🔐 [UDP] Attempting authentication
[2025-09-09 22:34:27.025] [KanataUDPClient.swift:487 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Starting request BEAD5779-F423-4F29-9106-F85BAB91BA51 to 127.0.0.1:37000
[2025-09-09 22:34:27.025] [KanataUDPClient.swift:511 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Sending message to 127.0.0.1:37000 (68 bytes) [requestId: BEAD5779-F423-4F29-9106-F85BAB91BA51]
[2025-09-09 22:34:27.025] [KanataUDPClient.swift:514 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Message content: {"Authenticate":{"token":"***","client_name":"KeyPath"}} [requestId: BEAD5779-F423-4F29-9106-F85BAB91BA51]
[2025-09-09 22:34:27.025] [KanataUDPClient.swift:120 authenticate(token:clientName:)] 🔐 [UDP] Attempting authentication
[2025-09-09 22:34:27.025] [KanataUDPClient.swift:487 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Starting request B6E297C2-837D-47DA-B2ED-F6F52BC507C4 to 127.0.0.1:37000
[2025-09-09 22:34:27.025] [KanataUDPClient.swift:511 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Sending message to 127.0.0.1:37000 (68 bytes) [requestId: B6E297C2-837D-47DA-B2ED-F6F52BC507C4]
[2025-09-09 22:34:27.025] [KanataUDPClient.swift:420 getOrCreateConnection()] 📡 [UDP] Connection state: preparing
[2025-09-09 22:34:27.025] [KanataUDPClient.swift:514 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Message content: {"Authenticate":{"client_name":"KeyPath","token":"***"}} [requestId: B6E297C2-837D-47DA-B2ED-F6F52BC507C4]
[2025-09-09 22:34:27.025] [KanataUDPClient.swift:120 authenticate(token:clientName:)] 🔐 [UDP] Attempting authentication
[2025-09-09 22:34:27.025] [KanataUDPClient.swift:487 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Starting request 37A8FFAD-3258-4063-BC16-C3F7CC4C7BAC to 127.0.0.1:37000
[2025-09-09 22:34:27.025] [KanataUDPClient.swift:511 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Sending message to 127.0.0.1:37000 (68 bytes) [requestId: 37A8FFAD-3258-4063-BC16-C3F7CC4C7BAC]
[2025-09-09 22:34:27.025] [KanataUDPClient.swift:514 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Message content: {"Authenticate":{"token":"***","client_name":"KeyPath"}} [requestId: 37A8FFAD-3258-4063-BC16-C3F7CC4C7BAC]
[2025-09-09 22:34:27.025] [KanataUDPClient.swift:120 authenticate(token:clientName:)] 🔐 [UDP] Attempting authentication
[2025-09-09 22:34:27.025] [KanataUDPClient.swift:487 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Starting request E70E6A75-4F11-4F7D-8CD5-7A69F44861E7 to 127.0.0.1:37000
[2025-09-09 22:34:27.025] [KanataUDPClient.swift:511 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Sending message to 127.0.0.1:37000 (68 bytes) [requestId: E70E6A75-4F11-4F7D-8CD5-7A69F44861E7]
[2025-09-09 22:34:27.025] [KanataUDPClient.swift:420 getOrCreateConnection()] 📡 [UDP] Connection state: ready
[2025-09-09 22:34:27.025] [KanataUDPClient.swift:514 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Message content: {"Authenticate":{"client_name":"KeyPath","token":"***"}} [requestId: E70E6A75-4F11-4F7D-8CD5-7A69F44861E7]
[2025-09-09 22:34:27.025] [KanataUDPClient.swift:120 authenticate(token:clientName:)] 🔐 [UDP] Attempting authentication
[2025-09-09 22:34:27.025] [KanataUDPClient.swift:546 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Local endpoint: 127.0.0.1:64490 [requestId: E70E6A75-4F11-4F7D-8CD5-7A69F44861E7]
[2025-09-09 22:34:27.025] [KanataUDPClient.swift:487 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Starting request EC1D3CEC-0E73-44AA-8929-1CCD432B74AD to 127.0.0.1:37000
[2025-09-09 22:34:27.025] [KanataUDPClient.swift:553 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Arming receive handler BEFORE send to prevent race condition [requestId: E70E6A75-4F11-4F7D-8CD5-7A69F44861E7]
[2025-09-09 22:34:27.025] [KanataUDPClient.swift:511 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Sending message to 127.0.0.1:37000 (68 bytes) [requestId: EC1D3CEC-0E73-44AA-8929-1CCD432B74AD]
[2025-09-09 22:34:27.025] [KanataUDPClient.swift:592 sendUDPMessage(_:requiresAuth:)] 📡 [UDP] Sending message after receive handler is armed [requestId: E70E6A75-4F11-4F7D-8CD5-7A69F44861E7]
[2025-09-09 22:34:27.026] [KanataU