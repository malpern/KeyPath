---
layout: default
title: Window Management
description: App-specific keymaps and window management with KeyPath
---

# Window Management

KeyPath supports app-specific keymaps, allowing you to have different keyboard behaviors for different applications.

## App-Specific Keymaps

Create different keyboard layouts for different apps. For example:
- Vim-style navigation in Safari
- Custom shortcuts in VS Code
- Different layer behavior in Terminal

### Creating App-Specific Rules

1. Open KeyPath
2. Go to **App-Specific Rules** tab
3. Click **Add App**
4. Select an application from the list
5. Configure key mappings for that app
6. Save

KeyPath automatically generates virtual keys for each app and manages the layer switching via TCP.

## How It Works

KeyPath uses a two-file configuration model:

- **`keypath-apps.kbd`** - Generated by KeyPath with app-specific virtual keys
- **`keypath.kbd`** - Your user config that includes the generated file

When you switch applications, KeyPath sends TCP commands to activate/deactivate the appropriate virtual keys, which your Kanata config uses to switch layers.

## Example: Vim Navigation in Safari

1. Add Safari to app-specific rules
2. Map `j` → `Down Arrow`
3. Map `k` → `Up Arrow`
4. Map `h` → `Left Arrow`
5. Map `l` → `Right Arrow`

Now when Safari is active, these keys work as navigation. When you switch to another app, they return to normal.

## Window Snapping

KeyPath can integrate with window management tools via the Action URI system:

```lisp
;; In your Kanata config
(defalias
  snap-left (push-msg "window:snap:left")
  snap-right (push-msg "window:snap:right")
  snap-maximize (push-msg "window:snap:maximize")
)
```

Or use external tools:

```bash
# Via Raycast or Alfred
open "keypath://window/snap/left"
```

## Advanced: Custom Layer Switching

For power users, you can create custom layer switching logic:

```lisp
;; In your keypath.kbd
(defalias
  app-vim (switch
    ((input virtual vk_safari)) (layer-switch vim-nav)
    ((input virtual vk_vs_code)) (layer-switch vim-nav)
    () (layer-switch base)
  )
)

(deflayer base
  @app-vim  ;; Automatically switches based on active app
)
```

## Troubleshooting

### App-specific rules not working

1. Verify the app is in your app-specific rules list
2. Check TCP is enabled and working
3. Ensure virtual keys are properly configured
4. Check logs for TCP connection errors

### Rules apply to wrong app

1. Verify bundle identifier is correct
2. Check for app name conflicts
3. Use bundle identifier instead of app name

## Best Practices

1. **Start simple** - Add one app at a time
2. **Test thoroughly** - Switch between apps to verify behavior
3. **Use descriptive names** - Name your layers clearly
4. **Document your setup** - Keep notes on which apps use which layers
